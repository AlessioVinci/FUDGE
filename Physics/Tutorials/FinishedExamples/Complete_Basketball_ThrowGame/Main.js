"use strict";
///<reference types="../../../../Core/Build/FudgeCore.js"/>
var f = FudgeCore;
//Reference Fudge, getting code completion ready and creating a shortcut f to write FudgeCode more comfortably
var Turorials_FUDGEPhysics_Lesson1;
//Reference Fudge, getting code completion ready and creating a shortcut f to write FudgeCode more comfortably
(function (Turorials_FUDGEPhysics_Lesson1) {
    //GOAL: Learning to use the physical raycast to interact with objects. Different method than the standard Fudge Depth Texture Raycast
    //Fudge Basic Variables
    window.addEventListener("load", init);
    const app = document.querySelector("canvas"); // The html element where the scene is drawn to
    let goalCounter = document.getElementById("pointsCounter");
    let viewPort; // The scene visualization
    let hierarchy; // You're object scene tree
    let cmpCamera; //The camera in the scene to shot the ray from
    //Physical Objects
    let bodies = new Array(); // Array of all physical objects in the scene to have a quick reference
    let ball = null; //The Ball we are playing with
    //Setting Variables
    //Miscellaneous Variables
    let ballStart = new f.Vector3(0, 1.5, 3);
    let startPosition;
    let endPosition;
    let playerForce = 5000;
    let points = 0;
    let lastSpeed = 0;
    //Materials
    let boardDefault = new f.Material("Board", f.ShaderFlat, new f.CoatColored(new f.Color(0.85, 0.95, 0.85, 1)));
    let boardGoal = new f.Material("BoardGoal", f.ShaderFlat, new f.CoatColored(new f.Color(0.2, 0.95, 0.2, 1)));
    let groundMaterial = new f.Material("Ground", f.ShaderFlat, new f.CoatColored(new f.Color(0.2, 0.2, 0.2, 1)));
    //Function to initialize the Fudge Scene with a camera, light, viewport and PHYSCIAL Objects
    function init(_event) {
        hierarchy = new f.Node("Scene"); //create the root Node where every object is parented to. Should never be changed
        //#region Physics
        //PHYSICS - Basic Plane and Cube
        //Creating a physically static ground plane for our physics playground. A simple scaled cube but with physics type set to static
        bodies[0] = createCompleteNode("Ground", groundMaterial, new f.MeshCube(), 0, f.PHYSICS_TYPE.STATIC);
        bodies[0].mtxLocal.scale(new f.Vector3(14, 0.3, 14)); //Scale the body with it's standard ComponentTransform
        bodies[0].getComponent(f.ComponentRigidbody).restitution = 0.5;
        hierarchy.appendChild(bodies[0]); //Add the node to the scene by adding it to the scene-root
        //Backwalls - So cubes are not pushed away easily
        bodies[1] = createCompleteNode("WallBack", groundMaterial, new f.MeshCube(), 0, f.PHYSICS_TYPE.STATIC);
        bodies[1].mtxLocal.translate(new f.Vector3(0, -7, -7.5));
        bodies[1].mtxLocal.scale(new f.Vector3(14, 0.3, 15));
        bodies[1].mtxLocal.rotateX(90, true);
        hierarchy.appendChild(bodies[1]);
        bodies[2] = createCompleteNode("WallLeft", groundMaterial, new f.MeshCube(), 0, f.PHYSICS_TYPE.STATIC);
        bodies[2].mtxLocal.translate(new f.Vector3(7.5, 7, 0));
        bodies[2].mtxLocal.scale(new f.Vector3(15, 0.3, 14));
        bodies[2].mtxLocal.rotateZ(90, true);
        hierarchy.appendChild(bodies[2]);
        bodies[3] = createCompleteNode("WallRight", groundMaterial, new f.MeshCube(), 0, f.PHYSICS_TYPE.STATIC);
        bodies[3].mtxLocal.translate(new f.Vector3(-7.5, 7, 0));
        bodies[3].mtxLocal.scale(new f.Vector3(15, 0.3, 14));
        bodies[3].mtxLocal.rotateZ(-90, true);
        hierarchy.appendChild(bodies[3]);
        //Ball
        bodies[4] = createCompleteNode("Basketball", new f.Material("Basketball", f.ShaderFlat, new f.CoatColored(new f.Color(181 / 255, 66 / 255, 19 / 255))), new f.MeshSphere(), 0.65, f.PHYSICS_TYPE.KINEMATIC, f.PHYSICS_GROUP.DEFAULT, f.COLLIDER_TYPE.SPHERE);
        bodies[4].mtxLocal.translate(ballStart);
        bodies[4].mtxLocal.scale(new f.Vector3(0.26, 0.26, 0.26)); //26cm diameter basketball
        hierarchy.appendChild(bodies[4]);
        ball = bodies[4].getComponent(f.ComponentRigidbody);
        ball.restitution = 0.95;
        createCourt(5, new f.Vector3(0, 3.05, -6));
        createShootableDecoration(12, new f.Vector3(3, 0.5, -3));
        createShootableDecoration(14, new f.Vector3(-3, 0.5, -2));
        createShootableDecoration(16, new f.Vector3(-2, 4, -4), -1);
        //Add Events to our trigger and colliders
        bodies[11].getComponent(f.ComponentRigidbody).addEventListener("TriggerEnteredCollision" /* TRIGGER_ENTER */, goalCheckEnter);
        bodies[11].getComponent(f.ComponentRigidbody).addEventListener("TriggerLeftCollision" /* TRIGGER_EXIT */, goalCheckExit);
        bodies[0].getComponent(f.ComponentRigidbody).addEventListener("ColliderEnteredCollision" /* COLLISION_ENTER */, groundColEnter);
        bodies[13].getComponent(f.ComponentRigidbody).addEventListener("ColliderEnteredCollision" /* COLLISION_ENTER */, targetColEnter);
        bodies[15].getComponent(f.ComponentRigidbody).addEventListener("ColliderEnteredCollision" /* COLLISION_ENTER */, targetColEnter);
        bodies[17].getComponent(f.ComponentRigidbody).addEventListener("ColliderEnteredCollision" /* COLLISION_ENTER */, targetColEnter);
        //#endregion
        f.Physics.world.setSolverIterations(15);
        //Standard Fudge Scene Initialization - Creating a directional light, a camera and initialize the viewport
        let cmpLight = new f.ComponentLight(new f.LightDirectional(f.Color.CSS("WHITE")));
        cmpLight.pivot.lookAt(new f.Vector3(-0.5, -1, -0.8)); //Set light direction
        hierarchy.addComponent(cmpLight);
        cmpCamera = new f.ComponentCamera();
        cmpCamera.backgroundColor = f.Color.CSS("GREY");
        cmpCamera.pivot.translate(new f.Vector3(0, 1.5, 6)); //Centered Camera a little bit backwards
        cmpCamera.pivot.lookAt(new f.Vector3(0, 2, 0)); //Set the camera matrix so that it looks at the basket
        viewPort = new f.Viewport(); //Creating a viewport that is rendered onto the html canvas element
        viewPort.initialize("Viewport", hierarchy, cmpCamera, app); //initialize the viewport with the root node, camera and canvas
        //Activating input events - Important for this lesson
        viewPort.activatePointerEvent("\u0192pointerdown" /* DOWN */, true); //Tell Fudge to use it's internal mouse event 
        viewPort.addEventListener("\u0192pointerdown" /* DOWN */, hndMouseDown); //Set what function should receive the event
        viewPort.activatePointerEvent("\u0192pointerup" /* UP */, true);
        viewPort.addEventListener("\u0192pointerup" /* UP */, hndMouseUp);
        //Physics Events
        //PHYSICS - Start using physics by telling the physics the scene root object. Physics will recalculate every transform and initialize
        f.Physics.start(hierarchy);
        //f.Physics.settings.debugDraw = true; //Seeing the physical scene in debug mode - Lesson Debugging
        //Important start the game loop after starting physics, so physics can use the current transform before it's first iteration
        f.Loop.addEventListener("loopFrame" /* LOOP_FRAME */, update); //Tell the game loop to call the update function on each frame
        f.Loop.start(); //Stard the game loop
    }
    //Function to animate/update the Fudge scene, commonly known as gameloop
    function update() {
        f.Physics.world.simulate(); //PHYSICS - Simulate physical changes each frame, parameter to set time between frames
        raycastSpeedTest();
        viewPort.draw(); // Draw the current Fudge Scene to the canvas
    }
    // Function to quickly create a node with multiple needed FudgeComponents, including a physics component
    function createCompleteNode(_name, _material, _mesh, _mass, _physicsType, _group = f.PHYSICS_GROUP.DEFAULT, _colType = f.COLLIDER_TYPE.CUBE) {
        //Standard Fudge Node Creation
        let node = new f.Node(_name); //Creating the node
        let cmpMesh = new f.ComponentMesh(_mesh); //Creating a mesh for the node
        let cmpMaterial = new f.ComponentMaterial(_material); //Creating a material for the node
        let cmpTransform = new f.ComponentTransform(); //Transform holding position/rotation/scaling of the node
        let cmpRigidbody = new f.ComponentRigidbody(_mass, _physicsType, _colType, _group); //Adding a physical body component to use physics
        node.addComponent(cmpMesh);
        node.addComponent(cmpMaterial);
        node.addComponent(cmpTransform);
        node.addComponent(cmpRigidbody); // <-- best practice to add physics component last
        return node;
    }
    //Creating a node without any physics
    function createStandardFudgeNode(_name, _material, _mesh) {
        let node = new f.Node(_name); //Creating the node
        let cmpMesh = new f.ComponentMesh(_mesh); //Creating a mesh for the node
        let cmpMaterial = new f.ComponentMaterial(_material); //Creating a material for the node
        let cmpTransform = new f.ComponentTransform(); //Transform holding position/rotation/scaling of the node
        node.addComponent(cmpMesh);
        node.addComponent(cmpMaterial);
        node.addComponent(cmpTransform);
        return node;
    }
    //What happens when the left mouse button is pressed
    function hndMouseDown(_event) {
        resetBall();
        startPosition = viewPort.pointClientToProjection(new f.Vector2(_event.pointerX, _event.pointerY));
    }
    //What happens when the left mouse button is released
    function hndMouseUp(_event) {
        endPosition = viewPort.pointClientToProjection(new f.Vector2(_event.pointerX, _event.pointerY));
        let xDirection = startPosition.x - endPosition.x;
        let forwardUpStrength = startPosition.y - endPosition.y;
        let differenceVector = f.Vector2.DIFFERENCE(startPosition, endPosition);
        let power = differenceVector.magnitude * playerForce;
        throwBall(xDirection, forwardUpStrength, power);
    }
    function throwBall(_xDirection, _forwardUpStrength, _power) {
        ball.physicsType = f.PHYSICS_TYPE.DYNAMIC; //make ball listening to physics again
        ball.applyForce(new f.Vector3(-_xDirection * _power * 0.8, _power * -_forwardUpStrength * 0.8, _forwardUpStrength * _power)); //throw the ball with forces
        ball.applyTorque(new f.Vector3(-0.0005 * _power, 0, 0)); //Just add a tad bit of rotational force to make it visually more realistic
    }
    function resetBall() {
        f.Debug.log(ball.mass);
        //ball.setPosition(ballStart); <-- Position can't be set by physics since you make the ball kinematic in the same frame
        ball.getContainer().mtxLocal.translation = ballStart; // Kinematic objects need to be set through normal transform
        ball.getContainer().mtxLocal.rotation = f.Vector3.ZERO();
        ball.setVelocity(new f.Vector3(0, 0, 0));
        ball.setAngularVelocity(new f.Vector3(0, 0, 0));
        ball.physicsType = f.PHYSICS_TYPE.KINEMATIC;
    }
    //Creating a basket and a board with some decoration - 7 new bodies
    function createCourt(_bodyStartNo, _position) {
        let materialBasket = new f.Material("Basket", f.ShaderFlat, new f.CoatColored(new f.Color(0.9, 0.2, 0.2, 1)));
        let basketPosition = _position;
        //Basket - Square - Not completly real values of course since it's no circle
        bodies[_bodyStartNo] = createCompleteNode("BasketBack", materialBasket, new f.MeshCube(), 0, f.PHYSICS_TYPE.STATIC);
        bodies[_bodyStartNo].mtxLocal.translate(new f.Vector3(basketPosition.x, basketPosition.y, basketPosition.z));
        bodies[_bodyStartNo].mtxLocal.scale(new f.Vector3(0.6, 0.05, 0.15));
        hierarchy.appendChild(bodies[_bodyStartNo]);
        bodies[_bodyStartNo + 1] = createCompleteNode("BasketSide", materialBasket, new f.MeshCube(), 0, f.PHYSICS_TYPE.STATIC);
        bodies[_bodyStartNo + 1].mtxLocal.translate(new f.Vector3(basketPosition.x + 0.3, basketPosition.y, basketPosition.z - 0.3));
        bodies[_bodyStartNo + 1].mtxLocal.scale(new f.Vector3(0.15, 0.05, 0.6));
        hierarchy.appendChild(bodies[_bodyStartNo + 1]);
        bodies[_bodyStartNo + 2] = createCompleteNode("BasketSide", materialBasket, new f.MeshCube(), 0, f.PHYSICS_TYPE.STATIC);
        bodies[_bodyStartNo + 2].mtxLocal.translate(new f.Vector3(basketPosition.x - 0.3, basketPosition.y, basketPosition.z - 0.3));
        bodies[_bodyStartNo + 2].mtxLocal.scale(new f.Vector3(0.15, 0.05, 0.6));
        hierarchy.appendChild(bodies[_bodyStartNo + 2]);
        bodies[_bodyStartNo + 3] = createCompleteNode("BasketFront", materialBasket, new f.MeshCube(), 0, f.PHYSICS_TYPE.STATIC);
        bodies[_bodyStartNo + 3].mtxLocal.translate(new f.Vector3(basketPosition.x, basketPosition.y, basketPosition.z - 0.6));
        bodies[_bodyStartNo + 3].mtxLocal.scale(new f.Vector3(0.6, 0.05, 0.15));
        hierarchy.appendChild(bodies[_bodyStartNo + 3]);
        bodies[_bodyStartNo + 4] = createCompleteNode("BasketHolder", materialBasket, new f.MeshCube(), 0, f.PHYSICS_TYPE.STATIC);
        bodies[_bodyStartNo + 4].mtxLocal.translate(new f.Vector3(basketPosition.x, basketPosition.y - 0.01, basketPosition.z - 0.775));
        bodies[_bodyStartNo + 4].mtxLocal.scale(new f.Vector3(0.15, 0.05, 0.6));
        hierarchy.appendChild(bodies[_bodyStartNo + 4]);
        bodies[_bodyStartNo + 5] = createCompleteNode("WhiteBoard", boardDefault, new f.MeshCube(), 0, f.PHYSICS_TYPE.STATIC);
        bodies[_bodyStartNo + 5].mtxLocal.translate(new f.Vector3(basketPosition.x, basketPosition.y + 0.45, basketPosition.z - 0.775)); //Board 17.5 cm from basket
        bodies[_bodyStartNo + 5].mtxLocal.scale(new f.Vector3(1.80, 1.05, 0.15));
        hierarchy.appendChild(bodies[_bodyStartNo + 5]);
        //Board black decoration
        let node; //we do not add them to bodies they will only be decorative and therefore normal Fudge nodes
        let decorationMaterial = new f.Material("BoardDeco", f.ShaderFlat, new f.CoatColored(new f.Color(0.1, 0.1, 0.1, 1)));
        node = createStandardFudgeNode("BlackUpperStripe", decorationMaterial, new f.MeshCube());
        node.mtxLocal.translate(new f.Vector3(basketPosition.x, basketPosition.y + 0.5, basketPosition.z - 0.7235)); //Board 17.5 cm from basket
        node.mtxLocal.scale(new f.Vector3(0.59, 0.05, 0.05));
        hierarchy.appendChild(node);
        node = createStandardFudgeNode("BlackLowerStripe", decorationMaterial, new f.MeshCube());
        node.mtxLocal.translate(new f.Vector3(basketPosition.x, basketPosition.y + 0.05, basketPosition.z - 0.7235)); //Board 17.5 cm from basket
        node.mtxLocal.scale(new f.Vector3(0.59, 0.05, 0.05));
        hierarchy.appendChild(node);
        node = createStandardFudgeNode("BlackLeftStripe", decorationMaterial, new f.MeshCube());
        node.mtxLocal.translate(new f.Vector3(basketPosition.x - 0.27, basketPosition.y + 0.25, basketPosition.z - 0.7235)); //Board 17.5 cm from basket
        node.mtxLocal.scale(new f.Vector3(0.05, 0.45, 0.05));
        hierarchy.appendChild(node);
        node = createStandardFudgeNode("BlackRightStripe", decorationMaterial, new f.MeshCube());
        node.mtxLocal.translate(new f.Vector3(basketPosition.x + 0.27, basketPosition.y + 0.25, basketPosition.z - 0.7235)); //Board 17.5 cm from basket
        node.mtxLocal.scale(new f.Vector3(0.05, 0.45, 0.05));
        hierarchy.appendChild(node);
        //GoalTrigger - Slightly positioned under the basket entry so it only counts when it goes through and very small
        bodies[_bodyStartNo + 6] = createCompleteNode("GoalTrigger", materialBasket, new f.MeshCube(), 0, f.PHYSICS_TYPE.STATIC, f.PHYSICS_GROUP.TRIGGER);
        bodies[_bodyStartNo + 6].removeComponent(bodies[_bodyStartNo + 6].getComponent(f.ComponentMesh)); //Trigger does not need to be visible so remove the mesh component
        bodies[_bodyStartNo + 6].mtxLocal.translate(new f.Vector3(basketPosition.x, basketPosition.y - 0.05, basketPosition.z - 0.3));
        bodies[_bodyStartNo + 6].mtxLocal.scale(new f.Vector3(0.1, 0.05, 0.1));
        hierarchy.appendChild(bodies[_bodyStartNo + 6]);
    }
    //Some Bodies on Joints that move when hit by the ball, just for visuals and fun - Lesson Joints
    function createShootableDecoration(_bodyStartNo, _position, _height = 1) {
        let stickMaterial = new f.Material("JointStick", f.ShaderFlat, new f.CoatColored(new f.Color(0, 0.15, 1, 0.7)));
        //Spherical Joint
        bodies[_bodyStartNo] = createCompleteNode("Socket", groundMaterial, new f.MeshCube(), 1, f.PHYSICS_TYPE.STATIC, f.PHYSICS_GROUP.GROUP_1);
        hierarchy.appendChild(bodies[_bodyStartNo]);
        bodies[_bodyStartNo].mtxLocal.translate(new f.Vector3(_position.x, _position.y, _position.z));
        bodies[_bodyStartNo].mtxLocal.scale(new f.Vector3(0.5, 0.5, 0.5));
        bodies[_bodyStartNo + 1] = createCompleteNode("BallJoint", stickMaterial, new f.MeshCube(), 0.5, f.PHYSICS_TYPE.DYNAMIC, f.PHYSICS_GROUP.GROUP_1);
        hierarchy.appendChild(bodies[_bodyStartNo + 1]);
        bodies[_bodyStartNo + 1].mtxLocal.translate(new f.Vector3(_position.x, _position.y + _height, _position.z));
        bodies[_bodyStartNo + 1].mtxLocal.scale(new f.Vector3(0.3, 1.5, 0.3));
        let hingeJoint = new f.ComponentJointRevolute(bodies[_bodyStartNo].getComponent(f.ComponentRigidbody), bodies[_bodyStartNo + 1].getComponent(f.ComponentRigidbody), new f.Vector3(1, 0, 0));
        bodies[_bodyStartNo].addComponent(hingeJoint);
        hingeJoint.springDamping = 0.9;
    }
    //Spawn a object that is signaling a fresh bounce on the ground - Lesson Collision Events - Impulses
    function spawnDecoObjectOnSpot(_position, _impulseStrength = 0) {
        let _node = createStandardFudgeNode("Deko", boardDefault, new f.MeshCube());
        _node.mtxLocal.translate(_position);
        _node.mtxLocal.scale(new f.Vector3(0.1, _impulseStrength / 10, 0.1));
        hierarchy.addChild(_node);
        window.setTimeout(despawnDecoObject, 1000, _node);
    }
    //Remove the child against after a while (not performant, should use object pooling but that is not part of the lesson)
    function despawnDecoObject(_node) {
        hierarchy.removeChild(_node);
    }
    //Simple Raycast that is checking the speed of the passing ball on the basketring - Lesson Raycast
    function raycastSpeedTest() {
        let origin = new f.Vector3(0, 3.15, -6.775);
        let rayHit = f.Physics.raycast(origin, new f.Vector3(0, 0, 1), 1.5);
        if (rayHit.hit && rayHit.rigidbodyComponent.getContainer().name == "Basketball") {
            lastSpeed = ball.getVelocity().magnitude;
            goalCounter.textContent = "Points: " + points.toString() + " / Speed: " + lastSpeed.toFixed(2);
        }
    }
    //#region Event Handling
    //Register a triggering event - Lesson Trigger Events
    function goalCheckEnter(_event) {
        if (_event.cmpRigidbody.getContainer().name == "Basketball") {
            bodies[10].getComponent(f.ComponentMaterial).material = boardGoal;
            points += 100;
            goalCounter.textContent = "Points: " + points.toString() + " / Speed: " + lastSpeed.toFixed(2);
        }
    }
    function goalCheckExit(_event) {
        if (_event.cmpRigidbody.getContainer().name == "Basketball") {
            bodies[10].getComponent(f.ComponentMaterial).material = boardDefault;
        }
    }
    //Register a collision of a body with the ground - Lesson Collision Events
    function groundColEnter(_event) {
        if (_event.cmpRigidbody.getContainer().name == "Basketball") {
            spawnDecoObjectOnSpot(_event.collisionPoint, _event.normalImpulse);
        }
    }
    function targetColEnter(_event) {
        if (_event.cmpRigidbody.getContainer().name == "Basketball") {
            points += 50;
            goalCounter.textContent = "Points: " + points.toString() + " / Speed: " + lastSpeed.toFixed(2);
        }
    }
    //#endregion
})(Turorials_FUDGEPhysics_Lesson1 || (Turorials_FUDGEPhysics_Lesson1 = {}));
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiTWFpbi5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIk1haW4udHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtBQUFBLDJEQUEyRDtBQUMzRCxJQUFPLENBQUMsR0FBRyxTQUFTLENBQUM7QUFDckIsOEdBQThHO0FBRTlHLElBQVUsOEJBQThCLENBa1V2QztBQXBVRCw4R0FBOEc7QUFFOUcsV0FBVSw4QkFBOEI7SUFFdEMscUlBQXFJO0lBRXJJLHVCQUF1QjtJQUN2QixNQUFNLENBQUMsZ0JBQWdCLENBQUMsTUFBTSxFQUFFLElBQUksQ0FBQyxDQUFDO0lBQ3RDLE1BQU0sR0FBRyxHQUFzQixRQUFRLENBQUMsYUFBYSxDQUFDLFFBQVEsQ0FBQyxDQUFDLENBQUMsK0NBQStDO0lBQ2hILElBQUksV0FBVyxHQUFnQixRQUFRLENBQUMsY0FBYyxDQUFDLGVBQWUsQ0FBQyxDQUFDO0lBQ3hFLElBQUksUUFBb0IsQ0FBQyxDQUFDLDBCQUEwQjtJQUNwRCxJQUFJLFNBQWlCLENBQUMsQ0FBQywyQkFBMkI7SUFDbEQsSUFBSSxTQUE0QixDQUFDLENBQUMsOENBQThDO0lBR2hGLGtCQUFrQjtJQUNsQixJQUFJLE1BQU0sR0FBYSxJQUFJLEtBQUssRUFBRSxDQUFDLENBQUMsdUVBQXVFO0lBQzNHLElBQUksSUFBSSxHQUF5QixJQUFJLENBQUMsQ0FBQyw4QkFBOEI7SUFHckUsbUJBQW1CO0lBR25CLHlCQUF5QjtJQUN6QixJQUFJLFNBQVMsR0FBYyxJQUFJLENBQUMsQ0FBQyxPQUFPLENBQUMsQ0FBQyxFQUFFLEdBQUcsRUFBRSxDQUFDLENBQUMsQ0FBQztJQUNwRCxJQUFJLGFBQXdCLENBQUM7SUFDN0IsSUFBSSxXQUFzQixDQUFDO0lBQzNCLElBQUksV0FBVyxHQUFXLElBQUksQ0FBQztJQUMvQixJQUFJLE1BQU0sR0FBVyxDQUFDLENBQUM7SUFDdkIsSUFBSSxTQUFTLEdBQVcsQ0FBQyxDQUFDO0lBRTFCLFdBQVc7SUFDWCxJQUFJLFlBQVksR0FBZSxJQUFJLENBQUMsQ0FBQyxRQUFRLENBQUMsT0FBTyxFQUFFLENBQUMsQ0FBQyxVQUFVLEVBQUUsSUFBSSxDQUFDLENBQUMsV0FBVyxDQUFDLElBQUksQ0FBQyxDQUFDLEtBQUssQ0FBQyxJQUFJLEVBQUUsSUFBSSxFQUFFLElBQUksRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7SUFDMUgsSUFBSSxTQUFTLEdBQWUsSUFBSSxDQUFDLENBQUMsUUFBUSxDQUFDLFdBQVcsRUFBRSxDQUFDLENBQUMsVUFBVSxFQUFFLElBQUksQ0FBQyxDQUFDLFdBQVcsQ0FBQyxJQUFJLENBQUMsQ0FBQyxLQUFLLENBQUMsR0FBRyxFQUFFLElBQUksRUFBRSxHQUFHLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO0lBQ3pILElBQUksY0FBYyxHQUFlLElBQUksQ0FBQyxDQUFDLFFBQVEsQ0FBQyxRQUFRLEVBQUUsQ0FBQyxDQUFDLFVBQVUsRUFBRSxJQUFJLENBQUMsQ0FBQyxXQUFXLENBQUMsSUFBSSxDQUFDLENBQUMsS0FBSyxDQUFDLEdBQUcsRUFBRSxHQUFHLEVBQUUsR0FBRyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztJQUUxSCw0RkFBNEY7SUFDNUYsU0FBUyxJQUFJLENBQUMsTUFBYTtRQUV6QixTQUFTLEdBQUcsSUFBSSxDQUFDLENBQUMsSUFBSSxDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUMsaUZBQWlGO1FBRWxILGlCQUFpQjtRQUNqQixnQ0FBZ0M7UUFDaEMsZ0lBQWdJO1FBQ2hJLE1BQU0sQ0FBQyxDQUFDLENBQUMsR0FBRyxrQkFBa0IsQ0FBQyxRQUFRLEVBQUUsY0FBYyxFQUFFLElBQUksQ0FBQyxDQUFDLFFBQVEsRUFBRSxFQUFFLENBQUMsRUFBRSxDQUFDLENBQUMsWUFBWSxDQUFDLE1BQU0sQ0FBQyxDQUFDO1FBQ3JHLE1BQU0sQ0FBQyxDQUFDLENBQUMsQ0FBQyxRQUFRLENBQUMsS0FBSyxDQUFDLElBQUksQ0FBQyxDQUFDLE9BQU8sQ0FBQyxFQUFFLEVBQUUsR0FBRyxFQUFFLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxzREFBc0Q7UUFDNUcsTUFBTSxDQUFDLENBQUMsQ0FBQyxDQUFDLFlBQVksQ0FBQyxDQUFDLENBQUMsa0JBQWtCLENBQUMsQ0FBQyxXQUFXLEdBQUcsR0FBRyxDQUFDO1FBQy9ELFNBQVMsQ0FBQyxXQUFXLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQywwREFBMEQ7UUFFNUYsaURBQWlEO1FBQ2pELE1BQU0sQ0FBQyxDQUFDLENBQUMsR0FBRyxrQkFBa0IsQ0FBQyxVQUFVLEVBQUUsY0FBYyxFQUFFLElBQUksQ0FBQyxDQUFDLFFBQVEsRUFBRSxFQUFFLENBQUMsRUFBRSxDQUFDLENBQUMsWUFBWSxDQUFDLE1BQU0sQ0FBQyxDQUFDO1FBQ3ZHLE1BQU0sQ0FBQyxDQUFDLENBQUMsQ0FBQyxRQUFRLENBQUMsU0FBUyxDQUFDLElBQUksQ0FBQyxDQUFDLE9BQU8sQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDO1FBQ3pELE1BQU0sQ0FBQyxDQUFDLENBQUMsQ0FBQyxRQUFRLENBQUMsS0FBSyxDQUFDLElBQUksQ0FBQyxDQUFDLE9BQU8sQ0FBQyxFQUFFLEVBQUUsR0FBRyxFQUFFLEVBQUUsQ0FBQyxDQUFDLENBQUM7UUFDckQsTUFBTSxDQUFDLENBQUMsQ0FBQyxDQUFDLFFBQVEsQ0FBQyxPQUFPLENBQUMsRUFBRSxFQUFFLElBQUksQ0FBQyxDQUFDO1FBQ3JDLFNBQVMsQ0FBQyxXQUFXLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7UUFFakMsTUFBTSxDQUFDLENBQUMsQ0FBQyxHQUFHLGtCQUFrQixDQUFDLFVBQVUsRUFBRSxjQUFjLEVBQUUsSUFBSSxDQUFDLENBQUMsUUFBUSxFQUFFLEVBQUUsQ0FBQyxFQUFFLENBQUMsQ0FBQyxZQUFZLENBQUMsTUFBTSxDQUFDLENBQUM7UUFDdkcsTUFBTSxDQUFDLENBQUMsQ0FBQyxDQUFDLFFBQVEsQ0FBQyxTQUFTLENBQUMsSUFBSSxDQUFDLENBQUMsT0FBTyxDQUFDLEdBQUcsRUFBRSxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQztRQUN2RCxNQUFNLENBQUMsQ0FBQyxDQUFDLENBQUMsUUFBUSxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUMsQ0FBQyxPQUFPLENBQUMsRUFBRSxFQUFFLEdBQUcsRUFBRSxFQUFFLENBQUMsQ0FBQyxDQUFDO1FBQ3JELE1BQU0sQ0FBQyxDQUFDLENBQUMsQ0FBQyxRQUFRLENBQUMsT0FBTyxDQUFDLEVBQUUsRUFBRSxJQUFJLENBQUMsQ0FBQztRQUNyQyxTQUFTLENBQUMsV0FBVyxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO1FBRWpDLE1BQU0sQ0FBQyxDQUFDLENBQUMsR0FBRyxrQkFBa0IsQ0FBQyxXQUFXLEVBQUUsY0FBYyxFQUFFLElBQUksQ0FBQyxDQUFDLFFBQVEsRUFBRSxFQUFFLENBQUMsRUFBRSxDQUFDLENBQUMsWUFBWSxDQUFDLE1BQU0sQ0FBQyxDQUFDO1FBQ3hHLE1BQU0sQ0FBQyxDQUFDLENBQUMsQ0FBQyxRQUFRLENBQUMsU0FBUyxDQUFDLElBQUksQ0FBQyxDQUFDLE9BQU8sQ0FBQyxDQUFDLEdBQUcsRUFBRSxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQztRQUN4RCxNQUFNLENBQUMsQ0FBQyxDQUFDLENBQUMsUUFBUSxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUMsQ0FBQyxPQUFPLENBQUMsRUFBRSxFQUFFLEdBQUcsRUFBRSxFQUFFLENBQUMsQ0FBQyxDQUFDO1FBQ3JELE1BQU0sQ0FBQyxDQUFDLENBQUMsQ0FBQyxRQUFRLENBQUMsT0FBTyxDQUFDLENBQUMsRUFBRSxFQUFFLElBQUksQ0FBQyxDQUFDO1FBQ3RDLFNBQVMsQ0FBQyxXQUFXLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7UUFFakMsTUFBTTtRQUNOLE1BQU0sQ0FBQyxDQUFDLENBQUMsR0FBRyxrQkFBa0IsQ0FBQyxZQUFZLEVBQUUsSUFBSSxDQUFDLENBQUMsUUFBUSxDQUFDLFlBQVksRUFBRSxDQUFDLENBQUMsVUFBVSxFQUFFLElBQUksQ0FBQyxDQUFDLFdBQVcsQ0FBQyxJQUFJLENBQUMsQ0FBQyxLQUFLLENBQUMsR0FBRyxHQUFHLEdBQUcsRUFBRSxFQUFFLEdBQUcsR0FBRyxFQUFFLEVBQUUsR0FBRyxHQUFHLENBQUMsQ0FBQyxDQUFDLEVBQUUsSUFBSSxDQUFDLENBQUMsVUFBVSxFQUFFLEVBQUUsSUFBSSxFQUFFLENBQUMsQ0FBQyxZQUFZLENBQUMsU0FBUyxFQUFFLENBQUMsQ0FBQyxhQUFhLENBQUMsT0FBTyxFQUFFLENBQUMsQ0FBQyxhQUFhLENBQUMsTUFBTSxDQUFDLENBQUM7UUFDN1AsTUFBTSxDQUFDLENBQUMsQ0FBQyxDQUFDLFFBQVEsQ0FBQyxTQUFTLENBQUMsU0FBUyxDQUFDLENBQUM7UUFDeEMsTUFBTSxDQUFDLENBQUMsQ0FBQyxDQUFDLFFBQVEsQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDLENBQUMsT0FBTyxDQUFDLElBQUksRUFBRSxJQUFJLEVBQUUsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLDBCQUEwQjtRQUNyRixTQUFTLENBQUMsV0FBVyxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO1FBQ2pDLElBQUksR0FBRyxNQUFNLENBQUMsQ0FBQyxDQUFDLENBQUMsWUFBWSxDQUFDLENBQUMsQ0FBQyxrQkFBa0IsQ0FBQyxDQUFDO1FBQ3BELElBQUksQ0FBQyxXQUFXLEdBQUcsSUFBSSxDQUFDO1FBRXhCLFdBQVcsQ0FBQyxDQUFDLEVBQUUsSUFBSSxDQUFDLENBQUMsT0FBTyxDQUFDLENBQUMsRUFBRSxJQUFJLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO1FBRTNDLHlCQUF5QixDQUFDLEVBQUUsRUFBRSxJQUFJLENBQUMsQ0FBQyxPQUFPLENBQUMsQ0FBQyxFQUFFLEdBQUcsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7UUFDekQseUJBQXlCLENBQUMsRUFBRSxFQUFFLElBQUksQ0FBQyxDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUMsRUFBRSxHQUFHLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO1FBQzFELHlCQUF5QixDQUFDLEVBQUUsRUFBRSxJQUFJLENBQUMsQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQztRQUU1RCx5Q0FBeUM7UUFDekMsTUFBTSxDQUFDLEVBQUUsQ0FBQyxDQUFDLFlBQVksQ0FBQyxDQUFDLENBQUMsa0JBQWtCLENBQUMsQ0FBQyxnQkFBZ0IsZ0RBQWdDLGNBQWMsQ0FBQyxDQUFDO1FBQzlHLE1BQU0sQ0FBQyxFQUFFLENBQUMsQ0FBQyxZQUFZLENBQUMsQ0FBQyxDQUFDLGtCQUFrQixDQUFDLENBQUMsZ0JBQWdCLDRDQUErQixhQUFhLENBQUMsQ0FBQztRQUU1RyxNQUFNLENBQUMsQ0FBQyxDQUFDLENBQUMsWUFBWSxDQUFDLENBQUMsQ0FBQyxrQkFBa0IsQ0FBQyxDQUFDLGdCQUFnQixtREFBa0MsY0FBYyxDQUFDLENBQUM7UUFDL0csTUFBTSxDQUFDLEVBQUUsQ0FBQyxDQUFDLFlBQVksQ0FBQyxDQUFDLENBQUMsa0JBQWtCLENBQUMsQ0FBQyxnQkFBZ0IsbURBQWtDLGNBQWMsQ0FBQyxDQUFDO1FBQ2hILE1BQU0sQ0FBQyxFQUFFLENBQUMsQ0FBQyxZQUFZLENBQUMsQ0FBQyxDQUFDLGtCQUFrQixDQUFDLENBQUMsZ0JBQWdCLG1EQUFrQyxjQUFjLENBQUMsQ0FBQztRQUNoSCxNQUFNLENBQUMsRUFBRSxDQUFDLENBQUMsWUFBWSxDQUFDLENBQUMsQ0FBQyxrQkFBa0IsQ0FBQyxDQUFDLGdCQUFnQixtREFBa0MsY0FBYyxDQUFDLENBQUM7UUFDaEgsWUFBWTtRQUVaLENBQUMsQ0FBQyxPQUFPLENBQUMsS0FBSyxDQUFDLG1CQUFtQixDQUFDLEVBQUUsQ0FBQyxDQUFDO1FBRXhDLDBHQUEwRztRQUMxRyxJQUFJLFFBQVEsR0FBcUIsSUFBSSxDQUFDLENBQUMsY0FBYyxDQUFDLElBQUksQ0FBQyxDQUFDLGdCQUFnQixDQUFDLENBQUMsQ0FBQyxLQUFLLENBQUMsR0FBRyxDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUMsQ0FBQztRQUNwRyxRQUFRLENBQUMsS0FBSyxDQUFDLE1BQU0sQ0FBQyxJQUFJLENBQUMsQ0FBQyxPQUFPLENBQUMsQ0FBQyxHQUFHLEVBQUUsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMscUJBQXFCO1FBQzNFLFNBQVMsQ0FBQyxZQUFZLENBQUMsUUFBUSxDQUFDLENBQUM7UUFFakMsU0FBUyxHQUFHLElBQUksQ0FBQyxDQUFDLGVBQWUsRUFBRSxDQUFDO1FBQ3BDLFNBQVMsQ0FBQyxlQUFlLEdBQUcsQ0FBQyxDQUFDLEtBQUssQ0FBQyxHQUFHLENBQUMsTUFBTSxDQUFDLENBQUM7UUFDaEQsU0FBUyxDQUFDLEtBQUssQ0FBQyxTQUFTLENBQUMsSUFBSSxDQUFDLENBQUMsT0FBTyxDQUFDLENBQUMsRUFBRSxHQUFHLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLHdDQUF3QztRQUM3RixTQUFTLENBQUMsS0FBSyxDQUFDLE1BQU0sQ0FBQyxJQUFJLENBQUMsQ0FBQyxPQUFPLENBQUMsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsc0RBQXNEO1FBRXRHLFFBQVEsR0FBRyxJQUFJLENBQUMsQ0FBQyxRQUFRLEVBQUUsQ0FBQyxDQUFDLG1FQUFtRTtRQUNoRyxRQUFRLENBQUMsVUFBVSxDQUFDLFVBQVUsRUFBRSxTQUFTLEVBQUUsU0FBUyxFQUFFLEdBQUcsQ0FBQyxDQUFDLENBQUMsK0RBQStEO1FBRTNILHFEQUFxRDtRQUNyRCxRQUFRLENBQUMsb0JBQW9CLGlDQUF1QixJQUFJLENBQUMsQ0FBQyxDQUFDLDhDQUE4QztRQUN6RyxRQUFRLENBQUMsZ0JBQWdCLGlDQUF1QixZQUFZLENBQUMsQ0FBQyxDQUFDLDRDQUE0QztRQUMzRyxRQUFRLENBQUMsb0JBQW9CLDZCQUFxQixJQUFJLENBQUMsQ0FBQztRQUN4RCxRQUFRLENBQUMsZ0JBQWdCLDZCQUFxQixVQUFVLENBQUMsQ0FBQztRQUUxRCxnQkFBZ0I7UUFFaEIscUlBQXFJO1FBQ3JJLENBQUMsQ0FBQyxPQUFPLENBQUMsS0FBSyxDQUFDLFNBQVMsQ0FBQyxDQUFDO1FBRTNCLG1HQUFtRztRQUVuRyw0SEFBNEg7UUFDNUgsQ0FBQyxDQUFDLElBQUksQ0FBQyxnQkFBZ0IsK0JBQXFCLE1BQU0sQ0FBQyxDQUFDLENBQUMsOERBQThEO1FBQ25ILENBQUMsQ0FBQyxJQUFJLENBQUMsS0FBSyxFQUFFLENBQUMsQ0FBQyxxQkFBcUI7SUFDdkMsQ0FBQztJQUVELHdFQUF3RTtJQUN4RSxTQUFTLE1BQU07UUFDYixDQUFDLENBQUMsT0FBTyxDQUFDLEtBQUssQ0FBQyxRQUFRLEVBQUUsQ0FBQyxDQUFDLHNGQUFzRjtRQUNsSCxnQkFBZ0IsRUFBRSxDQUFDO1FBQ25CLFFBQVEsQ0FBQyxJQUFJLEVBQUUsQ0FBQyxDQUFDLDZDQUE2QztJQUNoRSxDQUFDO0lBRUQsd0dBQXdHO0lBQ3hHLFNBQVMsa0JBQWtCLENBQUMsS0FBYSxFQUFFLFNBQXFCLEVBQUUsS0FBYSxFQUFFLEtBQWEsRUFBRSxZQUE0QixFQUFFLFNBQTBCLENBQUMsQ0FBQyxhQUFhLENBQUMsT0FBTyxFQUFFLFdBQTRCLENBQUMsQ0FBQyxhQUFhLENBQUMsSUFBSTtRQUMvTiw4QkFBOEI7UUFDOUIsSUFBSSxJQUFJLEdBQVcsSUFBSSxDQUFDLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsbUJBQW1CO1FBQ3pELElBQUksT0FBTyxHQUFvQixJQUFJLENBQUMsQ0FBQyxhQUFhLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyw4QkFBOEI7UUFDekYsSUFBSSxXQUFXLEdBQXdCLElBQUksQ0FBQyxDQUFDLGlCQUFpQixDQUFDLFNBQVMsQ0FBQyxDQUFDLENBQUMsa0NBQWtDO1FBQzdHLElBQUksWUFBWSxHQUF5QixJQUFJLENBQUMsQ0FBQyxrQkFBa0IsRUFBRSxDQUFDLENBQUUseURBQXlEO1FBQy9ILElBQUksWUFBWSxHQUF5QixJQUFJLENBQUMsQ0FBQyxrQkFBa0IsQ0FBQyxLQUFLLEVBQUUsWUFBWSxFQUFFLFFBQVEsRUFBRSxNQUFNLENBQUMsQ0FBQyxDQUFDLGlEQUFpRDtRQUUzSixJQUFJLENBQUMsWUFBWSxDQUFDLE9BQU8sQ0FBQyxDQUFDO1FBQzNCLElBQUksQ0FBQyxZQUFZLENBQUMsV0FBVyxDQUFDLENBQUM7UUFDL0IsSUFBSSxDQUFDLFlBQVksQ0FBQyxZQUFZLENBQUMsQ0FBQztRQUNoQyxJQUFJLENBQUMsWUFBWSxDQUFDLFlBQVksQ0FBQyxDQUFDLENBQUMsa0RBQWtEO1FBQ25GLE9BQU8sSUFBSSxDQUFDO0lBQ2QsQ0FBQztJQUVELHFDQUFxQztJQUNyQyxTQUFTLHVCQUF1QixDQUFDLEtBQWEsRUFBRSxTQUFxQixFQUFFLEtBQWE7UUFDbEYsSUFBSSxJQUFJLEdBQVcsSUFBSSxDQUFDLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsbUJBQW1CO1FBQ3pELElBQUksT0FBTyxHQUFvQixJQUFJLENBQUMsQ0FBQyxhQUFhLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyw4QkFBOEI7UUFDekYsSUFBSSxXQUFXLEdBQXdCLElBQUksQ0FBQyxDQUFDLGlCQUFpQixDQUFDLFNBQVMsQ0FBQyxDQUFDLENBQUMsa0NBQWtDO1FBQzdHLElBQUksWUFBWSxHQUF5QixJQUFJLENBQUMsQ0FBQyxrQkFBa0IsRUFBRSxDQUFDLENBQUUseURBQXlEO1FBQy9ILElBQUksQ0FBQyxZQUFZLENBQUMsT0FBTyxDQUFDLENBQUM7UUFDM0IsSUFBSSxDQUFDLFlBQVksQ0FBQyxXQUFXLENBQUMsQ0FBQztRQUMvQixJQUFJLENBQUMsWUFBWSxDQUFDLFlBQVksQ0FBQyxDQUFDO1FBQ2hDLE9BQU8sSUFBSSxDQUFDO0lBQ2QsQ0FBQztJQUVELG9EQUFvRDtJQUNwRCxTQUFTLFlBQVksQ0FBQyxNQUFzQjtRQUMxQyxTQUFTLEVBQUUsQ0FBQztRQUNaLGFBQWEsR0FBRyxRQUFRLENBQUMsdUJBQXVCLENBQUMsSUFBSSxDQUFDLENBQUMsT0FBTyxDQUFDLE1BQU0sQ0FBQyxRQUFRLEVBQUUsTUFBTSxDQUFDLFFBQVEsQ0FBQyxDQUFDLENBQUM7SUFDcEcsQ0FBQztJQUVELHFEQUFxRDtJQUNyRCxTQUFTLFVBQVUsQ0FBQyxNQUFzQjtRQUN4QyxXQUFXLEdBQUcsUUFBUSxDQUFDLHVCQUF1QixDQUFDLElBQUksQ0FBQyxDQUFDLE9BQU8sQ0FBQyxNQUFNLENBQUMsUUFBUSxFQUFFLE1BQU0sQ0FBQyxRQUFRLENBQUMsQ0FBQyxDQUFDO1FBQ2hHLElBQUksVUFBVSxHQUFXLGFBQWEsQ0FBQyxDQUFDLEdBQUcsV0FBVyxDQUFDLENBQUMsQ0FBQztRQUN6RCxJQUFJLGlCQUFpQixHQUFXLGFBQWEsQ0FBQyxDQUFDLEdBQUcsV0FBVyxDQUFDLENBQUMsQ0FBQztRQUNoRSxJQUFJLGdCQUFnQixHQUFjLENBQUMsQ0FBQyxPQUFPLENBQUMsVUFBVSxDQUFDLGFBQWEsRUFBRSxXQUFXLENBQUMsQ0FBQztRQUNuRixJQUFJLEtBQUssR0FBVyxnQkFBZ0IsQ0FBQyxTQUFTLEdBQUcsV0FBVyxDQUFDO1FBQzdELFNBQVMsQ0FBQyxVQUFVLEVBQUUsaUJBQWlCLEVBQUUsS0FBSyxDQUFDLENBQUM7SUFDbEQsQ0FBQztJQUVELFNBQVMsU0FBUyxDQUFDLFdBQW1CLEVBQUUsa0JBQTBCLEVBQUUsTUFBYztRQUNoRixJQUFJLENBQUMsV0FBVyxHQUFHLENBQUMsQ0FBQyxZQUFZLENBQUMsT0FBTyxDQUFDLENBQUMsc0NBQXNDO1FBQ2pGLElBQUksQ0FBQyxVQUFVLENBQUMsSUFBSSxDQUFDLENBQUMsT0FBTyxDQUFDLENBQUMsV0FBVyxHQUFHLE1BQU0sR0FBRyxHQUFHLEVBQUUsTUFBTSxHQUFHLENBQUMsa0JBQWtCLEdBQUcsR0FBRyxFQUFFLGtCQUFrQixHQUFHLE1BQU0sQ0FBQyxDQUFDLENBQUMsQ0FBQyw0QkFBNEI7UUFDMUosSUFBSSxDQUFDLFdBQVcsQ0FBQyxJQUFJLENBQUMsQ0FBQyxPQUFPLENBQUMsQ0FBQyxNQUFNLEdBQUcsTUFBTSxFQUFFLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsMkVBQTJFO0lBQ3RJLENBQUM7SUFFRCxTQUFTLFNBQVM7UUFDaEIsQ0FBQyxDQUFDLEtBQUssQ0FBQyxHQUFHLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDO1FBQ3ZCLHVIQUF1SDtRQUN2SCxJQUFJLENBQUMsWUFBWSxFQUFFLENBQUMsUUFBUSxDQUFDLFdBQVcsR0FBRyxTQUFTLENBQUMsQ0FBQyw0REFBNEQ7UUFDbEgsSUFBSSxDQUFDLFlBQVksRUFBRSxDQUFDLFFBQVEsQ0FBQyxRQUFRLEdBQUcsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxJQUFJLEVBQUUsQ0FBQztRQUN6RCxJQUFJLENBQUMsV0FBVyxDQUFDLElBQUksQ0FBQyxDQUFDLE9BQU8sQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUM7UUFDekMsSUFBSSxDQUFDLGtCQUFrQixDQUFDLElBQUksQ0FBQyxDQUFDLE9BQU8sQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUM7UUFDaEQsSUFBSSxDQUFDLFdBQVcsR0FBRyxDQUFDLENBQUMsWUFBWSxDQUFDLFNBQVMsQ0FBQztJQUM5QyxDQUFDO0lBRUQsbUVBQW1FO0lBQ25FLFNBQVMsV0FBVyxDQUFDLFlBQW9CLEVBQUUsU0FBb0I7UUFDN0QsSUFBSSxjQUFjLEdBQWUsSUFBSSxDQUFDLENBQUMsUUFBUSxDQUFDLFFBQVEsRUFBRSxDQUFDLENBQUMsVUFBVSxFQUFFLElBQUksQ0FBQyxDQUFDLFdBQVcsQ0FBQyxJQUFJLENBQUMsQ0FBQyxLQUFLLENBQUMsR0FBRyxFQUFFLEdBQUcsRUFBRSxHQUFHLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO1FBQzFILElBQUksY0FBYyxHQUFjLFNBQVMsQ0FBQztRQUMxQyw0RUFBNEU7UUFDNUUsTUFBTSxDQUFDLFlBQVksQ0FBQyxHQUFHLGtCQUFrQixDQUFDLFlBQVksRUFBRSxjQUFjLEVBQUUsSUFBSSxDQUFDLENBQUMsUUFBUSxFQUFFLEVBQUUsQ0FBQyxFQUFFLENBQUMsQ0FBQyxZQUFZLENBQUMsTUFBTSxDQUFDLENBQUM7UUFDcEgsTUFBTSxDQUFDLFlBQVksQ0FBQyxDQUFDLFFBQVEsQ0FBQyxTQUFTLENBQUMsSUFBSSxDQUFDLENBQUMsT0FBTyxDQUFDLGNBQWMsQ0FBQyxDQUFDLEVBQUUsY0FBYyxDQUFDLENBQUMsRUFBRSxjQUFjLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztRQUM3RyxNQUFNLENBQUMsWUFBWSxDQUFDLENBQUMsUUFBUSxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUMsQ0FBQyxPQUFPLENBQUMsR0FBRyxFQUFFLElBQUksRUFBRSxJQUFJLENBQUMsQ0FBQyxDQUFDO1FBQ3BFLFNBQVMsQ0FBQyxXQUFXLENBQUMsTUFBTSxDQUFDLFlBQVksQ0FBQyxDQUFDLENBQUM7UUFDNUMsTUFBTSxDQUFDLFlBQVksR0FBRyxDQUFDLENBQUMsR0FBRyxrQkFBa0IsQ0FBQyxZQUFZLEVBQUUsY0FBYyxFQUFFLElBQUksQ0FBQyxDQUFDLFFBQVEsRUFBRSxFQUFFLENBQUMsRUFBRSxDQUFDLENBQUMsWUFBWSxDQUFDLE1BQU0sQ0FBQyxDQUFDO1FBQ3hILE1BQU0sQ0FBQyxZQUFZLEdBQUcsQ0FBQyxDQUFDLENBQUMsUUFBUSxDQUFDLFNBQVMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxPQUFPLENBQUMsY0FBYyxDQUFDLENBQUMsR0FBRyxHQUFHLEVBQUUsY0FBYyxDQUFDLENBQUMsRUFBRSxjQUFjLENBQUMsQ0FBQyxHQUFHLEdBQUcsQ0FBQyxDQUFDLENBQUM7UUFDN0gsTUFBTSxDQUFDLFlBQVksR0FBRyxDQUFDLENBQUMsQ0FBQyxRQUFRLENBQUMsS0FBSyxDQUFDLElBQUksQ0FBQyxDQUFDLE9BQU8sQ0FBQyxJQUFJLEVBQUUsSUFBSSxFQUFFLEdBQUcsQ0FBQyxDQUFDLENBQUM7UUFDeEUsU0FBUyxDQUFDLFdBQVcsQ0FBQyxNQUFNLENBQUMsWUFBWSxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUM7UUFDaEQsTUFBTSxDQUFDLFlBQVksR0FBRyxDQUFDLENBQUMsR0FBRyxrQkFBa0IsQ0FBQyxZQUFZLEVBQUUsY0FBYyxFQUFFLElBQUksQ0FBQyxDQUFDLFFBQVEsRUFBRSxFQUFFLENBQUMsRUFBRSxDQUFDLENBQUMsWUFBWSxDQUFDLE1BQU0sQ0FBQyxDQUFDO1FBQ3hILE1BQU0sQ0FBQyxZQUFZLEdBQUcsQ0FBQyxDQUFDLENBQUMsUUFBUSxDQUFDLFNBQVMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxPQUFPLENBQUMsY0FBYyxDQUFDLENBQUMsR0FBRyxHQUFHLEVBQUUsY0FBYyxDQUFDLENBQUMsRUFBRSxjQUFjLENBQUMsQ0FBQyxHQUFHLEdBQUcsQ0FBQyxDQUFDLENBQUM7UUFDN0gsTUFBTSxDQUFDLFlBQVksR0FBRyxDQUFDLENBQUMsQ0FBQyxRQUFRLENBQUMsS0FBSyxDQUFDLElBQUksQ0FBQyxDQUFDLE9BQU8sQ0FBQyxJQUFJLEVBQUUsSUFBSSxFQUFFLEdBQUcsQ0FBQyxDQUFDLENBQUM7UUFDeEUsU0FBUyxDQUFDLFdBQVcsQ0FBQyxNQUFNLENBQUMsWUFBWSxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUM7UUFDaEQsTUFBTSxDQUFDLFlBQVksR0FBRyxDQUFDLENBQUMsR0FBRyxrQkFBa0IsQ0FBQyxhQUFhLEVBQUUsY0FBYyxFQUFFLElBQUksQ0FBQyxDQUFDLFFBQVEsRUFBRSxFQUFFLENBQUMsRUFBRSxDQUFDLENBQUMsWUFBWSxDQUFDLE1BQU0sQ0FBQyxDQUFDO1FBQ3pILE1BQU0sQ0FBQyxZQUFZLEdBQUcsQ0FBQyxDQUFDLENBQUMsUUFBUSxDQUFDLFNBQVMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxPQUFPLENBQUMsY0FBYyxDQUFDLENBQUMsRUFBRSxjQUFjLENBQUMsQ0FBQyxFQUFFLGNBQWMsQ0FBQyxDQUFDLEdBQUcsR0FBRyxDQUFDLENBQUMsQ0FBQztRQUN2SCxNQUFNLENBQUMsWUFBWSxHQUFHLENBQUMsQ0FBQyxDQUFDLFFBQVEsQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDLENBQUMsT0FBTyxDQUFDLEdBQUcsRUFBRSxJQUFJLEVBQUUsSUFBSSxDQUFDLENBQUMsQ0FBQztRQUN4RSxTQUFTLENBQUMsV0FBVyxDQUFDLE1BQU0sQ0FBQyxZQUFZLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQztRQUNoRCxNQUFNLENBQUMsWUFBWSxHQUFHLENBQUMsQ0FBQyxHQUFHLGtCQUFrQixDQUFDLGNBQWMsRUFBRSxjQUFjLEVBQUUsSUFBSSxDQUFDLENBQUMsUUFBUSxFQUFFLEVBQUUsQ0FBQyxFQUFFLENBQUMsQ0FBQyxZQUFZLENBQUMsTUFBTSxDQUFDLENBQUM7UUFDMUgsTUFBTSxDQUFDLFlBQVksR0FBRyxDQUFDLENBQUMsQ0FBQyxRQUFRLENBQUMsU0FBUyxDQUFDLElBQUksQ0FBQyxDQUFDLE9BQU8sQ0FBQyxjQUFjLENBQUMsQ0FBQyxFQUFFLGNBQWMsQ0FBQyxDQUFDLEdBQUcsSUFBSSxFQUFFLGNBQWMsQ0FBQyxDQUFDLEdBQUcsS0FBSyxDQUFDLENBQUMsQ0FBQztRQUNoSSxNQUFNLENBQUMsWUFBWSxHQUFHLENBQUMsQ0FBQyxDQUFDLFFBQVEsQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDLENBQUMsT0FBTyxDQUFDLElBQUksRUFBRSxJQUFJLEVBQUUsR0FBRyxDQUFDLENBQUMsQ0FBQztRQUN4RSxTQUFTLENBQUMsV0FBVyxDQUFDLE1BQU0sQ0FBQyxZQUFZLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQztRQUNoRCxNQUFNLENBQUMsWUFBWSxHQUFHLENBQUMsQ0FBQyxHQUFHLGtCQUFrQixDQUFDLFlBQVksRUFBRSxZQUFZLEVBQUUsSUFBSSxDQUFDLENBQUMsUUFBUSxFQUFFLEVBQUUsQ0FBQyxFQUFFLENBQUMsQ0FBQyxZQUFZLENBQUMsTUFBTSxDQUFDLENBQUM7UUFDdEgsTUFBTSxDQUFDLFlBQVksR0FBRyxDQUFDLENBQUMsQ0FBQyxRQUFRLENBQUMsU0FBUyxDQUFDLElBQUks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QUFFLENBQUMsSUFBSSxJQUFJLFlBQVksRUFBRTtZQUMzRCxNQUFNLElBQUksRUFBRSxDQUFDO1lBQ2IsV0FBVyxDQUFDLFdBQVcsR0FBRyxVQUFVLEdBQUcsTUFBTSxDQUFDLFFBQVEsRUFBRSxHQUFHLFlBQVksR0FBRyxTQUFTLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQyxDQUFDO1NBQ2hHO0lBQ0gsQ0FBQztJQUNELFlBQVk7QUFFZCxDQUFDLEVBbFVTLDhCQUE4QixLQUE5Qiw4QkFBOEIsUUFrVXZDIiwic291cmNlc0NvbnRlbnQiOlsiLy8vPHJlZmVyZW5jZSB0eXBlcz1cIi4uLy4uLy4uLy4uL0NvcmUvQnVpbGQvRnVkZ2VDb3JlLmpzXCIvPlxyXG5pbXBvcnQgZiA9IEZ1ZGdlQ29yZTtcclxuLy9SZWZlcmVuY2UgRnVkZ2UsIGdldHRpbmcgY29kZSBjb21wbGV0aW9uIHJlYWR5IGFuZCBjcmVhdGluZyBhIHNob3J0Y3V0IGYgdG8gd3JpdGUgRnVkZ2VDb2RlIG1vcmUgY29tZm9ydGFibHlcclxuXHJcbm5hbWVzcGFjZSBUdXJvcmlhbHNfRlVER0VQaHlzaWNzX0xlc3NvbjEge1xyXG5cclxuICAvL0dPQUw6IExlYXJuaW5nIHRvIHVzZSB0aGUgcGh5c2ljYWwgcmF5Y2FzdCB0byBpbnRlcmFjdCB3aXRoIG9iamVjdHMuIERpZmZlcmVudCBtZXRob2QgdGhhbiB0aGUgc3RhbmRhcmQgRnVkZ2UgRGVwdGggVGV4dHVyZSBSYXljYXN0XHJcblxyXG4gIC8vRnVkZ2UgQmFzaWMgVmFyaWFibGVzXHJcbiAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJsb2FkXCIsIGluaXQpO1xyXG4gIGNvbnN0IGFwcDogSFRNTENhbnZhc0VsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiY2FudmFzXCIpOyAvLyBUaGUgaHRtbCBlbGVtZW50IHdoZXJlIHRoZSBzY2VuZSBpcyBkcmF3biB0b1xyXG4gIGxldCBnb2FsQ291bnRlcjogSFRNTEVsZW1lbnQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInBvaW50c0NvdW50ZXJcIik7XHJcbiAgbGV0IHZpZXdQb3J0OiBmLlZpZXdwb3J0OyAvLyBUaGUgc2NlbmUgdmlzdWFsaXphdGlvblxyXG4gIGxldCBoaWVyYXJjaHk6IGYuTm9kZTsgLy8gWW91J3JlIG9iamVjdCBzY2VuZSB0cmVlXHJcbiAgbGV0IGNtcENhbWVyYTogZi5Db21wb25lbnRDYW1lcmE7IC8vVGhlIGNhbWVyYSBpbiB0aGUgc2NlbmUgdG8gc2hvdCB0aGUgcmF5IGZyb21cclxuXHJcblxyXG4gIC8vUGh5c2ljYWwgT2JqZWN0c1xyXG4gIGxldCBib2RpZXM6IGYuTm9kZVtdID0gbmV3IEFycmF5KCk7IC8vIEFycmF5IG9mIGFsbCBwaHlzaWNhbCBvYmplY3RzIGluIHRoZSBzY2VuZSB0byBoYXZlIGEgcXVpY2sgcmVmZXJlbmNlXHJcbiAgbGV0IGJhbGw6IGYuQ29tcG9uZW50UmlnaWRib2R5ID0gbnVsbDsgLy9UaGUgQmFsbCB3ZSBhcmUgcGxheWluZyB3aXRoXHJcblxyXG5cclxuICAvL1NldHRpbmcgVmFyaWFibGVzXHJcblxyXG5cclxuICAvL01pc2NlbGxhbmVvdXMgVmFyaWFibGVzXHJcbiAgbGV0IGJhbGxTdGFydDogZi5WZWN0b3IzID0gbmV3IGYuVmVjdG9yMygwLCAxLjUsIDMpO1xyXG4gIGxldCBzdGFydFBvc2l0aW9uOiBmLlZlY3RvcjI7XHJcbiAgbGV0IGVuZFBvc2l0aW9uOiBmLlZlY3RvcjI7XHJcbiAgbGV0IHBsYXllckZvcmNlOiBudW1iZXIgPSA1MDAwO1xyXG4gIGxldCBwb2ludHM6IG51bWJlciA9IDA7XHJcbiAgbGV0IGxhc3RTcGVlZDogbnVtYmVyID0gMDtcclxuXHJcbiAgLy9NYXRlcmlhbHNcclxuICBsZXQgYm9hcmREZWZhdWx0OiBmLk1hdGVyaWFsID0gbmV3IGYuTWF0ZXJpYWwoXCJCb2FyZFwiLCBmLlNoYWRlckZsYXQsIG5ldyBmLkNvYXRDb2xvcmVkKG5ldyBmLkNvbG9yKDAuODUsIDAuOTUsIDAuODUsIDEpKSk7XHJcbiAgbGV0IGJvYXJkR29hbDogZi5NYXRlcmlhbCA9IG5ldyBmLk1hdGVyaWFsKFwiQm9hcmRHb2FsXCIsIGYuU2hhZGVyRmxhdCwgbmV3IGYuQ29hdENvbG9yZWQobmV3IGYuQ29sb3IoMC4yLCAwLjk1LCAwLjIsIDEpKSk7XHJcbiAgbGV0IGdyb3VuZE1hdGVyaWFsOiBmLk1hdGVyaWFsID0gbmV3IGYuTWF0ZXJpYWwoXCJHcm91bmRcIiwgZi5TaGFkZXJGbGF0LCBuZXcgZi5Db2F0Q29sb3JlZChuZXcgZi5Db2xvcigwLjIsIDAuMiwgMC4yLCAxKSkpO1xyXG5cclxuICAvL0Z1bmN0aW9uIHRvIGluaXRpYWxpemUgdGhlIEZ1ZGdlIFNjZW5lIHdpdGggYSBjYW1lcmEsIGxpZ2h0LCB2aWV3cG9ydCBhbmQgUEhZU0NJQUwgT2JqZWN0c1xyXG4gIGZ1bmN0aW9uIGluaXQoX2V2ZW50OiBFdmVudCk6IHZvaWQge1xyXG5cclxuICAgIGhpZXJhcmNoeSA9IG5ldyBmLk5vZGUoXCJTY2VuZVwiKTsgLy9jcmVhdGUgdGhlIHJvb3QgTm9kZSB3aGVyZSBldmVyeSBvYmplY3QgaXMgcGFyZW50ZWQgdG8uIFNob3VsZCBuZXZlciBiZSBjaGFuZ2VkXHJcblxyXG4gICAgLy8jcmVnaW9uIFBoeXNpY3NcclxuICAgIC8vUEhZU0lDUyAtIEJhc2ljIFBsYW5lIGFuZCBDdWJlXHJcbiAgICAvL0NyZWF0aW5nIGEgcGh5c2ljYWxseSBzdGF0aWMgZ3JvdW5kIHBsYW5lIGZvciBvdXIgcGh5c2ljcyBwbGF5Z3JvdW5kLiBBIHNpbXBsZSBzY2FsZWQgY3ViZSBidXQgd2l0aCBwaHlzaWNzIHR5cGUgc2V0IHRvIHN0YXRpY1xyXG4gICAgYm9kaWVzWzBdID0gY3JlYXRlQ29tcGxldGVOb2RlKFwiR3JvdW5kXCIsIGdyb3VuZE1hdGVyaWFsLCBuZXcgZi5NZXNoQ3ViZSgpLCAwLCBmLlBIWVNJQ1NfVFlQRS5TVEFUSUMpO1xyXG4gICAgYm9kaWVzWzBdLm10eExvY2FsLnNjYWxlKG5ldyBmLlZlY3RvcjMoMTQsIDAuMywgMTQpKTsgLy9TY2FsZSB0aGUgYm9keSB3aXRoIGl0J3Mgc3RhbmRhcmQgQ29tcG9uZW50VHJhbnNmb3JtXHJcbiAgICBib2RpZXNbMF0uZ2V0Q29tcG9uZW50KGYuQ29tcG9uZW50UmlnaWRib2R5KS5yZXN0aXR1dGlvbiA9IDAuNTtcclxuICAgIGhpZXJhcmNoeS5hcHBlbmRDaGlsZChib2RpZXNbMF0pOyAvL0FkZCB0aGUgbm9kZSB0byB0aGUgc2NlbmUgYnkgYWRkaW5nIGl0IHRvIHRoZSBzY2VuZS1yb290XHJcblxyXG4gICAgLy9CYWNrd2FsbHMgLSBTbyBjdWJlcyBhcmUgbm90IHB1c2hlZCBhd2F5IGVhc2lseVxyXG4gICAgYm9kaWVzWzFdID0gY3JlYXRlQ29tcGxldGVOb2RlKFwiV2FsbEJhY2tcIiwgZ3JvdW5kTWF0ZXJpYWwsIG5ldyBmLk1lc2hDdWJlKCksIDAsIGYuUEhZU0lDU19UWVBFLlNUQVRJQyk7XHJcbiAgICBib2RpZXNbMV0ubXR4TG9jYWwudHJhbnNsYXRlKG5ldyBmLlZlY3RvcjMoMCwgLTcsIC03LjUpKTtcclxuICAgIGJvZGllc1sxXS5tdHhMb2NhbC5zY2FsZShuZXcgZi5WZWN0b3IzKDE0LCAwLjMsIDE1KSk7XHJcbiAgICBib2RpZXNbMV0ubXR4TG9jYWwucm90YXRlWCg5MCwgdHJ1ZSk7XHJcbiAgICBoaWVyYXJjaHkuYXBwZW5kQ2hpbGQoYm9kaWVzWzFdKTtcclxuXHJcbiAgICBib2RpZXNbMl0gPSBjcmVhdGVDb21wbGV0ZU5vZGUoXCJXYWxsTGVmdFwiLCBncm91bmRNYXRlcmlhbCwgbmV3IGYuTWVzaEN1YmUoKSwgMCwgZi5QSFlTSUNTX1RZUEUuU1RBVElDKTtcclxuICAgIGJvZGllc1syXS5tdHhMb2NhbC50cmFuc2xhdGUobmV3IGYuVmVjdG9yMyg3LjUsIDcsIDApKTtcclxuICAgIGJvZGllc1syXS5tdHhMb2NhbC5zY2FsZShuZXcgZi5WZWN0b3IzKDE1LCAwLjMsIDE0KSk7XHJcbiAgICBib2RpZXNbMl0ubXR4TG9jYWwucm90YXRlWig5MCwgdHJ1ZSk7XHJcbiAgICBoaWVyYXJjaHkuYXBwZW5kQ2hpbGQoYm9kaWVzWzJdKTtcclxuXHJcbiAgICBib2RpZXNbM10gPSBjcmVhdGVDb21wbGV0ZU5vZGUoXCJXYWxsUmlnaHRcIiwgZ3JvdW5kTWF0ZXJpYWwsIG5ldyBmLk1lc2hDdWJlKCksIDAsIGYuUEhZU0lDU19UWVBFLlNUQVRJQyk7XHJcbiAgICBib2RpZXNbM10ubXR4TG9jYWwudHJhbnNsYXRlKG5ldyBmLlZlY3RvcjMoLTcuNSwgNywgMCkpO1xyXG4gICAgYm9kaWVzWzNdLm10eExvY2FsLnNjYWxlKG5ldyBmLlZlY3RvcjMoMTUsIDAuMywgMTQpKTtcclxuICAgIGJvZGllc1szXS5tdHhMb2NhbC5yb3RhdGVaKC05MCwgdHJ1ZSk7XHJcbiAgICBoaWVyYXJjaHkuYXBwZW5kQ2hpbGQoYm9kaWVzWzNdKTtcclxuXHJcbiAgICAvL0JhbGxcclxuICAgIGJvZGllc1s0XSA9IGNyZWF0ZUNvbXBsZXRlTm9kZShcIkJhc2tldGJhbGxcIiwgbmV3IGYuTWF0ZXJpYWwoXCJCYXNrZXRiYWxsXCIsIGYuU2hhZGVyRmxhdCwgbmV3IGYuQ29hdENvbG9yZWQobmV3IGYuQ29sb3IoMTgxIC8gMjU1LCA2NiAvIDI1NSwgMTkgLyAyNTUpKSksIG5ldyBmLk1lc2hTcGhlcmUoKSwgMC42NSwgZi5QSFlTSUNTX1RZUEUuS0lORU1BVElDLCBmLlBIWVNJQ1NfR1JPVVAuREVGQVVMVCwgZi5DT0xMSURFUl9UWVBFLlNQSEVSRSk7XHJcbiAgICBib2RpZXNbNF0ubXR4TG9jYWwudHJhbnNsYXRlKGJhbGxTdGFydCk7XHJcbiAgICBib2RpZXNbNF0ubXR4TG9jYWwuc2NhbGUobmV3IGYuVmVjdG9yMygwLjI2LCAwLjI2LCAwLjI2KSk7IC8vMjZjbSBkaWFtZXRlciBiYXNrZXRiYWxsXHJcbiAgICBoaWVyYXJjaHkuYXBwZW5kQ2hpbGQoYm9kaWVzWzRdKTtcclxuICAgIGJhbGwgPSBib2RpZXNbNF0uZ2V0Q29tcG9uZW50KGYuQ29tcG9uZW50UmlnaWRib2R5KTtcclxuICAgIGJhbGwucmVzdGl0dXRpb24gPSAwLjk1O1xyXG5cclxuICAgIGNyZWF0ZUNvdXJ0KDUsIG5ldyBmLlZlY3RvcjMoMCwgMy4wNSwgLTYpKTtcclxuXHJcbiAgICBjcmVhdGVTaG9vdGFibGVEZWNvcmF0aW9uKDEyLCBuZXcgZi5WZWN0b3IzKDMsIDAuNSwgLTMpKTtcclxuICAgIGNyZWF0ZVNob290YWJsZURlY29yYXRpb24oMTQsIG5ldyBmLlZlY3RvcjMoLTMsIDAuNSwgLTIpKTtcclxuICAgIGNyZWF0ZVNob290YWJsZURlY29yYXRpb24oMTYsIG5ldyBmLlZlY3RvcjMoLTIsIDQsIC00KSwgLTEpO1xyXG5cclxuICAgIC8vQWRkIEV2ZW50cyB0byBvdXIgdHJpZ2dlciBhbmQgY29sbGlkZXJzXHJcbiAgICBib2RpZXNbMTFdLmdldENvbXBvbmVudChmLkNvbXBvbmVudFJpZ2lkYm9keSkuYWRkRXZlbnRMaXN0ZW5lcihmLkVWRU5UX1BIWVNJQ1MuVFJJR0dFUl9FTlRFUiwgZ29hbENoZWNrRW50ZXIpO1xyXG4gICAgYm9kaWVzWzExXS5nZXRDb21wb25lbnQoZi5Db21wb25lbnRSaWdpZGJvZHkpLmFkZEV2ZW50TGlzdGVuZXIoZi5FVkVOVF9QSFlTSUNTLlRSSUdHRVJfRVhJVCwgZ29hbENoZWNrRXhpdCk7XHJcblxyXG4gICAgYm9kaWVzWzBdLmdldENvbXBvbmVudChmLkNvbXBvbmVudFJpZ2lkYm9keSkuYWRkRXZlbnRMaXN0ZW5lcihmLkVWRU5UX1BIWVNJQ1MuQ09MTElTSU9OX0VOVEVSLCBncm91bmRDb2xFbnRlcik7XHJcbiAgICBib2RpZXNbMTNdLmdldENvbXBvbmVudChmLkNvbXBvbmVudFJpZ2lkYm9keSkuYWRkRXZlbnRMaXN0ZW5lcihmLkVWRU5UX1BIWVNJQ1MuQ09MTElTSU9OX0VOVEVSLCB0YXJnZXRDb2xFbnRlcik7XHJcbiAgICBib2RpZXNbMTVdLmdldENvbXBvbmVudChmLkNvbXBvbmVudFJpZ2lkYm9keSkuYWRkRXZlbnRMaXN0ZW5lcihmLkVWRU5UX1BIWVNJQ1MuQ09MTElTSU9OX0VOVEVSLCB0YXJnZXRDb2xFbnRlcik7XHJcbiAgICBib2RpZXNbMTddLmdldENvbXBvbmVudChmLkNvbXBvbmVudFJpZ2lkYm9keSkuYWRkRXZlbnRMaXN0ZW5lcihmLkVWRU5UX1BIWVNJQ1MuQ09MTElTSU9OX0VOVEVSLCB0YXJnZXRDb2xFbnRlcik7XHJcbiAgICAvLyNlbmRyZWdpb25cclxuXHJcbiAgICBmLlBoeXNpY3Mud29ybGQuc2V0U29sdmVySXRlcmF0aW9ucygxNSk7XHJcblxyXG4gICAgLy9TdGFuZGFyZCBGdWRnZSBTY2VuZSBJbml0aWFsaXphdGlvbiAtIENyZWF0aW5nIGEgZGlyZWN0aW9uYWwgbGlnaHQsIGEgY2FtZXJhIGFuZCBpbml0aWFsaXplIHRoZSB2aWV3cG9ydFxyXG4gICAgbGV0IGNtcExpZ2h0OiBmLkNvbXBvbmVudExpZ2h0ID0gbmV3IGYuQ29tcG9uZW50TGlnaHQobmV3IGYuTGlnaHREaXJlY3Rpb25hbChmLkNvbG9yLkNTUyhcIldISVRFXCIpKSk7XHJcbiAgICBjbXBMaWdodC5waXZvdC5sb29rQXQobmV3IGYuVmVjdG9yMygtMC41LCAtMSwgLTAuOCkpOyAvL1NldCBsaWdodCBkaXJlY3Rpb25cclxuICAgIGhpZXJhcmNoeS5hZGRDb21wb25lbnQoY21wTGlnaHQpO1xyXG5cclxuICAgIGNtcENhbWVyYSA9IG5ldyBmLkNvbXBvbmVudENhbWVyYSgpO1xyXG4gICAgY21wQ2FtZXJhLmJhY2tncm91bmRDb2xvciA9IGYuQ29sb3IuQ1NTKFwiR1JFWVwiKTtcclxuICAgIGNtcENhbWVyYS5waXZvdC50cmFuc2xhdGUobmV3IGYuVmVjdG9yMygwLCAxLjUsIDYpKTsgLy9DZW50ZXJlZCBDYW1lcmEgYSBsaXR0bGUgYml0IGJhY2t3YXJkc1xyXG4gICAgY21wQ2FtZXJhLnBpdm90Lmxvb2tBdChuZXcgZi5WZWN0b3IzKDAsIDIsIDApKTsgLy9TZXQgdGhlIGNhbWVyYSBtYXRyaXggc28gdGhhdCBpdCBsb29rcyBhdCB0aGUgYmFza2V0XHJcblxyXG4gICAgdmlld1BvcnQgPSBuZXcgZi5WaWV3cG9ydCgpOyAvL0NyZWF0aW5nIGEgdmlld3BvcnQgdGhhdCBpcyByZW5kZXJlZCBvbnRvIHRoZSBodG1sIGNhbnZhcyBlbGVtZW50XHJcbiAgICB2aWV3UG9ydC5pbml0aWFsaXplKFwiVmlld3BvcnRcIiwgaGllcmFyY2h5LCBjbXBDYW1lcmEsIGFwcCk7IC8vaW5pdGlhbGl6ZSB0aGUgdmlld3BvcnQgd2l0aCB0aGUgcm9vdCBub2RlLCBjYW1lcmEgYW5kIGNhbnZhc1xyXG5cclxuICAgIC8vQWN0aXZhdGluZyBpbnB1dCBldmVudHMgLSBJbXBvcnRhbnQgZm9yIHRoaXMgbGVzc29uXHJcbiAgICB2aWV3UG9ydC5hY3RpdmF0ZVBvaW50ZXJFdmVudChmLkVWRU5UX1BPSU5URVIuRE9XTiwgdHJ1ZSk7IC8vVGVsbCBGdWRnZSB0byB1c2UgaXQncyBpbnRlcm5hbCBtb3VzZSBldmVudCBcclxuICAgIHZpZXdQb3J0LmFkZEV2ZW50TGlzdGVuZXIoZi5FVkVOVF9QT0lOVEVSLkRPV04sIGhuZE1vdXNlRG93bik7IC8vU2V0IHdoYXQgZnVuY3Rpb24gc2hvdWxkIHJlY2VpdmUgdGhlIGV2ZW50XHJcbiAgICB2aWV3UG9ydC5hY3RpdmF0ZVBvaW50ZXJFdmVudChmLkVWRU5UX1BPSU5URVIuVVAsIHRydWUpO1xyXG4gICAgdmlld1BvcnQuYWRkRXZlbnRMaXN0ZW5lcihmLkVWRU5UX1BPSU5URVIuVVAsIGhuZE1vdXNlVXApO1xyXG5cclxuICAgIC8vUGh5c2ljcyBFdmVudHNcclxuXHJcbiAgICAvL1BIWVNJQ1MgLSBTdGFydCB1c2luZyBwaHlzaWNzIGJ5IHRlbGxpbmcgdGhlIHBoeXNpY3MgdGhlIHNjZW5lIHJvb3Qgb2JqZWN0LiBQaHlzaWNzIHdpbGwgcmVjYWxjdWxhdGUgZXZlcnkgdHJhbnNmb3JtIGFuZCBpbml0aWFsaXplXHJcbiAgICBmLlBoeXNpY3Muc3RhcnQoaGllcmFyY2h5KTtcclxuXHJcbiAgICAvL2YuUGh5c2ljcy5zZXR0aW5ncy5kZWJ1Z0RyYXcgPSB0cnVlOyAvL1NlZWluZyB0aGUgcGh5c2ljYWwgc2NlbmUgaW4gZGVidWcgbW9kZSAtIExlc3NvbiBEZWJ1Z2dpbmdcclxuXHJcbiAgICAvL0ltcG9ydGFudCBzdGFydCB0aGUgZ2FtZSBsb29wIGFmdGVyIHN0YXJ0aW5nIHBoeXNpY3MsIHNvIHBoeXNpY3MgY2FuIHVzZSB0aGUgY3VycmVudCB0cmFuc2Zvcm0gYmVmb3JlIGl0J3MgZmlyc3QgaXRlcmF0aW9uXHJcbiAgICBmLkxvb3AuYWRkRXZlbnRMaXN0ZW5lcihmLkVWRU5ULkxPT1BfRlJBTUUsIHVwZGF0ZSk7IC8vVGVsbCB0aGUgZ2FtZSBsb29wIHRvIGNhbGwgdGhlIHVwZGF0ZSBmdW5jdGlvbiBvbiBlYWNoIGZyYW1lXHJcbiAgICBmLkxvb3Auc3RhcnQoKTsgLy9TdGFyZCB0aGUgZ2FtZSBsb29wXHJcbiAgfVxyXG5cclxuICAvL0Z1bmN0aW9uIHRvIGFuaW1hdGUvdXBkYXRlIHRoZSBGdWRnZSBzY2VuZSwgY29tbW9ubHkga25vd24gYXMgZ2FtZWxvb3BcclxuICBmdW5jdGlvbiB1cGRhdGUoKTogdm9pZCB7XHJcbiAgICBmLlBoeXNpY3Mud29ybGQuc2ltdWxhdGUoKTsgLy9QSFlTSUNTIC0gU2ltdWxhdGUgcGh5c2ljYWwgY2hhbmdlcyBlYWNoIGZyYW1lLCBwYXJhbWV0ZXIgdG8gc2V0IHRpbWUgYmV0d2VlbiBmcmFtZXNcclxuICAgIHJheWNhc3RTcGVlZFRlc3QoKTtcclxuICAgIHZpZXdQb3J0LmRyYXcoKTsgLy8gRHJhdyB0aGUgY3VycmVudCBGdWRnZSBTY2VuZSB0byB0aGUgY2FudmFzXHJcbiAgfVxyXG5cclxuICAvLyBGdW5jdGlvbiB0byBxdWlja2x5IGNyZWF0ZSBhIG5vZGUgd2l0aCBtdWx0aXBsZSBuZWVkZWQgRnVkZ2VDb21wb25lbnRzLCBpbmNsdWRpbmcgYSBwaHlzaWNzIGNvbXBvbmVudFxyXG4gIGZ1bmN0aW9uIGNyZWF0ZUNvbXBsZXRlTm9kZShfbmFtZTogc3RyaW5nLCBfbWF0ZXJpYWw6IGYuTWF0ZXJpYWwsIF9tZXNoOiBmLk1lc2gsIF9tYXNzOiBudW1iZXIsIF9waHlzaWNzVHlwZTogZi5QSFlTSUNTX1RZUEUsIF9ncm91cDogZi5QSFlTSUNTX0dST1VQID0gZi5QSFlTSUNTX0dST1VQLkRFRkFVTFQsIF9jb2xUeXBlOiBmLkNPTExJREVSX1RZUEUgPSBmLkNPTExJREVSX1RZUEUuQ1VCRSk6IGYuTm9kZSB7XHJcbiAgICAvL1N0YW5kYXJkIEZ1ZGdlIE5vZGUgQ3JlYXRpb25cclxuICAgIGxldCBub2RlOiBmLk5vZGUgPSBuZXcgZi5Ob2RlKF9uYW1lKTsgLy9DcmVhdGluZyB0aGUgbm9kZVxyXG4gICAgbGV0IGNtcE1lc2g6IGYuQ29tcG9uZW50TWVzaCA9IG5ldyBmLkNvbXBvbmVudE1lc2goX21lc2gpOyAvL0NyZWF0aW5nIGEgbWVzaCBmb3IgdGhlIG5vZGVcclxuICAgIGxldCBjbXBNYXRlcmlhbDogZi5Db21wb25lbnRNYXRlcmlhbCA9IG5ldyBmLkNvbXBvbmVudE1hdGVyaWFsKF9tYXRlcmlhbCk7IC8vQ3JlYXRpbmcgYSBtYXRlcmlhbCBmb3IgdGhlIG5vZGVcclxuICAgIGxldCBjbXBUcmFuc2Zvcm06IGYuQ29tcG9uZW50VHJhbnNmb3JtID0gbmV3IGYuQ29tcG9uZW50VHJhbnNmb3JtKCk7ICAvL1RyYW5zZm9ybSBob2xkaW5nIHBvc2l0aW9uL3JvdGF0aW9uL3NjYWxpbmcgb2YgdGhlIG5vZGVcclxuICAgIGxldCBjbXBSaWdpZGJvZHk6IGYuQ29tcG9uZW50UmlnaWRib2R5ID0gbmV3IGYuQ29tcG9uZW50UmlnaWRib2R5KF9tYXNzLCBfcGh5c2ljc1R5cGUsIF9jb2xUeXBlLCBfZ3JvdXApOyAvL0FkZGluZyBhIHBoeXNpY2FsIGJvZHkgY29tcG9uZW50IHRvIHVzZSBwaHlzaWNzXHJcblxyXG4gICAgbm9kZS5hZGRDb21wb25lbnQoY21wTWVzaCk7XHJcbiAgICBub2RlLmFkZENvbXBvbmVudChjbXBNYXRlcmlhbCk7XHJcbiAgICBub2RlLmFkZENvbXBvbmVudChjbXBUcmFuc2Zvcm0pO1xyXG4gICAgbm9kZS5hZGRDb21wb25lbnQoY21wUmlnaWRib2R5KTsgLy8gPC0tIGJlc3QgcHJhY3RpY2UgdG8gYWRkIHBoeXNpY3MgY29tcG9uZW50IGxhc3RcclxuICAgIHJldHVybiBub2RlO1xyXG4gIH1cclxuXHJcbiAgLy9DcmVhdGluZyBhIG5vZGUgd2l0aG91dCBhbnkgcGh5c2ljc1xyXG4gIGZ1bmN0aW9uIGNyZWF0ZVN0YW5kYXJkRnVkZ2VOb2RlKF9uYW1lOiBzdHJpbmcsIF9tYXRlcmlhbDogZi5NYXRlcmlhbCwgX21lc2g6IGYuTWVzaCk6IGYuTm9kZSB7XHJcbiAgICBsZXQgbm9kZTogZi5Ob2RlID0gbmV3IGYuTm9kZShfbmFtZSk7IC8vQ3JlYXRpbmcgdGhlIG5vZGVcclxuICAgIGxldCBjbXBNZXNoOiBmLkNvbXBvbmVudE1lc2ggPSBuZXcgZi5Db21wb25lbnRNZXNoKF9tZXNoKTsgLy9DcmVhdGluZyBhIG1lc2ggZm9yIHRoZSBub2RlXHJcbiAgICBsZXQgY21wTWF0ZXJpYWw6IGYuQ29tcG9uZW50TWF0ZXJpYWwgPSBuZXcgZi5Db21wb25lbnRNYXRlcmlhbChfbWF0ZXJpYWwpOyAvL0NyZWF0aW5nIGEgbWF0ZXJpYWwgZm9yIHRoZSBub2RlXHJcbiAgICBsZXQgY21wVHJhbnNmb3JtOiBmLkNvbXBvbmVudFRyYW5zZm9ybSA9IG5ldyBmLkNvbXBvbmVudFRyYW5zZm9ybSgpOyAgLy9UcmFuc2Zvcm0gaG9sZGluZyBwb3NpdGlvbi9yb3RhdGlvbi9zY2FsaW5nIG9mIHRoZSBub2RlXHJcbiAgICBub2RlLmFkZENvbXBvbmVudChjbXBNZXNoKTtcclxuICAgIG5vZGUuYWRkQ29tcG9uZW50KGNtcE1hdGVyaWFsKTtcclxuICAgIG5vZGUuYWRkQ29tcG9uZW50KGNtcFRyYW5zZm9ybSk7XHJcbiAgICByZXR1cm4gbm9kZTtcclxuICB9XHJcblxyXG4gIC8vV2hhdCBoYXBwZW5zIHdoZW4gdGhlIGxlZnQgbW91c2UgYnV0dG9uIGlzIHByZXNzZWRcclxuICBmdW5jdGlvbiBobmRNb3VzZURvd24oX2V2ZW50OiBmLkV2ZW50UG9pbnRlcikge1xyXG4gICAgcmVzZXRCYWxsKCk7XHJcbiAgICBzdGFydFBvc2l0aW9uID0gdmlld1BvcnQucG9pbnRDbGllbnRUb1Byb2plY3Rpb24obmV3IGYuVmVjdG9yMihfZXZlbnQucG9pbnRlclgsIF9ldmVudC5wb2ludGVyWSkpO1xyXG4gIH1cclxuXHJcbiAgLy9XaGF0IGhhcHBlbnMgd2hlbiB0aGUgbGVmdCBtb3VzZSBidXR0b24gaXMgcmVsZWFzZWRcclxuICBmdW5jdGlvbiBobmRNb3VzZVVwKF9ldmVudDogZi5FdmVudFBvaW50ZXIpIHtcclxuICAgIGVuZFBvc2l0aW9uID0gdmlld1BvcnQucG9pbnRDbGllbnRUb1Byb2plY3Rpb24obmV3IGYuVmVjdG9yMihfZXZlbnQucG9pbnRlclgsIF9ldmVudC5wb2ludGVyWSkpO1xyXG4gICAgbGV0IHhEaXJlY3Rpb246IG51bWJlciA9IHN0YXJ0UG9zaXRpb24ueCAtIGVuZFBvc2l0aW9uLng7XHJcbiAgICBsZXQgZm9yd2FyZFVwU3RyZW5ndGg6IG51bWJlciA9IHN0YXJ0UG9zaXRpb24ueSAtIGVuZFBvc2l0aW9uLnk7XHJcbiAgICBsZXQgZGlmZmVyZW5jZVZlY3RvcjogZi5WZWN0b3IyID0gZi5WZWN0b3IyLkRJRkZFUkVOQ0Uoc3RhcnRQb3NpdGlvbiwgZW5kUG9zaXRpb24pO1xyXG4gICAgbGV0IHBvd2VyOiBudW1iZXIgPSBkaWZmZXJlbmNlVmVjdG9yLm1hZ25pdHVkZSAqIHBsYXllckZvcmNlO1xyXG4gICAgdGhyb3dCYWxsKHhEaXJlY3Rpb24sIGZvcndhcmRVcFN0cmVuZ3RoLCBwb3dlcik7XHJcbiAgfVxyXG5cclxuICBmdW5jdGlvbiB0aHJvd0JhbGwoX3hEaXJlY3Rpb246IG51bWJlciwgX2ZvcndhcmRVcFN0cmVuZ3RoOiBudW1iZXIsIF9wb3dlcjogbnVtYmVyKSB7XHJcbiAgICBiYWxsLnBoeXNpY3NUeXBlID0gZi5QSFlTSUNTX1RZUEUuRFlOQU1JQzsgLy9tYWtlIGJhbGwgbGlzdGVuaW5nIHRvIHBoeXNpY3MgYWdhaW5cclxuICAgIGJhbGwuYXBwbHlGb3JjZShuZXcgZi5WZWN0b3IzKC1feERpcmVjdGlvbiAqIF9wb3dlciAqIDAuOCwgX3Bvd2VyICogLV9mb3J3YXJkVXBTdHJlbmd0aCAqIDAuOCwgX2ZvcndhcmRVcFN0cmVuZ3RoICogX3Bvd2VyKSk7IC8vdGhyb3cgdGhlIGJhbGwgd2l0aCBmb3JjZXNcclxuICAgIGJhbGwuYXBwbHlUb3JxdWUobmV3IGYuVmVjdG9yMygtMC4wMDA1ICogX3Bvd2VyLCAwLCAwKSk7IC8vSnVzdCBhZGQgYSB0YWQgYml0IG9mIHJvdGF0aW9uYWwgZm9yY2UgdG8gbWFrZSBpdCB2aXN1YWxseSBtb3JlIHJlYWxpc3RpY1xyXG4gIH1cclxuXHJcbiAgZnVuY3Rpb24gcmVzZXRCYWxsKCkge1xyXG4gICAgZi5EZWJ1Zy5sb2coYmFsbC5tYXNzKTtcclxuICAgIC8vYmFsbC5zZXRQb3NpdGlvbihiYWxsU3RhcnQpOyA8LS0gUG9zaXRpb24gY2FuJ3QgYmUgc2V0IGJ5IHBoeXNpY3Mgc2luY2UgeW91IG1ha2UgdGhlIGJhbGwga2luZW1hdGljIGluIHRoZSBzYW1lIGZyYW1lXHJcbiAgICBiYWxsLmdldENvbnRhaW5lcigpLm10eExvY2FsLnRyYW5zbGF0aW9uID0gYmFsbFN0YXJ0OyAvLyBLaW5lbWF0aWMgb2JqZWN0cyBuZWVkIHRvIGJlIHNldCB0aHJvdWdoIG5vcm1hbCB0cmFuc2Zvcm1cclxuICAgIGJhbGwuZ2V0Q29udGFpbmVyKCkubXR4TG9jYWwucm90YXRpb24gPSBmLlZlY3RvcjMuWkVSTygpO1xyXG4gICAgYmFsbC5zZXRWZWxvY2l0eShuZXcgZi5WZWN0b3IzKDAsIDAsIDApKTtcclxuICAgIGJhbGwuc2V0QW5ndWxhclZlbG9jaXR5KG5ldyBmLlZlY3RvcjMoMCwgMCwgMCkpO1xyXG4gICAgYmFsbC5waHlzaWNzVHlwZSA9IGYuUEhZU0lDU19UWVBFLktJTkVNQVRJQztcclxuICB9XHJcblxyXG4gIC8vQ3JlYXRpbmcgYSBiYXNrZXQgYW5kIGEgYm9hcmQgd2l0aCBzb21lIGRlY29yYXRpb24gLSA3IG5ldyBib2RpZXNcclxuICBmdW5jdGlvbiBjcmVhdGVDb3VydChfYm9keVN0YXJ0Tm86IG51bWJlciwgX3Bvc2l0aW9uOiBmLlZlY3RvcjMpIHtcclxuICAgIGxldCBtYXRlcmlhbEJhc2tldDogZi5NYXRlcmlhbCA9IG5ldyBmLk1hdGVyaWFsKFwiQmFza2V0XCIsIGYuU2hhZGVyRmxhdCwgbmV3IGYuQ29hdENvbG9yZWQobmV3IGYuQ29sb3IoMC45LCAwLjIsIDAuMiwgMSkpKTtcclxuICAgIGxldCBiYXNrZXRQb3NpdGlvbjogZi5WZWN0b3IzID0gX3Bvc2l0aW9uO1xyXG4gICAgLy9CYXNrZXQgLSBTcXVhcmUgLSBOb3QgY29tcGxldGx5IHJlYWwgdmFsdWVzIG9mIGNvdXJzZSBzaW5jZSBpdCdzIG5vIGNpcmNsZVxyXG4gICAgYm9kaWVzW19ib2R5U3RhcnROb10gPSBjcmVhdGVDb21wbGV0ZU5vZGUoXCJCYXNrZXRCYWNrXCIsIG1hdGVyaWFsQmFza2V0LCBuZXcgZi5NZXNoQ3ViZSgpLCAwLCBmLlBIWVNJQ1NfVFlQRS5TVEFUSUMpO1xyXG4gICAgYm9kaWVzW19ib2R5U3RhcnROb10ubXR4TG9jYWwudHJhbnNsYXRlKG5ldyBmLlZlY3RvcjMoYmFza2V0UG9zaXRpb24ueCwgYmFza2V0UG9zaXRpb24ueSwgYmFza2V0UG9zaXRpb24ueikpO1xyXG4gICAgYm9kaWVzW19ib2R5U3RhcnROb10ubXR4TG9jYWwuc2NhbGUobmV3IGYuVmVjdG9yMygwLjYsIDAuMDUsIDAuMTUpKTtcclxuICAgIGhpZXJhcmNoeS5hcHBlbmRDaGlsZChib2RpZXNbX2JvZHlTdGFydE5vXSk7XHJcbiAgICBib2RpZXNbX2JvZHlTdGFydE5vICsgMV0gPSBjcmVhdGVDb21wbGV0ZU5vZGUoXCJCYXNrZXRTaWRlXCIsIG1hdGVyaWFsQmFza2V0LCBuZXcgZi5NZXNoQ3ViZSgpLCAwLCBmLlBIWVNJQ1NfVFlQRS5TVEFUSUMpO1xyXG4gICAgYm9kaWVzW19ib2R5U3RhcnRObyArIDFdLm10eExvY2FsLnRyYW5zbGF0ZShuZXcgZi5WZWN0b3IzKGJhc2tldFBvc2l0aW9uLnggKyAwLjMsIGJhc2tldFBvc2l0aW9uLnksIGJhc2tldFBvc2l0aW9uLnogLSAwLjMpKTtcclxuICAgIGJvZGllc1tfYm9keVN0YXJ0Tm8gKyAxXS5tdHhMb2NhbC5zY2FsZShuZXcgZi5WZWN0b3IzKDAuMTUsIDAuMDUsIDAuNikpO1xyXG4gICAgaGllcmFyY2h5LmFwcGVuZENoaWxkKGJvZGllc1tfYm9keVN0YXJ0Tm8gKyAxXSk7XHJcbiAgICBib2RpZXNbX2JvZHlTdGFydE5vICsgMl0gPSBjcmVhdGVDb21wbGV0ZU5vZGUoXCJCYXNrZXRTaWRlXCIsIG1hdGVyaWFsQmFza2V0LCBuZXcgZi5NZXNoQ3ViZSgpLCAwLCBmLlBIWVNJQ1NfVFlQRS5TVEFUSUMpO1xyXG4gICAgYm9kaWVzW19ib2R5U3RhcnRObyArIDJdLm10eExvY2FsLnRyYW5zbGF0ZShuZXcgZi5WZWN0b3IzKGJhc2tldFBvc2l0aW9uLnggLSAwLjMsIGJhc2tldFBvc2l0aW9uLnksIGJhc2tldFBvc2l0aW9uLnogLSAwLjMpKTtcclxuICAgIGJvZGllc1tfYm9keVN0YXJ0Tm8gKyAyXS5tdHhMb2NhbC5zY2FsZShuZXcgZi5WZWN0b3IzKDAuMTUsIDAuMDUsIDAuNikpO1xyXG4gICAgaGllcmFyY2h5LmFwcGVuZENoaWxkKGJvZGllc1tfYm9keVN0YXJ0Tm8gKyAyXSk7XHJcbiAgICBib2RpZXNbX2JvZHlTdGFydE5vICsgM10gPSBjcmVhdGVDb21wbGV0ZU5vZGUoXCJCYXNrZXRGcm9udFwiLCBtYXRlcmlhbEJhc2tldCwgbmV3IGYuTWVzaEN1YmUoKSwgMCwgZi5QSFlTSUNTX1RZUEUuU1RBVElDKTtcclxuICAgIGJvZGllc1tfYm9keVN0YXJ0Tm8gKyAzXS5tdHhMb2NhbC50cmFuc2xhdGUobmV3IGYuVmVjdG9yMyhiYXNrZXRQb3NpdGlvbi54LCBiYXNrZXRQb3NpdGlvbi55LCBiYXNrZXRQb3NpdGlvbi56IC0gMC42KSk7XHJcbiAgICBib2RpZXNbX2JvZHlTdGFydE5vICsgM10ubXR4TG9jYWwuc2NhbGUobmV3IGYuVmVjdG9yMygwLjYsIDAuMDUsIDAuMTUpKTtcclxuICAgIGhpZXJhcmNoeS5hcHBlbmRDaGlsZChib2RpZXNbX2JvZHlTdGFydE5vICsgM10pO1xyXG4gICAgYm9kaWVzW19ib2R5U3RhcnRObyArIDRdID0gY3JlYXRlQ29tcGxldGVOb2RlKFwiQmFza2V0SG9sZGVyXCIsIG1hdGVyaWFsQmFza2V0LCBuZXcgZi5NZXNoQ3ViZSgpLCAwLCBmLlBIWVNJQ1NfVFlQRS5TVEFUSUMpO1xyXG4gICAgYm9kaWVzW19ib2R5U3RhcnRObyArIDRdLm10eExvY2FsLnRyYW5zbGF0ZShuZXcgZi5WZWN0b3IzKGJhc2tldFBvc2l0aW9uLngsIGJhc2tldFBvc2l0aW9uLnkgLSAwLjAxLCBiYXNrZXRQb3NpdGlvbi56IC0gMC43NzUpKTtcclxuICAgIGJvZGllc1tfYm9keVN0YXJ0Tm8gKyA0XS5tdHhMb2NhbC5zY2FsZShuZXcgZi5WZWN0b3IzKDAuMTUsIDAuMDUsIDAuNikpO1xyXG4gICAgaGllcmFyY2h5LmFwcGVuZENoaWxkKGJvZGllc1tfYm9keVN0YXJ0Tm8gKyA0XSk7XHJcbiAgICBib2RpZXNbX2JvZHlTdGFydE5vICsgNV0gPSBjcmVhdGVDb21wbGV0ZU5vZGUoXCJXaGl0ZUJvYXJkXCIsIGJvYXJkRGVmYXVsdCwgbmV3IGYuTWVzaEN1YmUoKSwgMCwgZi5QSFlTSUNTX1RZUEUuU1RBVElDKTtcclxuICAgIGJvZGllc1tfYm9keVN0YXJ0Tm8gKyA1XS5tdHhMb2NhbC50cmFuc2xhdGUobmV3IGYuVmVjdG9yMyhiYXNrZXRQb3NpdGlvbi54LCBiYXNrZXRQb3NpdGlvbi55ICsgMC40NSwgYmFza2V0UG9zaXRpb24ueiAtIDAuNzc1KSk7IC8vQm9hcmQgMTcuNSBjbSBmcm9tIGJhc2tldFxyXG4gICAgYm9kaWVzW19ib2R5U3RhcnRObyArIDVdLm10eExvY2FsLnNjYWxlKG5ldyBmLlZlY3RvcjMoMS44MCwgMS4wNSwgMC4xNSkpO1xyXG4gICAgaGllcmFyY2h5LmFwcGVuZENoaWxkKGJvZGllc1tfYm9keVN0YXJ0Tm8gKyA1XSk7XHJcblxyXG4gICAgLy9Cb2FyZCBibGFjayBkZWNvcmF0aW9uXHJcbiAgICBsZXQgbm9kZTogZi5Ob2RlOyAvL3dlIGRvIG5vdCBhZGQgdGhlbSB0byBib2RpZXMgdGhleSB3aWxsIG9ubHkgYmUgZGVjb3JhdGl2ZSBhbmQgdGhlcmVmb3JlIG5vcm1hbCBGdWRnZSBub2Rlc1xyXG4gICAgbGV0IGRlY29yYXRpb25NYXRlcmlhbDogZi5NYXRlcmlhbCA9IG5ldyBmLk1hdGVyaWFsKFwiQm9hcmREZWNvXCIsIGYuU2hhZGVyRmxhdCwgbmV3IGYuQ29hdENvbG9yZWQobmV3IGYuQ29sb3IoMC4xLCAwLjEsIDAuMSwgMSkpKTtcclxuICAgIG5vZGUgPSBjcmVhdGVTdGFuZGFyZEZ1ZGdlTm9kZShcIkJsYWNrVXBwZXJTdHJpcGVcIiwgZGVjb3JhdGlvbk1hdGVyaWFsLCBuZXcgZi5NZXNoQ3ViZSgpKTtcclxuICAgIG5vZGUubXR4TG9jYWwudHJhbnNsYXRlKG5ldyBmLlZlY3RvcjMoYmFza2V0UG9zaXRpb24ueCwgYmFza2V0UG9zaXRpb24ueSArIDAuNSwgYmFza2V0UG9zaXRpb24ueiAtIDAuNzIzNSkpOyAvL0JvYXJkIDE3LjUgY20gZnJvbSBiYXNrZXRcclxuICAgIG5vZGUubXR4TG9jYWwuc2NhbGUobmV3IGYuVmVjdG9yMygwLjU5LCAwLjA1LCAwLjA1KSk7XHJcbiAgICBoaWVyYXJjaHkuYXBwZW5kQ2hpbGQobm9kZSk7XHJcbiAgICBub2RlID0gY3JlYXRlU3RhbmRhcmRGdWRnZU5vZGUoXCJCbGFja0xvd2VyU3RyaXBlXCIsIGRlY29yYXRpb25NYXRlcmlhbCwgbmV3IGYuTWVzaEN1YmUoKSk7XHJcbiAgICBub2RlLm10eExvY2FsLnRyYW5zbGF0ZShuZXcgZi5WZWN0b3IzKGJhc2tldFBvc2l0aW9uLngsIGJhc2tldFBvc2l0aW9uLnkgKyAwLjA1LCBiYXNrZXRQb3NpdGlvbi56IC0gMC43MjM1KSk7IC8vQm9hcmQgMTcuNSBjbSBmcm9tIGJhc2tldFxyXG4gICAgbm9kZS5tdHhMb2NhbC5zY2FsZShuZXcgZi5WZWN0b3IzKDAuNTksIDAuMDUsIDAuMDUpKTtcclxuICAgIGhpZXJhcmNoeS5hcHBlbmRDaGlsZChub2RlKTtcclxuICAgIG5vZGUgPSBjcmVhdGVTdGFuZGFyZEZ1ZGdlTm9kZShcIkJsYWNrTGVmdFN0cmlwZVwiLCBkZWNvcmF0aW9uTWF0ZXJpYWwsIG5ldyBmLk1lc2hDdWJlKCkpO1xyXG4gICAgbm9kZS5tdHhMb2NhbC50cmFuc2xhdGUobmV3IGYuVmVjdG9yMyhiYXNrZXRQb3NpdGlvbi54IC0gMC4yNywgYmFza2V0UG9zaXRpb24ueSArIDAuMjUsIGJhc2tldFBvc2l0aW9uLnogLSAwLjcyMzUpKTsgLy9Cb2FyZCAxNy41IGNtIGZyb20gYmFza2V0XHJcbiAgICBub2RlLm10eExvY2FsLnNjYWxlKG5ldyBmLlZlY3RvcjMoMC4wNSwgMC40NSwgMC4wNSkpO1xyXG4gICAgaGllcmFyY2h5LmFwcGVuZENoaWxkKG5vZGUpO1xyXG4gICAgbm9kZSA9IGNyZWF0ZVN0YW5kYXJkRnVkZ2VOb2RlKFwiQmxhY2tSaWdodFN0cmlwZVwiLCBkZWNvcmF0aW9uTWF0ZXJpYWwsIG5ldyBmLk1lc2hDdWJlKCkpO1xyXG4gICAgbm9kZS5tdHhMb2NhbC50cmFuc2xhdGUobmV3IGYuVmVjdG9yMyhiYXNrZXRQb3NpdGlvbi54ICsgMC4yNywgYmFza2V0UG9zaXRpb24ueSArIDAuMjUsIGJhc2tldFBvc2l0aW9uLnogLSAwLjcyMzUpKTsgLy9Cb2FyZCAxNy41IGNtIGZyb20gYmFza2V0XHJcbiAgICBub2RlLm10eExvY2FsLnNjYWxlKG5ldyBmLlZlY3RvcjMoMC4wNSwgMC40NSwgMC4wNSkpO1xyXG4gICAgaGllcmFyY2h5LmFwcGVuZENoaWxkKG5vZGUpO1xyXG5cclxuICAgIC8vR29hbFRyaWdnZXIgLSBTbGlnaHRseSBwb3NpdGlvbmVkIHVuZGVyIHRoZSBiYXNrZXQgZW50cnkgc28gaXQgb25seSBjb3VudHMgd2hlbiBpdCBnb2VzIHRocm91Z2ggYW5kIHZlcnkgc21hbGxcclxuICAgIGJvZGllc1tfYm9keVN0YXJ0Tm8gKyA2XSA9IGNyZWF0ZUNvbXBsZXRlTm9kZShcIkdvYWxUcmlnZ2VyXCIsIG1hdGVyaWFsQmFza2V0LCBuZXcgZi5NZXNoQ3ViZSgpLCAwLCBmLlBIWVNJQ1NfVFlQRS5TVEFUSUMsIGYuUEhZU0lDU19HUk9VUC5UUklHR0VSKTtcclxuICAgIGJvZGllc1tfYm9keVN0YXJ0Tm8gKyA2XS5yZW1vdmVDb21wb25lbnQoYm9kaWVzW19ib2R5U3RhcnRObyArIDZdLmdldENvbXBvbmVudChmLkNvbXBvbmVudE1lc2gpKTsgLy9UcmlnZ2VyIGRvZXMgbm90IG5lZWQgdG8gYmUgdmlzaWJsZSBzbyByZW1vdmUgdGhlIG1lc2ggY29tcG9uZW50XHJcbiAgICBib2RpZXNbX2JvZHlTdGFydE5vICsgNl0ubXR4TG9jYWwudHJhbnNsYXRlKG5ldyBmLlZlY3RvcjMoYmFza2V0UG9zaXRpb24ueCwgYmFza2V0UG9zaXRpb24ueSAtIDAuMDUsIGJhc2tldFBvc2l0aW9uLnogLSAwLjMpKTtcclxuICAgIGJvZGllc1tfYm9keVN0YXJ0Tm8gKyA2XS5tdHhMb2NhbC5zY2FsZShuZXcgZi5WZWN0b3IzKDAuMSwgMC4wNSwgMC4xKSk7XHJcbiAgICBoaWVyYXJjaHkuYXBwZW5kQ2hpbGQoYm9kaWVzW19ib2R5U3RhcnRObyArIDZdKTtcclxuICB9XHJcblxyXG4gIC8vU29tZSBCb2RpZXMgb24gSm9pbnRzIHRoYXQgbW92ZSB3aGVuIGhpdCBieSB0aGUgYmFsbCwganVzdCBmb3IgdmlzdWFscyBhbmQgZnVuIC0gTGVzc29uIEpvaW50c1xyXG4gIGZ1bmN0aW9uIGNyZWF0ZVNob290YWJsZURlY29yYXRpb24oX2JvZHlTdGFydE5vOiBudW1iZXIsIF9wb3NpdGlvbjogZi5WZWN0b3IzLCBfaGVpZ2h0OiBudW1iZXIgPSAxKSB7XHJcbiAgICBsZXQgc3RpY2tNYXRlcmlhbDogZi5NYXRlcmlhbCA9IG5ldyBmLk1hdGVyaWFsKFwiSm9pbnRTdGlja1wiLCBmLlNoYWRlckZsYXQsIG5ldyBmLkNvYXRDb2xvcmVkKG5ldyBmLkNvbG9yKDAsIDAuMTUsIDEsIDAuNykpKVxyXG4gICAgLy9TcGhlcmljYWwgSm9pbnRcclxuICAgIGJvZGllc1tfYm9keVN0YXJ0Tm9dID0gY3JlYXRlQ29tcGxldGVOb2RlKFwiU29ja2V0XCIsIGdyb3VuZE1hdGVyaWFsLCBuZXcgZi5NZXNoQ3ViZSgpLCAxLCBmLlBIWVNJQ1NfVFlQRS5TVEFUSUMsIGYuUEhZU0lDU19HUk9VUC5HUk9VUF8xKTtcclxuICAgIGhpZXJhcmNoeS5hcHBlbmRDaGlsZChib2RpZXNbX2JvZHlTdGFydE5vXSk7XHJcbiAgICBib2RpZXNbX2JvZHlTdGFydE5vXS5tdHhMb2NhbC50cmFuc2xhdGUobmV3IGYuVmVjdG9yMyhfcG9zaXRpb24ueCwgX3Bvc2l0aW9uLnksIF9wb3NpdGlvbi56KSk7XHJcbiAgICBib2RpZXNbX2JvZHlTdGFydE5vXS5tdHhMb2NhbC5zY2FsZShuZXcgZi5WZWN0b3IzKDAuNSwgMC41LCAwLjUpKTtcclxuXHJcbiAgICBib2RpZXNbX2JvZHlTdGFydE5vICsgMV0gPSBjcmVhdGVDb21wbGV0ZU5vZGUoXCJCYWxsSm9pbnRcIiwgc3RpY2tNYXRlcmlhbCwgbmV3IGYuTWVzaEN1YmUoKSwgMC41LCBmLlBIWVNJQ1NfVFlQRS5EWU5BTUlDLCBmLlBIWVNJQ1NfR1JPVVAuR1JPVVBfMSk7XHJcbiAgICBoaWVyYXJjaHkuYXBwZW5kQ2hpbGQoYm9kaWVzW19ib2R5U3RhcnRObyArIDFdKTtcclxuICAgIGJvZGllc1tfYm9keVN0YXJ0Tm8gKyAxXS5tdHhMb2NhbC50cmFuc2xhdGUobmV3IGYuVmVjdG9yMyhfcG9zaXRpb24ueCwgX3Bvc2l0aW9uLnkgKyBfaGVpZ2h0LCBfcG9zaXRpb24ueikpO1xyXG4gICAgYm9kaWVzW19ib2R5U3RhcnRObyArIDFdLm10eExvY2FsLnNjYWxlKG5ldyBmLlZlY3RvcjMoMC4zLCAxLjUsIDAuMykpO1xyXG4gICAgbGV0IGhpbmdlSm9pbnQgPSBuZXcgZi5Db21wb25lbnRKb2ludFJldm9sdXRlKGJvZGllc1tfYm9keVN0YXJ0Tm9dLmdldENvbXBvbmVudChmLkNvbXBvbmVudFJpZ2lkYm9keSksIGJvZGllc1tfYm9keVN0YXJ0Tm8gKyAxXS5nZXRDb21wb25lbnQoZi5Db21wb25lbnRSaWdpZGJvZHkpLCBuZXcgZi5WZWN0b3IzKDEsIDAsIDApKTtcclxuICAgIGJvZGllc1tfYm9keVN0YXJ0Tm9dLmFkZENvbXBvbmVudChoaW5nZUpvaW50KTtcclxuICAgIGhpbmdlSm9pbnQuc3ByaW5nRGFtcGluZyA9IDAuOTtcclxuICB9XHJcblxyXG5cclxuICAvL1NwYXduIGEgb2JqZWN0IHRoYXQgaXMgc2lnbmFsaW5nIGEgZnJlc2ggYm91bmNlIG9uIHRoZSBncm91bmQgLSBMZXNzb24gQ29sbGlzaW9uIEV2ZW50cyAtIEltcHVsc2VzXHJcbiAgZnVuY3Rpb24gc3Bhd25EZWNvT2JqZWN0T25TcG90KF9wb3NpdGlvbjogZi5WZWN0b3IzLCBfaW1wdWxzZVN0cmVuZ3RoOiBudW1iZXIgPSAwKSB7XHJcbiAgICBsZXQgX25vZGUgPSBjcmVhdGVTdGFuZGFyZEZ1ZGdlTm9kZShcIkRla29cIiwgYm9hcmREZWZhdWx0LCBuZXcgZi5NZXNoQ3ViZSgpKTtcclxuICAgIF9ub2RlLm10eExvY2FsLnRyYW5zbGF0ZShfcG9zaXRpb24pO1xyXG4gICAgX25vZGUubXR4TG9jYWwuc2NhbGUobmV3IGYuVmVjdG9yMygwLjEsIF9pbXB1bHNlU3RyZW5ndGggLyAxMCwgMC4xKSk7XHJcbiAgICBoaWVyYXJjaHkuYWRkQ2hpbGQoX25vZGUpO1xyXG4gICAgd2luZG93LnNldFRpbWVvdXQoZGVzcGF3bkRlY29PYmplY3QsIDEwMDAsIF9ub2RlKTtcclxuICB9XHJcblxyXG4gIC8vUmVtb3ZlIHRoZSBjaGlsZCBhZ2FpbnN0IGFmdGVyIGEgd2hpbGUgKG5vdCBwZXJmb3JtYW50LCBzaG91bGQgdXNlIG9iamVjdCBwb29saW5nIGJ1dCB0aGF0IGlzIG5vdCBwYXJ0IG9mIHRoZSBsZXNzb24pXHJcbiAgZnVuY3Rpb24gZGVzcGF3bkRlY29PYmplY3QoX25vZGU6IGYuTm9kZSkge1xyXG4gICAgaGllcmFyY2h5LnJlbW92ZUNoaWxkKF9ub2RlKTtcclxuICB9XHJcblxyXG4gIC8vU2ltcGxlIFJheWNhc3QgdGhhdCBpcyBjaGVja2luZyB0aGUgc3BlZWQgb2YgdGhlIHBhc3NpbmcgYmFsbCBvbiB0aGUgYmFza2V0cmluZyAtIExlc3NvbiBSYXljYXN0XHJcbiAgZnVuY3Rpb24gcmF5Y2FzdFNwZWVkVGVzdCgpIHtcclxuICAgIGxldCBvcmlnaW4gPSBuZXcgZi5WZWN0b3IzKDAsIDMuMTUsIC02Ljc3NSk7XHJcbiAgICBsZXQgcmF5SGl0OiBmLlJheUhpdEluZm8gPSBmLlBoeXNpY3MucmF5Y2FzdChvcmlnaW4sIG5ldyBmLlZlY3RvcjMoMCwgMCwgMSksIDEuNSk7XHJcbiAgICBpZiAocmF5SGl0LmhpdCAmJiByYXlIaXQucmlnaWRib2R5Q29tcG9uZW50LmdldENvbnRhaW5lcigpLm5hbWUgPT0gXCJCYXNrZXRiYWxsXCIpIHtcclxuICAgICAgbGFzdFNwZWVkID0gYmFsbC5nZXRWZWxvY2l0eSgpLm1hZ25pdHVkZTtcclxuICAgICAgZ29hbENvdW50ZXIudGV4dENvbnRlbnQgPSBcIlBvaW50czogXCIgKyBwb2ludHMudG9TdHJpbmcoKSArIFwiIC8gU3BlZWQ6IFwiICsgbGFzdFNwZWVkLnRvRml4ZWQoMik7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvLyNyZWdpb24gRXZlbnQgSGFuZGxpbmdcclxuICAvL1JlZ2lzdGVyIGEgdHJpZ2dlcmluZyBldmVudCAtIExlc3NvbiBUcmlnZ2VyIEV2ZW50c1xyXG4gIGZ1bmN0aW9uIGdvYWxDaGVja0VudGVyKF9ldmVudDogZi5FdmVudFBoeXNpY3MpIHtcclxuICAgIGlmIChfZXZlbnQuY21wUmlnaWRib2R5LmdldENvbnRhaW5lcigpLm5hbWUgPT0gXCJCYXNrZXRiYWxsXCIpIHtcclxuICAgICAgYm9kaWVzWzEwXS5nZXRDb21wb25lbnQoZi5Db21wb25lbnRNYXRlcmlhbCkubWF0ZXJpYWwgPSBib2FyZEdvYWw7XHJcbiAgICAgIHBvaW50cyArPSAxMDA7XHJcbiAgICAgIGdvYWxDb3VudGVyLnRleHRDb250ZW50ID0gXCJQb2ludHM6IFwiICsgcG9pbnRzLnRvU3RyaW5nKCkgKyBcIiAvIFNwZWVkOiBcIiArIGxhc3RTcGVlZC50b0ZpeGVkKDIpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgZnVuY3Rpb24gZ29hbENoZWNrRXhpdChfZXZlbnQ6IGYuRXZlbnRQaHlzaWNzKSB7XHJcbiAgICBpZiAoX2V2ZW50LmNtcFJpZ2lkYm9keS5nZXRDb250YWluZXIoKS5uYW1lID09IFwiQmFza2V0YmFsbFwiKSB7XHJcbiAgICAgIGJvZGllc1sxMF0uZ2V0Q29tcG9uZW50KGYuQ29tcG9uZW50TWF0ZXJpYWwpLm1hdGVyaWFsID0gYm9hcmREZWZhdWx0O1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLy9SZWdpc3RlciBhIGNvbGxpc2lvbiBvZiBhIGJvZHkgd2l0aCB0aGUgZ3JvdW5kIC0gTGVzc29uIENvbGxpc2lvbiBFdmVudHNcclxuICBmdW5jdGlvbiBncm91bmRDb2xFbnRlcihfZXZlbnQ6IGYuRXZlbnRQaHlzaWNzKSB7XHJcbiAgICBpZiAoX2V2ZW50LmNtcFJpZ2lkYm9keS5nZXRDb250YWluZXIoKS5uYW1lID09IFwiQmFza2V0YmFsbFwiKSB7XHJcbiAgICAgIHNwYXduRGVjb09iamVjdE9uU3BvdChfZXZlbnQuY29sbGlzaW9uUG9pbnQsIF9ldmVudC5ub3JtYWxJbXB1bHNlKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIGZ1bmN0aW9uIHRhcmdldENvbEVudGVyKF9ldmVudDogZi5FdmVudFBoeXNpY3MpIHtcclxuICAgIGlmIChfZXZlbnQuY21wUmlnaWRib2R5LmdldENvbnRhaW5lcigpLm5hbWUgPT0gXCJCYXNrZXRiYWxsXCIpIHtcclxuICAgICAgcG9pbnRzICs9IDUwO1xyXG4gICAgICBnb2FsQ291bnRlci50ZXh0Q29udGVudCA9IFwiUG9pbnRzOiBcIiArIHBvaW50cy50b1N0cmluZygpICsgXCIgLyBTcGVlZDogXCIgKyBsYXN0U3BlZWQudG9GaXhlZCgyKTtcclxuICAgIH1cclxuICB9XHJcbiAgLy8jZW5kcmVnaW9uXHJcblxyXG59Il19