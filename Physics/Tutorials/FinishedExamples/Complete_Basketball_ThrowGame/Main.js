"use strict";
///<reference types="../../../../Core/Build/FudgeCore.js"/>
var f = FudgeCore;
//Reference Fudge, getting code completion ready and creating a shortcut f to write FudgeCode more comfortably
var Turorials_FUDGEPhysics_Lesson1;
//Reference Fudge, getting code completion ready and creating a shortcut f to write FudgeCode more comfortably
(function (Turorials_FUDGEPhysics_Lesson1) {
    //GOAL: Learning to use the physical raycast to interact with objects. Different method than the standard Fudge Depth Texture Raycast
    //Fudge Basic Variables
    window.addEventListener("load", init);
    const app = document.querySelector("canvas"); // The html element where the scene is drawn to
    let goalCounter = document.getElementById("pointsCounter");
    let viewPort; // The scene visualization
    let hierarchy; // You're object scene tree
    let cmpCamera; //The camera in the scene to shot the ray from
    //Physical Objects
    let bodies = new Array(); // Array of all physical objects in the scene to have a quick reference
    let ball = null; //The Ball we are playing with
    //Setting Variables
    //Miscellaneous Variables
    let ballStart = new f.Vector3(0, 1.5, 3);
    let startPosition;
    let endPosition;
    let playerForce = 5000;
    let points = 0;
    let lastSpeed = 0;
    //Materials
    let boardDefault = new f.Material("Board", f.ShaderFlat, new f.CoatColored(new f.Color(0.85, 0.95, 0.85, 1)));
    let boardGoal = new f.Material("BoardGoal", f.ShaderFlat, new f.CoatColored(new f.Color(0.2, 0.95, 0.2, 1)));
    let groundMaterial = new f.Material("Ground", f.ShaderFlat, new f.CoatColored(new f.Color(0.2, 0.2, 0.2, 1)));
    //Function to initialize the Fudge Scene with a camera, light, viewport and PHYSCIAL Objects
    function init(_event) {
        hierarchy = new f.Node("Scene"); //create the root Node where every object is parented to. Should never be changed
        //#region Physics
        //PHYSICS - Basic Plane and Cube
        //Creating a physically static ground plane for our physics playground. A simple scaled cube but with physics type set to static
        bodies[0] = createCompleteNode("Ground", groundMaterial, new f.MeshCube(), 0, f.PHYSICS_TYPE.STATIC);
        bodies[0].mtxLocal.scale(new f.Vector3(14, 0.3, 14)); //Scale the body with it's standard ComponentTransform
        bodies[0].getComponent(f.ComponentRigidbody).restitution = 0.5;
        hierarchy.appendChild(bodies[0]); //Add the node to the scene by adding it to the scene-root
        //Backwalls - So cubes are not pushed away easily
        bodies[1] = createCompleteNode("WallBack", groundMaterial, new f.MeshCube(), 0, f.PHYSICS_TYPE.STATIC);
        bodies[1].mtxLocal.translate(new f.Vector3(0, -7, -7.5));
        bodies[1].mtxLocal.scale(new f.Vector3(14, 0.3, 15));
        bodies[1].mtxLocal.rotateX(90, true);
        hierarchy.appendChild(bodies[1]);
        bodies[2] = createCompleteNode("WallLeft", groundMaterial, new f.MeshCube(), 0, f.PHYSICS_TYPE.STATIC);
        bodies[2].mtxLocal.translate(new f.Vector3(7.5, 7, 0));
        bodies[2].mtxLocal.scale(new f.Vector3(15, 0.3, 14));
        bodies[2].mtxLocal.rotateZ(90, true);
        hierarchy.appendChild(bodies[2]);
        bodies[3] = createCompleteNode("WallRight", groundMaterial, new f.MeshCube(), 0, f.PHYSICS_TYPE.STATIC);
        bodies[3].mtxLocal.translate(new f.Vector3(-7.5, 7, 0));
        bodies[3].mtxLocal.scale(new f.Vector3(15, 0.3, 14));
        bodies[3].mtxLocal.rotateZ(-90, true);
        hierarchy.appendChild(bodies[3]);
        //Ball
        bodies[4] = createCompleteNode("Basketball", new f.Material("Basketball", f.ShaderFlat, new f.CoatColored(new f.Color(181 / 255, 66 / 255, 19 / 255))), new f.MeshSphere(), 0.65, f.PHYSICS_TYPE.KINEMATIC, f.PHYSICS_GROUP.DEFAULT, f.COLLIDER_TYPE.SPHERE);
        bodies[4].mtxLocal.translate(ballStart);
        bodies[4].mtxLocal.scale(new f.Vector3(0.26, 0.26, 0.26)); //26cm diameter basketball
        hierarchy.appendChild(bodies[4]);
        ball = bodies[4].getComponent(f.ComponentRigidbody);
        ball.restitution = 0.95;
        createCourt(5, new f.Vector3(0, 3.05, -6));
        createShootableDecoration(12, new f.Vector3(3, 0.5, -3));
        createShootableDecoration(14, new f.Vector3(-3, 0.5, -2));
        createShootableDecoration(16, new f.Vector3(-2, 4, -4), -1);
        //Add Events to our trigger and colliders
        bodies[11].getComponent(f.ComponentRigidbody).addEventListener("TriggerEnteredCollision" /* TRIGGER_ENTER */, goalCheckEnter);
        bodies[11].getComponent(f.ComponentRigidbody).addEventListener("TriggerLeftCollision" /* TRIGGER_EXIT */, goalCheckExit);
        bodies[0].getComponent(f.ComponentRigidbody).addEventListener("ColliderEnteredCollision" /* COLLISION_ENTER */, groundColEnter);
        bodies[13].getComponent(f.ComponentRigidbody).addEventListener("ColliderEnteredCollision" /* COLLISION_ENTER */, targetColEnter);
        bodies[15].getComponent(f.ComponentRigidbody).addEventListener("ColliderEnteredCollision" /* COLLISION_ENTER */, targetColEnter);
        bodies[17].getComponent(f.ComponentRigidbody).addEventListener("ColliderEnteredCollision" /* COLLISION_ENTER */, targetColEnter);
        //#endregion
        f.Physics.world.setSolverIterations(15);
        //Standard Fudge Scene Initialization - Creating a directional light, a camera and initialize the viewport
        let cmpLight = new f.ComponentLight(new f.LightDirectional(f.Color.CSS("WHITE")));
        cmpLight.pivot.lookAt(new f.Vector3(-0.5, -1, -0.8)); //Set light direction
        hierarchy.addComponent(cmpLight);
        cmpCamera = new f.ComponentCamera();
        cmpCamera.backgroundColor = f.Color.CSS("GREY");
        cmpCamera.pivot.translate(new f.Vector3(0, 1.5, 6)); //Centered Camera a little bit backwards
        cmpCamera.pivot.lookAt(new f.Vector3(0, 2, 0)); //Set the camera matrix so that it looks at the basket
        viewPort = new f.Viewport(); //Creating a viewport that is rendered onto the html canvas element
        viewPort.initialize("Viewport", hierarchy, cmpCamera, app); //initialize the viewport with the root node, camera and canvas
        //Activating input events - Important for this lesson
        viewPort.activatePointerEvent("\u0192pointerdown" /* DOWN */, true); //Tell Fudge to use it's internal mouse event 
        viewPort.addEventListener("\u0192pointerdown" /* DOWN */, hndMouseDown); //Set what function should receive the event
        viewPort.activatePointerEvent("\u0192pointerup" /* UP */, true);
        viewPort.addEventListener("\u0192pointerup" /* UP */, hndMouseUp);
        //Physics Events
        //PHYSICS - Start using physics by telling the physics the scene root object. Physics will recalculate every transform and initialize
        f.Physics.start(hierarchy);
        //f.Physics.settings.debugDraw = true; //Seeing the physical scene in debug mode - Lesson Debugging
        //Important start the game loop after starting physics, so physics can use the current transform before it's first iteration
        f.Loop.addEventListener("loopFrame" /* LOOP_FRAME */, update); //Tell the game loop to call the update function on each frame
        f.Loop.start(); //Stard the game loop
    }
    //Function to animate/update the Fudge scene, commonly known as gameloop
    function update() {
        f.Physics.world.simulate(); //PHYSICS - Simulate physical changes each frame, parameter to set time between frames
        raycastSpeedTest();
        viewPort.draw(); // Draw the current Fudge Scene to the canvas
    }
    // Function to quickly create a node with multiple needed FudgeComponents, including a physics component
    function createCompleteNode(_name, _material, _mesh, _mass, _physicsType, _group = f.PHYSICS_GROUP.DEFAULT, _colType = f.COLLIDER_TYPE.CUBE) {
        //Standard Fudge Node Creation
        let node = new f.Node(_name); //Creating the node
        let cmpMesh = new f.ComponentMesh(_mesh); //Creating a mesh for the node
        let cmpMaterial = new f.ComponentMaterial(_material); //Creating a material for the node
        let cmpTransform = new f.ComponentTransform(); //Transform holding position/rotation/scaling of the node
        let cmpRigidbody = new f.ComponentRigidbody(_mass, _physicsType, _colType, _group); //Adding a physical body component to use physics
        node.addComponent(cmpMesh);
        node.addComponent(cmpMaterial);
        node.addComponent(cmpTransform);
        node.addComponent(cmpRigidbody); // <-- best practice to add physics component last
        return node;
    }
    //Creating a node without any physics
    function createStandardFudgeNode(_name, _material, _mesh) {
        let node = new f.Node(_name); //Creating the node
        let cmpMesh = new f.ComponentMesh(_mesh); //Creating a mesh for the node
        let cmpMaterial = new f.ComponentMaterial(_material); //Creating a material for the node
        let cmpTransform = new f.ComponentTransform(); //Transform holding position/rotation/scaling of the node
        node.addComponent(cmpMesh);
        node.addComponent(cmpMaterial);
        node.addComponent(cmpTransform);
        return node;
    }
    //What happens when the left mouse button is pressed
    function hndMouseDown(_event) {
        resetBall();
        startPosition = viewPort.pointClientToProjection(new f.Vector2(_event.pointerX, _event.pointerY));
    }
    //What happens when the left mouse button is released
    function hndMouseUp(_event) {
        endPosition = viewPort.pointClientToProjection(new f.Vector2(_event.pointerX, _event.pointerY));
        let xDirection = startPosition.x - endPosition.x;
        let forwardUpStrength = startPosition.y - endPosition.y;
        let differenceVector = f.Vector2.DIFFERENCE(startPosition, endPosition);
        let power = differenceVector.magnitude * playerForce;
        throwBall(xDirection, forwardUpStrength, power);
    }
    function throwBall(_xDirection, _forwardUpStrength, _power) {
        ball.physicsType = f.PHYSICS_TYPE.DYNAMIC; //make ball listening to physics again
        ball.applyForce(new f.Vector3(-_xDirection * _power * 0.8, _power * -_forwardUpStrength * 0.8, _forwardUpStrength * _power)); //throw the ball with forces
        ball.applyTorque(new f.Vector3(-0.0005 * _power, 0, 0)); //Just add a tad bit of rotational force to make it visually more realistic
    }
    function resetBall() {
        //ball.setPosition(ballStart); <-- Position can't be set by physics since you make the ball kinematic in the same frame
        ball.getContainer().mtxLocal.translation = ballStart; // Kinematic objects need to be set through normal transform
        ball.getContainer().mtxLocal.rotation = f.Vector3.ZERO();
        ball.setVelocity(new f.Vector3(0, 0, 0));
        ball.setAngularVelocity(new f.Vector3(0, 0, 0));
        ball.physicsType = f.PHYSICS_TYPE.KINEMATIC;
    }
    //Creating a basket and a board with some decoration - 7 new bodies
    function createCourt(_bodyStartNo, _position) {
        let materialBasket = new f.Material("Basket", f.ShaderFlat, new f.CoatColored(new f.Color(0.9, 0.2, 0.2, 1)));
        let basketPosition = _position;
        //Basket - Square - Not completly real values of course since it's no circle
        bodies[_bodyStartNo] = createCompleteNode("BasketBack", materialBasket, new f.MeshCube(), 0, f.PHYSICS_TYPE.STATIC);
        bodies[_bodyStartNo].mtxLocal.translate(new f.Vector3(basketPosition.x, basketPosition.y, basketPosition.z));
        bodies[_bodyStartNo].mtxLocal.scale(new f.Vector3(0.6, 0.05, 0.15));
        hierarchy.appendChild(bodies[_bodyStartNo]);
        bodies[_bodyStartNo + 1] = createCompleteNode("BasketSide", materialBasket, new f.MeshCube(), 0, f.PHYSICS_TYPE.STATIC);
        bodies[_bodyStartNo + 1].mtxLocal.translate(new f.Vector3(basketPosition.x + 0.3, basketPosition.y, basketPosition.z - 0.3));
        bodies[_bodyStartNo + 1].mtxLocal.scale(new f.Vector3(0.15, 0.05, 0.6));
        hierarchy.appendChild(bodies[_bodyStartNo + 1]);
        bodies[_bodyStartNo + 2] = createCompleteNode("BasketSide", materialBasket, new f.MeshCube(), 0, f.PHYSICS_TYPE.STATIC);
        bodies[_bodyStartNo + 2].mtxLocal.translate(new f.Vector3(basketPosition.x - 0.3, basketPosition.y, basketPosition.z - 0.3));
        bodies[_bodyStartNo + 2].mtxLocal.scale(new f.Vector3(0.15, 0.05, 0.6));
        hierarchy.appendChild(bodies[_bodyStartNo + 2]);
        bodies[_bodyStartNo + 3] = createCompleteNode("BasketFront", materialBasket, new f.MeshCube(), 0, f.PHYSICS_TYPE.STATIC);
        bodies[_bodyStartNo + 3].mtxLocal.translate(new f.Vector3(basketPosition.x, basketPosition.y, basketPosition.z - 0.6));
        bodies[_bodyStartNo + 3].mtxLocal.scale(new f.Vector3(0.6, 0.05, 0.15));
        hierarchy.appendChild(bodies[_bodyStartNo + 3]);
        bodies[_bodyStartNo + 4] = createCompleteNode("BasketHolder", materialBasket, new f.MeshCube(), 0, f.PHYSICS_TYPE.STATIC);
        bodies[_bodyStartNo + 4].mtxLocal.translate(new f.Vector3(basketPosition.x, basketPosition.y - 0.01, basketPosition.z - 0.775));
        bodies[_bodyStartNo + 4].mtxLocal.scale(new f.Vector3(0.15, 0.05, 0.6));
        hierarchy.appendChild(bodies[_bodyStartNo + 4]);
        bodies[_bodyStartNo + 5] = createCompleteNode("WhiteBoard", boardDefault, new f.MeshCube(), 0, f.PHYSICS_TYPE.STATIC);
        bodies[_bodyStartNo + 5].mtxLocal.translate(new f.Vector3(basketPosition.x, basketPosition.y + 0.45, basketPosition.z - 0.775)); //Board 17.5 cm from basket
        bodies[_bodyStartNo + 5].mtxLocal.scale(new f.Vector3(1.80, 1.05, 0.15));
        hierarchy.appendChild(bodies[_bodyStartNo + 5]);
        //Board black decoration
        let node; //we do not add them to bodies they will only be decorative and therefore normal Fudge nodes
        let decorationMaterial = new f.Material("BoardDeco", f.ShaderFlat, new f.CoatColored(new f.Color(0.1, 0.1, 0.1, 1)));
        node = createStandardFudgeNode("BlackUpperStripe", decorationMaterial, new f.MeshCube());
        node.mtxLocal.translate(new f.Vector3(basketPosition.x, basketPosition.y + 0.5, basketPosition.z - 0.7235)); //Board 17.5 cm from basket
        node.mtxLocal.scale(new f.Vector3(0.59, 0.05, 0.05));
        hierarchy.appendChild(node);
        node = createStandardFudgeNode("BlackLowerStripe", decorationMaterial, new f.MeshCube());
        node.mtxLocal.translate(new f.Vector3(basketPosition.x, basketPosition.y + 0.05, basketPosition.z - 0.7235)); //Board 17.5 cm from basket
        node.mtxLocal.scale(new f.Vector3(0.59, 0.05, 0.05));
        hierarchy.appendChild(node);
        node = createStandardFudgeNode("BlackLeftStripe", decorationMaterial, new f.MeshCube());
        node.mtxLocal.translate(new f.Vector3(basketPosition.x - 0.27, basketPosition.y + 0.25, basketPosition.z - 0.7235)); //Board 17.5 cm from basket
        node.mtxLocal.scale(new f.Vector3(0.05, 0.45, 0.05));
        hierarchy.appendChild(node);
        node = createStandardFudgeNode("BlackRightStripe", decorationMaterial, new f.MeshCube());
        node.mtxLocal.translate(new f.Vector3(basketPosition.x + 0.27, basketPosition.y + 0.25, basketPosition.z - 0.7235)); //Board 17.5 cm from basket
        node.mtxLocal.scale(new f.Vector3(0.05, 0.45, 0.05));
        hierarchy.appendChild(node);
        //GoalTrigger - Slightly positioned under the basket entry so it only counts when it goes through and very small
        bodies[_bodyStartNo + 6] = createCompleteNode("GoalTrigger", materialBasket, new f.MeshCube(), 0, f.PHYSICS_TYPE.STATIC, f.PHYSICS_GROUP.TRIGGER);
        bodies[_bodyStartNo + 6].removeComponent(bodies[_bodyStartNo + 6].getComponent(f.ComponentMesh)); //Trigger does not need to be visible so remove the mesh component
        bodies[_bodyStartNo + 6].mtxLocal.translate(new f.Vector3(basketPosition.x, basketPosition.y - 0.05, basketPosition.z - 0.3));
        bodies[_bodyStartNo + 6].mtxLocal.scale(new f.Vector3(0.1, 0.05, 0.1));
        hierarchy.appendChild(bodies[_bodyStartNo + 6]);
    }
    //Some Bodies on Joints that move when hit by the ball, just for visuals and fun - Lesson Joints
    function createShootableDecoration(_bodyStartNo, _position, _height = 1) {
        let stickMaterial = new f.Material("JointStick", f.ShaderFlat, new f.CoatColored(new f.Color(0, 0.15, 1, 0.7)));
        //Spherical Joint
        bodies[_bodyStartNo] = createCompleteNode("Socket", groundMaterial, new f.MeshCube(), 1, f.PHYSICS_TYPE.STATIC, f.PHYSICS_GROUP.GROUP_1);
        hierarchy.appendChild(bodies[_bodyStartNo]);
        bodies[_bodyStartNo].mtxLocal.translate(new f.Vector3(_position.x, _position.y, _position.z));
        bodies[_bodyStartNo].mtxLocal.scale(new f.Vector3(0.5, 0.5, 0.5));
        bodies[_bodyStartNo + 1] = createCompleteNode("BallJoint", stickMaterial, new f.MeshCube(), 0.5, f.PHYSICS_TYPE.DYNAMIC, f.PHYSICS_GROUP.GROUP_1);
        hierarchy.appendChild(bodies[_bodyStartNo + 1]);
        bodies[_bodyStartNo + 1].mtxLocal.translate(new f.Vector3(_position.x, _position.y + _height, _position.z));
        bodies[_bodyStartNo + 1].mtxLocal.scale(new f.Vector3(0.3, 1.5, 0.3));
        let hingeJoint = new f.ComponentJointRevolute(bodies[_bodyStartNo].getComponent(f.ComponentRigidbody), bodies[_bodyStartNo + 1].getComponent(f.ComponentRigidbody), new f.Vector3(1, 0, 0));
        bodies[_bodyStartNo].addComponent(hingeJoint);
        hingeJoint.springDamping = 0.9;
    }
    //Spawn a object that is signaling a fresh bounce on the ground - Lesson Collision Events - Impulses
    function spawnDecoObjectOnSpot(_position, _impulseStrength = 0) {
        let _node = createStandardFudgeNode("Deko", boardDefault, new f.MeshCube());
        _node.mtxLocal.translate(_position);
        _node.mtxLocal.scale(new f.Vector3(0.1, _impulseStrength / 10, 0.1));
        hierarchy.addChild(_node);
        window.setTimeout(despawnDecoObject, 1000, _node);
    }
    //Remove the child against after a while (not performant, should use object pooling but that is not part of the lesson)
    function despawnDecoObject(_node) {
        hierarchy.removeChild(_node);
    }
    //Simple Raycast that is checking the speed of the passing ball on the basketring - Lesson Raycast
    function raycastSpeedTest() {
        let origin = new f.Vector3(0, 3.15, -6.775);
        let rayHit = f.Physics.raycast(origin, new f.Vector3(0, 0, 1), 1.5);
        if (rayHit.hit && rayHit.rigidbodyComponent.getContainer().name == "Basketball") {
            lastSpeed = ball.getVelocity().magnitude;
            goalCounter.textContent = "Points: " + points.toString() + " / Speed: " + lastSpeed.toFixed(2);
        }
    }
    //#region Event Handling
    //Register a triggering event - Lesson Trigger Events
    function goalCheckEnter(_event) {
        if (_event.cmpRigidbody.getContainer().name == "Basketball") {
            bodies[10].getComponent(f.ComponentMaterial).material = boardGoal;
            points += 100;
            goalCounter.textContent = "Points: " + points.toString() + " / Speed: " + lastSpeed.toFixed(2);
        }
    }
    function goalCheckExit(_event) {
        if (_event.cmpRigidbody.getContainer().name == "Basketball") {
            bodies[10].getComponent(f.ComponentMaterial).material = boardDefault;
        }
    }
    //Register a collision of a body with the ground - Lesson Collision Events
    function groundColEnter(_event) {
        if (_event.cmpRigidbody.getContainer().name == "Basketball") {
            spawnDecoObjectOnSpot(_event.collisionPoint, _event.normalImpulse);
        }
    }
    function targetColEnter(_event) {
        if (_event.cmpRigidbody.getContainer().name == "Basketball") {
            points += 50;
            goalCounter.textContent = "Points: " + points.toString() + " / Speed: " + lastSpeed.toFixed(2);
        }
    }
    //#endregion
})(Turorials_FUDGEPhysics_Lesson1 || (Turorials_FUDGEPhysics_Lesson1 = {}));
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiTWFpbi5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIk1haW4udHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtBQUFBLDJEQUEyRDtBQUMzRCxJQUFPLENBQUMsR0FBRyxTQUFTLENBQUM7QUFDckIsOEdBQThHO0FBRTlHLElBQVUsOEJBQThCLENBaVV2QztBQW5VRCw4R0FBOEc7QUFFOUcsV0FBVSw4QkFBOEI7SUFFdEMscUlBQXFJO0lBRXJJLHVCQUF1QjtJQUN2QixNQUFNLENBQUMsZ0JBQWdCLENBQUMsTUFBTSxFQUFFLElBQUksQ0FBQyxDQUFDO0lBQ3RDLE1BQU0sR0FBRyxHQUFzQixRQUFRLENBQUMsYUFBYSxDQUFDLFFBQVEsQ0FBQyxDQUFDLENBQUMsK0NBQStDO0lBQ2hILElBQUksV0FBVyxHQUFnQixRQUFRLENBQUMsY0FBYyxDQUFDLGVBQWUsQ0FBQyxDQUFDO0lBQ3hFLElBQUksUUFBb0IsQ0FBQyxDQUFDLDBCQUEwQjtJQUNwRCxJQUFJLFNBQWlCLENBQUMsQ0FBQywyQkFBMkI7SUFDbEQsSUFBSSxTQUE0QixDQUFDLENBQUMsOENBQThDO0lBR2hGLGtCQUFrQjtJQUNsQixJQUFJLE1BQU0sR0FBYSxJQUFJLEtBQUssRUFBRSxDQUFDLENBQUMsdUVBQXVFO0lBQzNHLElBQUksSUFBSSxHQUF5QixJQUFJLENBQUMsQ0FBQyw4QkFBOEI7SUFHckUsbUJBQW1CO0lBR25CLHlCQUF5QjtJQUN6QixJQUFJLFNBQVMsR0FBYyxJQUFJLENBQUMsQ0FBQyxPQUFPLENBQUMsQ0FBQyxFQUFFLEdBQUcsRUFBRSxDQUFDLENBQUMsQ0FBQztJQUNwRCxJQUFJLGFBQXdCLENBQUM7SUFDN0IsSUFBSSxXQUFzQixDQUFDO0lBQzNCLElBQUksV0FBVyxHQUFXLElBQUksQ0FBQztJQUMvQixJQUFJLE1BQU0sR0FBVyxDQUFDLENBQUM7SUFDdkIsSUFBSSxTQUFTLEdBQVcsQ0FBQyxDQUFDO0lBRTFCLFdBQVc7SUFDWCxJQUFJLFlBQVksR0FBZSxJQUFJ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QUMsR0FBRyxFQUFFLElBQUksRUFBRSxJQUFJLENBQUMsQ0FBQyxDQUFDO1FBQ3hFLFNBQVMsQ0FBQyxXQUFXLENBQUMsTUFBTSxDQUFDLFlBQVksR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDO1FBQ2hELE1BQU0sQ0FBQyxZQUFZLEdBQUcsQ0FBQyxDQUFDLEdBQUcsa0JBQWtCLENBQUMsY0FBYyxFQUFFLGNBQWMsRUFBRSxJQUFJLENBQUMsQ0FBQyxRQUFRLEVBQUUsRUFBRSxDQUFDLEVBQUUsQ0FBQyxDQUFDLFlBQVksQ0FBQyxNQUFNLENBQUMsQ0FBQztRQUMxSCxNQUFNLENBQUMsWUFBWSxHQUFHLENBQUMsQ0FBQyxDQUFDLFFBQVEsQ0FBQyxTQUFTLENBQUMsSUFBSSxDQUFDLENBQUMsT0FBTyxDQUFDLGNBQWMsQ0FBQyxDQUFDLEVBQUUsY0FBYyxDQUFDLENBQUMsR0FBRyxJQUFJLEVBQUUsY0FBYyxDQUFDLENBQUMsR0FBRyxLQUFLLENBQUMsQ0FBQyxDQUFDO1FBQ2hJLE1BQU0sQ0FBQyxZQUFZLEdBQUcsQ0FBQyxDQUFDLENBQUMsUUFBUSxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUMsQ0FBQyxPQUFPLENBQUMsSUFBSSxFQUFFLElBQUksRUFBRSxHQUFHLENBQUMsQ0FBQyxDQUFDO1FBQ3hFLFNBQVMsQ0FBQyxXQUFXLENBQUMsTUFBTSxDQUFDLFlBQVksR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDO1FBQ2hELE1BQU0sQ0FBQyxZQUFZLEdBQUcsQ0FBQyxDQUFDLEdBQUcsa0JBQWtCLENBQUMsWUFBWSxFQUFFLFlBQVksRUFBRSxJQUFJLENBQUMsQ0FBQyxRQUFRLEVBQUUsRUFBRSxDQUFDLEVBQUUsQ0FBQyxDQUFDLFlBQVksQ0FBQyxNQUFNLENBQUMsQ0FBQztRQUN0SCxNQUFNLENBQUMsWUFBWSxHQUFHLENBQUMsQ0FBQyxDQUFDLFFBQVEsQ0FBQyxTQUFTLENBQUMsSUFBSSxDQUFDLENBQUMsT0FBTyxDQUFDLGNBQWMsQ0FBQyxDQUFDLEVBQUUsY0FBYyxDQUFDLENBQUMsR0FBRyxJ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QUFXLENBQUMsV0FBVyxHQUFHLFVBQVUsR0FBRyxNQUFNLENBQUMsUUFBUSxFQUFFLEdBQUcsWUFBWSxHQUFHLFNBQVMsQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDLENBQUM7U0FDaEc7SUFDSCxDQUFDO0lBQ0QsWUFBWTtBQUVkLENBQUMsRUFqVVMsOEJBQThCLEtBQTlCLDhCQUE4QixRQWlVdkMiLCJzb3VyY2VzQ29udGVudCI6WyIvLy88cmVmZXJlbmNlIHR5cGVzPVwiLi4vLi4vLi4vLi4vQ29yZS9CdWlsZC9GdWRnZUNvcmUuanNcIi8+XHJcbmltcG9ydCBmID0gRnVkZ2VDb3JlO1xyXG4vL1JlZmVyZW5jZSBGdWRnZSwgZ2V0dGluZyBjb2RlIGNvbXBsZXRpb24gcmVhZHkgYW5kIGNyZWF0aW5nIGEgc2hvcnRjdXQgZiB0byB3cml0ZSBGdWRnZUNvZGUgbW9yZSBjb21mb3J0YWJseVxyXG5cclxubmFtZXNwYWNlIFR1cm9yaWFsc19GVURHRVBoeXNpY3NfTGVzc29uMSB7XHJcblxyXG4gIC8vR09BTDogTGVhcm5pbmcgdG8gdXNlIHRoZSBwaHlzaWNhbCByYXljYXN0IHRvIGludGVyYWN0IHdpdGggb2JqZWN0cy4gRGlmZmVyZW50IG1ldGhvZCB0aGFuIHRoZSBzdGFuZGFyZCBGdWRnZSBEZXB0aCBUZXh0dXJlIFJheWNhc3RcclxuXHJcbiAgLy9GdWRnZSBCYXNpYyBWYXJpYWJsZXNcclxuICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcImxvYWRcIiwgaW5pdCk7XHJcbiAgY29uc3QgYXBwOiBIVE1MQ2FudmFzRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCJjYW52YXNcIik7IC8vIFRoZSBodG1sIGVsZW1lbnQgd2hlcmUgdGhlIHNjZW5lIGlzIGRyYXduIHRvXHJcbiAgbGV0IGdvYWxDb3VudGVyOiBIVE1MRWxlbWVudCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwicG9pbnRzQ291bnRlclwiKTtcclxuICBsZXQgdmlld1BvcnQ6IGYuVmlld3BvcnQ7IC8vIFRoZSBzY2VuZSB2aXN1YWxpemF0aW9uXHJcbiAgbGV0IGhpZXJhcmNoeTogZi5Ob2RlOyAvLyBZb3UncmUgb2JqZWN0IHNjZW5lIHRyZWVcclxuICBsZXQgY21wQ2FtZXJhOiBmLkNvbXBvbmVudENhbWVyYTsgLy9UaGUgY2FtZXJhIGluIHRoZSBzY2VuZSB0byBzaG90IHRoZSByYXkgZnJvbVxyXG5cclxuXHJcbiAgLy9QaHlzaWNhbCBPYmplY3RzXHJcbiAgbGV0IGJvZGllczogZi5Ob2RlW10gPSBuZXcgQXJyYXkoKTsgLy8gQXJyYXkgb2YgYWxsIHBoeXNpY2FsIG9iamVjdHMgaW4gdGhlIHNjZW5lIHRvIGhhdmUgYSBxdWljayByZWZlcmVuY2VcclxuICBsZXQgYmFsbDogZi5Db21wb25lbnRSaWdpZGJvZHkgPSBudWxsOyAvL1RoZSBCYWxsIHdlIGFyZSBwbGF5aW5nIHdpdGhcclxuXHJcblxyXG4gIC8vU2V0dGluZyBWYXJpYWJsZXNcclxuXHJcblxyXG4gIC8vTWlzY2VsbGFuZW91cyBWYXJpYWJsZXNcclxuICBsZXQgYmFsbFN0YXJ0OiBmLlZlY3RvcjMgPSBuZXcgZi5WZWN0b3IzKDAsIDEuNSwgMyk7XHJcbiAgbGV0IHN0YXJ0UG9zaXRpb246IGYuVmVjdG9yMjtcclxuICBsZXQgZW5kUG9zaXRpb246IGYuVmVjdG9yMjtcclxuICBsZXQgcGxheWVyRm9yY2U6IG51bWJlciA9IDUwMDA7XHJcbiAgbGV0IHBvaW50czogbnVtYmVyID0gMDtcclxuICBsZXQgbGFzdFNwZWVkOiBudW1iZXIgPSAwO1xyXG5cclxuICAvL01hdGVyaWFsc1xyXG4gIGxldCBib2FyZERlZmF1bHQ6IGYuTWF0ZXJpYWwgPSBuZXcgZi5NYXRlcmlhbChcIkJvYXJkXCIsIGYuU2hhZGVyRmxhdCwgbmV3IGYuQ29hdENvbG9yZWQobmV3IGYuQ29sb3IoMC44NSwgMC45NSwgMC44NSwgMSkpKTtcclxuICBsZXQgYm9hcmRHb2FsOiBmLk1hdGVyaWFsID0gbmV3IGYuTWF0ZXJpYWwoXCJCb2FyZEdvYWxcIiwgZi5TaGFkZXJGbGF0LCBuZXcgZi5Db2F0Q29sb3JlZChuZXcgZi5Db2xvcigwLjIsIDAuOTUsIDAuMiwgMSkpKTtcclxuICBsZXQgZ3JvdW5kTWF0ZXJpYWw6IGYuTWF0ZXJpYWwgPSBuZXcgZi5NYXRlcmlhbChcIkdyb3VuZFwiLCBmLlNoYWRlckZsYXQsIG5ldyBmLkNvYXRDb2xvcmVkKG5ldyBmLkNvbG9yKDAuMiwgMC4yLCAwLjIsIDEpKSk7XHJcblxyXG4gIC8vRnVuY3Rpb24gdG8gaW5pdGlhbGl6ZSB0aGUgRnVkZ2UgU2NlbmUgd2l0aCBhIGNhbWVyYSwgbGlnaHQsIHZpZXdwb3J0IGFuZCBQSFlTQ0lBTCBPYmplY3RzXHJcbiAgZnVuY3Rpb24gaW5pdChfZXZlbnQ6IEV2ZW50KTogdm9pZCB7XHJcblxyXG4gICAgaGllcmFyY2h5ID0gbmV3IGYuTm9kZShcIlNjZW5lXCIpOyAvL2NyZWF0ZSB0aGUgcm9vdCBOb2RlIHdoZXJlIGV2ZXJ5IG9iamVjdCBpcyBwYXJlbnRlZCB0by4gU2hvdWxkIG5ldmVyIGJlIGNoYW5nZWRcclxuXHJcbiAgICAvLyNyZWdpb24gUGh5c2ljc1xyXG4gICAgLy9QSFlTSUNTIC0gQmFzaWMgUGxhbmUgYW5kIEN1YmVcclxuICAgIC8vQ3JlYXRpbmcgYSBwaHlzaWNhbGx5IHN0YXRpYyBncm91bmQgcGxhbmUgZm9yIG91ciBwaHlzaWNzIHBsYXlncm91bmQuIEEgc2ltcGxlIHNjYWxlZCBjdWJlIGJ1dCB3aXRoIHBoeXNpY3MgdHlwZSBzZXQgdG8gc3RhdGljXHJcbiAgICBib2RpZXNbMF0gPSBjcmVhdGVDb21wbGV0ZU5vZGUoXCJHcm91bmRcIiwgZ3JvdW5kTWF0ZXJpYWwsIG5ldyBmLk1lc2hDdWJlKCksIDAsIGYuUEhZU0lDU19UWVBFLlNUQVRJQyk7XHJcbiAgICBib2RpZXNbMF0ubXR4TG9jYWwuc2NhbGUobmV3IGYuVmVjdG9yMygxNCwgMC4zLCAxNCkpOyAvL1NjYWxlIHRoZSBib2R5IHdpdGggaXQncyBzdGFuZGFyZCBDb21wb25lbnRUcmFuc2Zvcm1cclxuICAgIGJvZGllc1swXS5nZXRDb21wb25lbnQoZi5Db21wb25lbnRSaWdpZGJvZHkpLnJlc3RpdHV0aW9uID0gMC41O1xyXG4gICAgaGllcmFyY2h5LmFwcGVuZENoaWxkKGJvZGllc1swXSk7IC8vQWRkIHRoZSBub2RlIHRvIHRoZSBzY2VuZSBieSBhZGRpbmcgaXQgdG8gdGhlIHNjZW5lLXJvb3RcclxuXHJcbiAgICAvL0JhY2t3YWxscyAtIFNvIGN1YmVzIGFyZSBub3QgcHVzaGVkIGF3YXkgZWFzaWx5XHJcbiAgICBib2RpZXNbMV0gPSBjcmVhdGVDb21wbGV0ZU5vZGUoXCJXYWxsQmFja1wiLCBncm91bmRNYXRlcmlhbCwgbmV3IGYuTWVzaEN1YmUoKSwgMCwgZi5QSFlTSUNTX1RZUEUuU1RBVElDKTtcclxuICAgIGJvZGllc1sxXS5tdHhMb2NhbC50cmFuc2xhdGUobmV3IGYuVmVjdG9yMygwLCAtNywgLTcuNSkpO1xyXG4gICAgYm9kaWVzWzFdLm10eExvY2FsLnNjYWxlKG5ldyBmLlZlY3RvcjMoMTQsIDAuMywgMTUpKTtcclxuICAgIGJvZGllc1sxXS5tdHhMb2NhbC5yb3RhdGVYKDkwLCB0cnVlKTtcclxuICAgIGhpZXJhcmNoeS5hcHBlbmRDaGlsZChib2RpZXNbMV0pO1xyXG5cclxuICAgIGJvZGllc1syXSA9IGNyZWF0ZUNvbXBsZXRlTm9kZShcIldhbGxMZWZ0XCIsIGdyb3VuZE1hdGVyaWFsLCBuZXcgZi5NZXNoQ3ViZSgpLCAwLCBmLlBIWVNJQ1NfVFlQRS5TVEFUSUMpO1xyXG4gICAgYm9kaWVzWzJdLm10eExvY2FsLnRyYW5zbGF0ZShuZXcgZi5WZWN0b3IzKDcuNSwgNywgMCkpO1xyXG4gICAgYm9kaWVzWzJdLm10eExvY2FsLnNjYWxlKG5ldyBmLlZlY3RvcjMoMTUsIDAuMywgMTQpKTtcclxuICAgIGJvZGllc1syXS5tdHhMb2NhbC5yb3RhdGVaKDkwLCB0cnVlKTtcclxuICAgIGhpZXJhcmNoeS5hcHBlbmRDaGlsZChib2RpZXNbMl0pO1xyXG5cclxuICAgIGJvZGllc1szXSA9IGNyZWF0ZUNvbXBsZXRlTm9kZShcIldhbGxSaWdodFwiLCBncm91bmRNYXRlcmlhbCwgbmV3IGYuTWVzaEN1YmUoKSwgMCwgZi5QSFlTSUNTX1RZUEUuU1RBVElDKTtcclxuICAgIGJvZGllc1szXS5tdHhMb2NhbC50cmFuc2xhdGUobmV3IGYuVmVjdG9yMygtNy41LCA3LCAwKSk7XHJcbiAgICBib2RpZXNbM10ubXR4TG9jYWwuc2NhbGUobmV3IGYuVmVjdG9yMygxNSwgMC4zLCAxNCkpO1xyXG4gICAgYm9kaWVzWzNdLm10eExvY2FsLnJvdGF0ZVooLTkwLCB0cnVlKTtcclxuICAgIGhpZXJhcmNoeS5hcHBlbmRDaGlsZChib2RpZXNbM10pO1xyXG5cclxuICAgIC8vQmFsbFxyXG4gICAgYm9kaWVzWzRdID0gY3JlYXRlQ29tcGxldGVOb2RlKFwiQmFza2V0YmFsbFwiLCBuZXcgZi5NYXRlcmlhbChcIkJhc2tldGJhbGxcIiwgZi5TaGFkZXJGbGF0LCBuZXcgZi5Db2F0Q29sb3JlZChuZXcgZi5Db2xvcigxODEgLyAyNTUsIDY2IC8gMjU1LCAxOSAvIDI1NSkpKSwgbmV3IGYuTWVzaFNwaGVyZSgpLCAwLjY1LCBmLlBIWVNJQ1NfVFlQRS5LSU5FTUFUSUMsIGYuUEhZU0lDU19HUk9VUC5ERUZBVUxULCBmLkNPTExJREVSX1RZUEUuU1BIRVJFKTtcclxuICAgIGJvZGllc1s0XS5tdHhMb2NhbC50cmFuc2xhdGUoYmFsbFN0YXJ0KTtcclxuICAgIGJvZGllc1s0XS5tdHhMb2NhbC5zY2FsZShuZXcgZi5WZWN0b3IzKDAuMjYsIDAuMjYsIDAuMjYpKTsgLy8yNmNtIGRpYW1ldGVyIGJhc2tldGJhbGxcclxuICAgIGhpZXJhcmNoeS5hcHBlbmRDaGlsZChib2RpZXNbNF0pO1xyXG4gICAgYmFsbCA9IGJvZGllc1s0XS5nZXRDb21wb25lbnQoZi5Db21wb25lbnRSaWdpZGJvZHkpO1xyXG4gICAgYmFsbC5yZXN0aXR1dGlvbiA9IDAuOTU7XHJcblxyXG4gICAgY3JlYXRlQ291cnQoNSwgbmV3IGYuVmVjdG9yMygwLCAzLjA1LCAtNikpO1xyXG5cclxuICAgIGNyZWF0ZVNob290YWJsZURlY29yYXRpb24oMTIsIG5ldyBmLlZlY3RvcjMoMywgMC41LCAtMykpO1xyXG4gICAgY3JlYXRlU2hvb3RhYmxlRGVjb3JhdGlvbigxNCwgbmV3IGYuVmVjdG9yMygtMywgMC41LCAtMikpO1xyXG4gICAgY3JlYXRlU2hvb3RhYmxlRGVjb3JhdGlvbigxNiwgbmV3IGYuVmVjdG9yMygtMiwgNCwgLTQpLCAtMSk7XHJcblxyXG4gICAgLy9BZGQgRXZlbnRzIHRvIG91ciB0cmlnZ2VyIGFuZCBjb2xsaWRlcnNcclxuICAgIGJvZGllc1sxMV0uZ2V0Q29tcG9uZW50KGYuQ29tcG9uZW50UmlnaWRib2R5KS5hZGRFdmVudExpc3RlbmVyKGYuRVZFTlRfUEhZU0lDUy5UUklHR0VSX0VOVEVSLCBnb2FsQ2hlY2tFbnRlcik7XHJcbiAgICBib2RpZXNbMTFdLmdldENvbXBvbmVudChmLkNvbXBvbmVudFJpZ2lkYm9keSkuYWRkRXZlbnRMaXN0ZW5lcihmLkVWRU5UX1BIWVNJQ1MuVFJJR0dFUl9FWElULCBnb2FsQ2hlY2tFeGl0KTtcclxuXHJcbiAgICBib2RpZXNbMF0uZ2V0Q29tcG9uZW50KGYuQ29tcG9uZW50UmlnaWRib2R5KS5hZGRFdmVudExpc3RlbmVyKGYuRVZFTlRfUEhZU0lDUy5DT0xMSVNJT05fRU5URVIsIGdyb3VuZENvbEVudGVyKTtcclxuICAgIGJvZGllc1sxM10uZ2V0Q29tcG9uZW50KGYuQ29tcG9uZW50UmlnaWRib2R5KS5hZGRFdmVudExpc3RlbmVyKGYuRVZFTlRfUEhZU0lDUy5DT0xMSVNJT05fRU5URVIsIHRhcmdldENvbEVudGVyKTtcclxuICAgIGJvZGllc1sxNV0uZ2V0Q29tcG9uZW50KGYuQ29tcG9uZW50UmlnaWRib2R5KS5hZGRFdmVudExpc3RlbmVyKGYuRVZFTlRfUEhZU0lDUy5DT0xMSVNJT05fRU5URVIsIHRhcmdldENvbEVudGVyKTtcclxuICAgIGJvZGllc1sxN10uZ2V0Q29tcG9uZW50KGYuQ29tcG9uZW50UmlnaWRib2R5KS5hZGRFdmVudExpc3RlbmVyKGYuRVZFTlRfUEhZU0lDUy5DT0xMSVNJT05fRU5URVIsIHRhcmdldENvbEVudGVyKTtcclxuICAgIC8vI2VuZHJlZ2lvblxyXG5cclxuICAgIGYuUGh5c2ljcy53b3JsZC5zZXRTb2x2ZXJJdGVyYXRpb25zKDE1KTtcclxuXHJcbiAgICAvL1N0YW5kYXJkIEZ1ZGdlIFNjZW5lIEluaXRpYWxpemF0aW9uIC0gQ3JlYXRpbmcgYSBkaXJlY3Rpb25hbCBsaWdodCwgYSBjYW1lcmEgYW5kIGluaXRpYWxpemUgdGhlIHZpZXdwb3J0XHJcbiAgICBsZXQgY21wTGlnaHQ6IGYuQ29tcG9uZW50TGlnaHQgPSBuZXcgZi5Db21wb25lbnRMaWdodChuZXcgZi5MaWdodERpcmVjdGlvbmFsKGYuQ29sb3IuQ1NTKFwiV0hJVEVcIikpKTtcclxuICAgIGNtcExpZ2h0LnBpdm90Lmxvb2tBdChuZXcgZi5WZWN0b3IzKC0wLjUsIC0xLCAtMC44KSk7IC8vU2V0IGxpZ2h0IGRpcmVjdGlvblxyXG4gICAgaGllcmFyY2h5LmFkZENvbXBvbmVudChjbXBMaWdodCk7XHJcblxyXG4gICAgY21wQ2FtZXJhID0gbmV3IGYuQ29tcG9uZW50Q2FtZXJhKCk7XHJcbiAgICBjbXBDYW1lcmEuYmFja2dyb3VuZENvbG9yID0gZi5Db2xvci5DU1MoXCJHUkVZXCIpO1xyXG4gICAgY21wQ2FtZXJhLnBpdm90LnRyYW5zbGF0ZShuZXcgZi5WZWN0b3IzKDAsIDEuNSwgNikpOyAvL0NlbnRlcmVkIENhbWVyYSBhIGxpdHRsZSBiaXQgYmFja3dhcmRzXHJcbiAgICBjbXBDYW1lcmEucGl2b3QubG9va0F0KG5ldyBmLlZlY3RvcjMoMCwgMiwgMCkpOyAvL1NldCB0aGUgY2FtZXJhIG1hdHJpeCBzbyB0aGF0IGl0IGxvb2tzIGF0IHRoZSBiYXNrZXRcclxuXHJcbiAgICB2aWV3UG9ydCA9IG5ldyBmLlZpZXdwb3J0KCk7IC8vQ3JlYXRpbmcgYSB2aWV3cG9ydCB0aGF0IGlzIHJlbmRlcmVkIG9udG8gdGhlIGh0bWwgY2FudmFzIGVsZW1lbnRcclxuICAgIHZpZXdQb3J0LmluaXRpYWxpemUoXCJWaWV3cG9ydFwiLCBoaWVyYXJjaHksIGNtcENhbWVyYSwgYXBwKTsgLy9pbml0aWFsaXplIHRoZSB2aWV3cG9ydCB3aXRoIHRoZSByb290IG5vZGUsIGNhbWVyYSBhbmQgY2FudmFzXHJcblxyXG4gICAgLy9BY3RpdmF0aW5nIGlucHV0IGV2ZW50cyAtIEltcG9ydGFudCBmb3IgdGhpcyBsZXNzb25cclxuICAgIHZpZXdQb3J0LmFjdGl2YXRlUG9pbnRlckV2ZW50KGYuRVZFTlRfUE9JTlRFUi5ET1dOLCB0cnVlKTsgLy9UZWxsIEZ1ZGdlIHRvIHVzZSBpdCdzIGludGVybmFsIG1vdXNlIGV2ZW50IFxyXG4gICAgdmlld1BvcnQuYWRkRXZlbnRMaXN0ZW5lcihmLkVWRU5UX1BPSU5URVIuRE9XTiwgaG5kTW91c2VEb3duKTsgLy9TZXQgd2hhdCBmdW5jdGlvbiBzaG91bGQgcmVjZWl2ZSB0aGUgZXZlbnRcclxuICAgIHZpZXdQb3J0LmFjdGl2YXRlUG9pbnRlckV2ZW50KGYuRVZFTlRfUE9JTlRFUi5VUCwgdHJ1ZSk7XHJcbiAgICB2aWV3UG9ydC5hZGRFdmVudExpc3RlbmVyKGYuRVZFTlRfUE9JTlRFUi5VUCwgaG5kTW91c2VVcCk7XHJcblxyXG4gICAgLy9QaHlzaWNzIEV2ZW50c1xyXG5cclxuICAgIC8vUEhZU0lDUyAtIFN0YXJ0IHVzaW5nIHBoeXNpY3MgYnkgdGVsbGluZyB0aGUgcGh5c2ljcyB0aGUgc2NlbmUgcm9vdCBvYmplY3QuIFBoeXNpY3Mgd2lsbCByZWNhbGN1bGF0ZSBldmVyeSB0cmFuc2Zvcm0gYW5kIGluaXRpYWxpemVcclxuICAgIGYuUGh5c2ljcy5zdGFydChoaWVyYXJjaHkpO1xyXG5cclxuICAgIC8vZi5QaHlzaWNzLnNldHRpbmdzLmRlYnVnRHJhdyA9IHRydWU7IC8vU2VlaW5nIHRoZSBwaHlzaWNhbCBzY2VuZSBpbiBkZWJ1ZyBtb2RlIC0gTGVzc29uIERlYnVnZ2luZ1xyXG5cclxuICAgIC8vSW1wb3J0YW50IHN0YXJ0IHRoZSBnYW1lIGxvb3AgYWZ0ZXIgc3RhcnRpbmcgcGh5c2ljcywgc28gcGh5c2ljcyBjYW4gdXNlIHRoZSBjdXJyZW50IHRyYW5zZm9ybSBiZWZvcmUgaXQncyBmaXJzdCBpdGVyYXRpb25cclxuICAgIGYuTG9vcC5hZGRFdmVudExpc3RlbmVyKGYuRVZFTlQuTE9PUF9GUkFNRSwgdXBkYXRlKTsgLy9UZWxsIHRoZSBnYW1lIGxvb3AgdG8gY2FsbCB0aGUgdXBkYXRlIGZ1bmN0aW9uIG9uIGVhY2ggZnJhbWVcclxuICAgIGYuTG9vcC5zdGFydCgpOyAvL1N0YXJkIHRoZSBnYW1lIGxvb3BcclxuICB9XHJcblxyXG4gIC8vRnVuY3Rpb24gdG8gYW5pbWF0ZS91cGRhdGUgdGhlIEZ1ZGdlIHNjZW5lLCBjb21tb25seSBrbm93biBhcyBnYW1lbG9vcFxyXG4gIGZ1bmN0aW9uIHVwZGF0ZSgpOiB2b2lkIHtcclxuICAgIGYuUGh5c2ljcy53b3JsZC5zaW11bGF0ZSgpOyAvL1BIWVNJQ1MgLSBTaW11bGF0ZSBwaHlzaWNhbCBjaGFuZ2VzIGVhY2ggZnJhbWUsIHBhcmFtZXRlciB0byBzZXQgdGltZSBiZXR3ZWVuIGZyYW1lc1xyXG4gICAgcmF5Y2FzdFNwZWVkVGVzdCgpO1xyXG4gICAgdmlld1BvcnQuZHJhdygpOyAvLyBEcmF3IHRoZSBjdXJyZW50IEZ1ZGdlIFNjZW5lIHRvIHRoZSBjYW52YXNcclxuICB9XHJcblxyXG4gIC8vIEZ1bmN0aW9uIHRvIHF1aWNrbHkgY3JlYXRlIGEgbm9kZSB3aXRoIG11bHRpcGxlIG5lZWRlZCBGdWRnZUNvbXBvbmVudHMsIGluY2x1ZGluZyBhIHBoeXNpY3MgY29tcG9uZW50XHJcbiAgZnVuY3Rpb24gY3JlYXRlQ29tcGxldGVOb2RlKF9uYW1lOiBzdHJpbmcsIF9tYXRlcmlhbDogZi5NYXRlcmlhbCwgX21lc2g6IGYuTWVzaCwgX21hc3M6IG51bWJlciwgX3BoeXNpY3NUeXBlOiBmLlBIWVNJQ1NfVFlQRSwgX2dyb3VwOiBmLlBIWVNJQ1NfR1JPVVAgPSBmLlBIWVNJQ1NfR1JPVVAuREVGQVVMVCwgX2NvbFR5cGU6IGYuQ09MTElERVJfVFlQRSA9IGYuQ09MTElERVJfVFlQRS5DVUJFKTogZi5Ob2RlIHtcclxuICAgIC8vU3RhbmRhcmQgRnVkZ2UgTm9kZSBDcmVhdGlvblxyXG4gICAgbGV0IG5vZGU6IGYuTm9kZSA9IG5ldyBmLk5vZGUoX25hbWUpOyAvL0NyZWF0aW5nIHRoZSBub2RlXHJcbiAgICBsZXQgY21wTWVzaDogZi5Db21wb25lbnRNZXNoID0gbmV3IGYuQ29tcG9uZW50TWVzaChfbWVzaCk7IC8vQ3JlYXRpbmcgYSBtZXNoIGZvciB0aGUgbm9kZVxyXG4gICAgbGV0IGNtcE1hdGVyaWFsOiBmLkNvbXBvbmVudE1hdGVyaWFsID0gbmV3IGYuQ29tcG9uZW50TWF0ZXJpYWwoX21hdGVyaWFsKTsgLy9DcmVhdGluZyBhIG1hdGVyaWFsIGZvciB0aGUgbm9kZVxyXG4gICAgbGV0IGNtcFRyYW5zZm9ybTogZi5Db21wb25lbnRUcmFuc2Zvcm0gPSBuZXcgZi5Db21wb25lbnRUcmFuc2Zvcm0oKTsgIC8vVHJhbnNmb3JtIGhvbGRpbmcgcG9zaXRpb24vcm90YXRpb24vc2NhbGluZyBvZiB0aGUgbm9kZVxyXG4gICAgbGV0IGNtcFJpZ2lkYm9keTogZi5Db21wb25lbnRSaWdpZGJvZHkgPSBuZXcgZi5Db21wb25lbnRSaWdpZGJvZHkoX21hc3MsIF9waHlzaWNzVHlwZSwgX2NvbFR5cGUsIF9ncm91cCk7IC8vQWRkaW5nIGEgcGh5c2ljYWwgYm9keSBjb21wb25lbnQgdG8gdXNlIHBoeXNpY3NcclxuXHJcbiAgICBub2RlLmFkZENvbXBvbmVudChjbXBNZXNoKTtcclxuICAgIG5vZGUuYWRkQ29tcG9uZW50KGNtcE1hdGVyaWFsKTtcclxuICAgIG5vZGUuYWRkQ29tcG9uZW50KGNtcFRyYW5zZm9ybSk7XHJcbiAgICBub2RlLmFkZENvbXBvbmVudChjbXBSaWdpZGJvZHkpOyAvLyA8LS0gYmVzdCBwcmFjdGljZSB0byBhZGQgcGh5c2ljcyBjb21wb25lbnQgbGFzdFxyXG4gICAgcmV0dXJuIG5vZGU7XHJcbiAgfVxyXG5cclxuICAvL0NyZWF0aW5nIGEgbm9kZSB3aXRob3V0IGFueSBwaHlzaWNzXHJcbiAgZnVuY3Rpb24gY3JlYXRlU3RhbmRhcmRGdWRnZU5vZGUoX25hbWU6IHN0cmluZywgX21hdGVyaWFsOiBmLk1hdGVyaWFsLCBfbWVzaDogZi5NZXNoKTogZi5Ob2RlIHtcclxuICAgIGxldCBub2RlOiBmLk5vZGUgPSBuZXcgZi5Ob2RlKF9uYW1lKTsgLy9DcmVhdGluZyB0aGUgbm9kZVxyXG4gICAgbGV0IGNtcE1lc2g6IGYuQ29tcG9uZW50TWVzaCA9IG5ldyBmLkNvbXBvbmVudE1lc2goX21lc2gpOyAvL0NyZWF0aW5nIGEgbWVzaCBmb3IgdGhlIG5vZGVcclxuICAgIGxldCBjbXBNYXRlcmlhbDogZi5Db21wb25lbnRNYXRlcmlhbCA9IG5ldyBmLkNvbXBvbmVudE1hdGVyaWFsKF9tYXRlcmlhbCk7IC8vQ3JlYXRpbmcgYSBtYXRlcmlhbCBmb3IgdGhlIG5vZGVcclxuICAgIGxldCBjbXBUcmFuc2Zvcm06IGYuQ29tcG9uZW50VHJhbnNmb3JtID0gbmV3IGYuQ29tcG9uZW50VHJhbnNmb3JtKCk7ICAvL1RyYW5zZm9ybSBob2xkaW5nIHBvc2l0aW9uL3JvdGF0aW9uL3NjYWxpbmcgb2YgdGhlIG5vZGVcclxuICAgIG5vZGUuYWRkQ29tcG9uZW50KGNtcE1lc2gpO1xyXG4gICAgbm9kZS5hZGRDb21wb25lbnQoY21wTWF0ZXJpYWwpO1xyXG4gICAgbm9kZS5hZGRDb21wb25lbnQoY21wVHJhbnNmb3JtKTtcclxuICAgIHJldHVybiBub2RlO1xyXG4gIH1cclxuXHJcbiAgLy9XaGF0IGhhcHBlbnMgd2hlbiB0aGUgbGVmdCBtb3VzZSBidXR0b24gaXMgcHJlc3NlZFxyXG4gIGZ1bmN0aW9uIGhuZE1vdXNlRG93bihfZXZlbnQ6IGYuRXZlbnRQb2ludGVyKSB7XHJcbiAgICByZXNldEJhbGwoKTtcclxuICAgIHN0YXJ0UG9zaXRpb24gPSB2aWV3UG9ydC5wb2ludENsaWVudFRvUHJvamVjdGlvbihuZXcgZi5WZWN0b3IyKF9ldmVudC5wb2ludGVyWCwgX2V2ZW50LnBvaW50ZXJZKSk7XHJcbiAgfVxyXG5cclxuICAvL1doYXQgaGFwcGVucyB3aGVuIHRoZSBsZWZ0IG1vdXNlIGJ1dHRvbiBpcyByZWxlYXNlZFxyXG4gIGZ1bmN0aW9uIGhuZE1vdXNlVXAoX2V2ZW50OiBmLkV2ZW50UG9pbnRlcikge1xyXG4gICAgZW5kUG9zaXRpb24gPSB2aWV3UG9ydC5wb2ludENsaWVudFRvUHJvamVjdGlvbihuZXcgZi5WZWN0b3IyKF9ldmVudC5wb2ludGVyWCwgX2V2ZW50LnBvaW50ZXJZKSk7XHJcbiAgICBsZXQgeERpcmVjdGlvbjogbnVtYmVyID0gc3RhcnRQb3NpdGlvbi54IC0gZW5kUG9zaXRpb24ueDtcclxuICAgIGxldCBmb3J3YXJkVXBTdHJlbmd0aDogbnVtYmVyID0gc3RhcnRQb3NpdGlvbi55IC0gZW5kUG9zaXRpb24ueTtcclxuICAgIGxldCBkaWZmZXJlbmNlVmVjdG9yOiBmLlZlY3RvcjIgPSBmLlZlY3RvcjIuRElGRkVSRU5DRShzdGFydFBvc2l0aW9uLCBlbmRQb3NpdGlvbik7XHJcbiAgICBsZXQgcG93ZXI6IG51bWJlciA9IGRpZmZlcmVuY2VWZWN0b3IubWFnbml0dWRlICogcGxheWVyRm9yY2U7XHJcbiAgICB0aHJvd0JhbGwoeERpcmVjdGlvbiwgZm9yd2FyZFVwU3RyZW5ndGgsIHBvd2VyKTtcclxuICB9XHJcblxyXG4gIGZ1bmN0aW9uIHRocm93QmFsbChfeERpcmVjdGlvbjogbnVtYmVyLCBfZm9yd2FyZFVwU3RyZW5ndGg6IG51bWJlciwgX3Bvd2VyOiBudW1iZXIpIHtcclxuICAgIGJhbGwucGh5c2ljc1R5cGUgPSBmLlBIWVNJQ1NfVFlQRS5EWU5BTUlDOyAvL21ha2UgYmFsbCBsaXN0ZW5pbmcgdG8gcGh5c2ljcyBhZ2FpblxyXG4gICAgYmFsbC5hcHBseUZvcmNlKG5ldyBmLlZlY3RvcjMoLV94RGlyZWN0aW9uICogX3Bvd2VyICogMC44LCBfcG93ZXIgKiAtX2ZvcndhcmRVcFN0cmVuZ3RoICogMC44LCBfZm9yd2FyZFVwU3RyZW5ndGggKiBfcG93ZXIpKTsgLy90aHJvdyB0aGUgYmFsbCB3aXRoIGZvcmNlc1xyXG4gICAgYmFsbC5hcHBseVRvcnF1ZShuZXcgZi5WZWN0b3IzKC0wLjAwMDUgKiBfcG93ZXIsIDAsIDApKTsgLy9KdXN0IGFkZCBhIHRhZCBiaXQgb2Ygcm90YXRpb25hbCBmb3JjZSB0byBtYWtlIGl0IHZpc3VhbGx5IG1vcmUgcmVhbGlzdGljXHJcbiAgfVxyXG5cclxuICBmdW5jdGlvbiByZXNldEJhbGwoKSB7XHJcbiAgICAvL2JhbGwuc2V0UG9zaXRpb24oYmFsbFN0YXJ0KTsgPC0tIFBvc2l0aW9uIGNhbid0IGJlIHNldCBieSBwaHlzaWNzIHNpbmNlIHlvdSBtYWtlIHRoZSBiYWxsIGtpbmVtYXRpYyBpbiB0aGUgc2FtZSBmcmFtZVxyXG4gICAgYmFsbC5nZXRDb250YWluZXIoKS5tdHhMb2NhbC50cmFuc2xhdGlvbiA9IGJhbGxTdGFydDsgLy8gS2luZW1hdGljIG9iamVjdHMgbmVlZCB0byBiZSBzZXQgdGhyb3VnaCBub3JtYWwgdHJhbnNmb3JtXHJcbiAgICBiYWxsLmdldENvbnRhaW5lcigpLm10eExvY2FsLnJvdGF0aW9uID0gZi5WZWN0b3IzLlpFUk8oKTtcclxuICAgIGJhbGwuc2V0VmVsb2NpdHkobmV3IGYuVmVjdG9yMygwLCAwLCAwKSk7XHJcbiAgICBiYWxsLnNldEFuZ3VsYXJWZWxvY2l0eShuZXcgZi5WZWN0b3IzKDAsIDAsIDApKTtcclxuICAgIGJhbGwucGh5c2ljc1R5cGUgPSBmLlBIWVNJQ1NfVFlQRS5LSU5FTUFUSUM7XHJcbiAgfVxyXG5cclxuICAvL0NyZWF0aW5nIGEgYmFza2V0IGFuZCBhIGJvYXJkIHdpdGggc29tZSBkZWNvcmF0aW9uIC0gNyBuZXcgYm9kaWVzXHJcbiAgZnVuY3Rpb24gY3JlYXRlQ291cnQoX2JvZHlTdGFydE5vOiBudW1iZXIsIF9wb3NpdGlvbjogZi5WZWN0b3IzKSB7XHJcbiAgICBsZXQgbWF0ZXJpYWxCYXNrZXQ6IGYuTWF0ZXJpYWwgPSBuZXcgZi5NYXRlcmlhbChcIkJhc2tldFwiLCBmLlNoYWRlckZsYXQsIG5ldyBmLkNvYXRDb2xvcmVkKG5ldyBmLkNvbG9yKDAuOSwgMC4yLCAwLjIsIDEpKSk7XHJcbiAgICBsZXQgYmFza2V0UG9zaXRpb246IGYuVmVjdG9yMyA9IF9wb3NpdGlvbjtcclxuICAgIC8vQmFza2V0IC0gU3F1YXJlIC0gTm90IGNvbXBsZXRseSByZWFsIHZhbHVlcyBvZiBjb3Vyc2Ugc2luY2UgaXQncyBubyBjaXJjbGVcclxuICAgIGJvZGllc1tfYm9keVN0YXJ0Tm9dID0gY3JlYXRlQ29tcGxldGVOb2RlKFwiQmFza2V0QmFja1wiLCBtYXRlcmlhbEJhc2tldCwgbmV3IGYuTWVzaEN1YmUoKSwgMCwgZi5QSFlTSUNTX1RZUEUuU1RBVElDKTtcclxuICAgIGJvZGllc1tfYm9keVN0YXJ0Tm9dLm10eExvY2FsLnRyYW5zbGF0ZShuZXcgZi5WZWN0b3IzKGJhc2tldFBvc2l0aW9uLngsIGJhc2tldFBvc2l0aW9uLnksIGJhc2tldFBvc2l0aW9uLnopKTtcclxuICAgIGJvZGllc1tfYm9keVN0YXJ0Tm9dLm10eExvY2FsLnNjYWxlKG5ldyBmLlZlY3RvcjMoMC42LCAwLjA1LCAwLjE1KSk7XHJcbiAgICBoaWVyYXJjaHkuYXBwZW5kQ2hpbGQoYm9kaWVzW19ib2R5U3RhcnROb10pO1xyXG4gICAgYm9kaWVzW19ib2R5U3RhcnRObyArIDFdID0gY3JlYXRlQ29tcGxldGVOb2RlKFwiQmFza2V0U2lkZVwiLCBtYXRlcmlhbEJhc2tldCwgbmV3IGYuTWVzaEN1YmUoKSwgMCwgZi5QSFlTSUNTX1RZUEUuU1RBVElDKTtcclxuICAgIGJvZGllc1tfYm9keVN0YXJ0Tm8gKyAxXS5tdHhMb2NhbC50cmFuc2xhdGUobmV3IGYuVmVjdG9yMyhiYXNrZXRQb3NpdGlvbi54ICsgMC4zLCBiYXNrZXRQb3NpdGlvbi55LCBiYXNrZXRQb3NpdGlvbi56IC0gMC4zKSk7XHJcbiAgICBib2RpZXNbX2JvZHlTdGFydE5vICsgMV0ubXR4TG9jYWwuc2NhbGUobmV3IGYuVmVjdG9yMygwLjE1LCAwLjA1LCAwLjYpKTtcclxuICAgIGhpZXJhcmNoeS5hcHBlbmRDaGlsZChib2RpZXNbX2JvZHlTdGFydE5vICsgMV0pO1xyXG4gICAgYm9kaWVzW19ib2R5U3RhcnRObyArIDJdID0gY3JlYXRlQ29tcGxldGVOb2RlKFwiQmFza2V0U2lkZVwiLCBtYXRlcmlhbEJhc2tldCwgbmV3IGYuTWVzaEN1YmUoKSwgMCwgZi5QSFlTSUNTX1RZUEUuU1RBVElDKTtcclxuICAgIGJvZGllc1tfYm9keVN0YXJ0Tm8gKyAyXS5tdHhMb2NhbC50cmFuc2xhdGUobmV3IGYuVmVjdG9yMyhiYXNrZXRQb3NpdGlvbi54IC0gMC4zLCBiYXNrZXRQb3NpdGlvbi55LCBiYXNrZXRQb3NpdGlvbi56IC0gMC4zKSk7XHJcbiAgICBib2RpZXNbX2JvZHlTdGFydE5vICsgMl0ubXR4TG9jYWwuc2NhbGUobmV3IGYuVmVjdG9yMygwLjE1LCAwLjA1LCAwLjYpKTtcclxuICAgIGhpZXJhcmNoeS5hcHBlbmRDaGlsZChib2RpZXNbX2JvZHlTdGFydE5vICsgMl0pO1xyXG4gICAgYm9kaWVzW19ib2R5U3RhcnRObyArIDNdID0gY3JlYXRlQ29tcGxldGVOb2RlKFwiQmFza2V0RnJvbnRcIiwgbWF0ZXJpYWxCYXNrZXQsIG5ldyBmLk1lc2hDdWJlKCksIDAsIGYuUEhZU0lDU19UWVBFLlNUQVRJQyk7XHJcbiAgICBib2RpZXNbX2JvZHlTdGFydE5vICsgM10ubXR4TG9jYWwudHJhbnNsYXRlKG5ldyBmLlZlY3RvcjMoYmFza2V0UG9zaXRpb24ueCwgYmFza2V0UG9zaXRpb24ueSwgYmFza2V0UG9zaXRpb24ueiAtIDAuNikpO1xyXG4gICAgYm9kaWVzW19ib2R5U3RhcnRObyArIDNdLm10eExvY2FsLnNjYWxlKG5ldyBmLlZlY3RvcjMoMC42LCAwLjA1LCAwLjE1KSk7XHJcbiAgICBoaWVyYXJjaHkuYXBwZW5kQ2hpbGQoYm9kaWVzW19ib2R5U3RhcnRObyArIDNdKTtcclxuICAgIGJvZGllc1tfYm9keVN0YXJ0Tm8gKyA0XSA9IGNyZWF0ZUNvbXBsZXRlTm9kZShcIkJhc2tldEhvbGRlclwiLCBtYXRlcmlhbEJhc2tldCwgbmV3IGYuTWVzaEN1YmUoKSwgMCwgZi5QSFlTSUNTX1RZUEUuU1RBVElDKTtcclxuICAgIGJvZGllc1tfYm9keVN0YXJ0Tm8gKyA0XS5tdHhMb2NhbC50cmFuc2xhdGUobmV3IGYuVmVjdG9yMyhiYXNrZXRQb3NpdGlvbi54LCBiYXNrZXRQb3NpdGlvbi55IC0gMC4wMSwgYmFza2V0UG9zaXRpb24ueiAtIDAuNzc1KSk7XHJcbiAgICBib2RpZXNbX2JvZHlTdGFydE5vICsgNF0ubXR4TG9jYWwuc2NhbGUobmV3IGYuVmVjdG9yMygwLjE1LCAwLjA1LCAwLjYpKTtcclxuICAgIGhpZXJhcmNoeS5hcHBlbmRDaGlsZChib2RpZXNbX2JvZHlTdGFydE5vICsgNF0pO1xyXG4gICAgYm9kaWVzW19ib2R5U3RhcnRObyArIDVdID0gY3JlYXRlQ29tcGxldGVOb2RlKFwiV2hpdGVCb2FyZFwiLCBib2FyZERlZmF1bHQsIG5ldyBmLk1lc2hDdWJlKCksIDAsIGYuUEhZU0lDU19UWVBFLlNUQVRJQyk7XHJcbiAgICBib2RpZXNbX2JvZHlTdGFydE5vICsgNV0ubXR4TG9jYWwudHJhbnNsYXRlKG5ldyBmLlZlY3RvcjMoYmFza2V0UG9zaXRpb24ueCwgYmFza2V0UG9zaXRpb24ueSArIDAuNDUsIGJhc2tldFBvc2l0aW9uLnogLSAwLjc3NSkpOyAvL0JvYXJkIDE3LjUgY20gZnJvbSBiYXNrZXRcclxuICAgIGJvZGllc1tfYm9keVN0YXJ0Tm8gKyA1XS5tdHhMb2NhbC5zY2FsZShuZXcgZi5WZWN0b3IzKDEuODAsIDEuMDUsIDAuMTUpKTtcclxuICAgIGhpZXJhcmNoeS5hcHBlbmRDaGlsZChib2RpZXNbX2JvZHlTdGFydE5vICsgNV0pO1xyXG5cclxuICAgIC8vQm9hcmQgYmxhY2sgZGVjb3JhdGlvblxyXG4gICAgbGV0IG5vZGU6IGYuTm9kZTsgLy93ZSBkbyBub3QgYWRkIHRoZW0gdG8gYm9kaWVzIHRoZXkgd2lsbCBvbmx5IGJlIGRlY29yYXRpdmUgYW5kIHRoZXJlZm9yZSBub3JtYWwgRnVkZ2Ugbm9kZXNcclxuICAgIGxldCBkZWNvcmF0aW9uTWF0ZXJpYWw6IGYuTWF0ZXJpYWwgPSBuZXcgZi5NYXRlcmlhbChcIkJvYXJkRGVjb1wiLCBmLlNoYWRlckZsYXQsIG5ldyBmLkNvYXRDb2xvcmVkKG5ldyBmLkNvbG9yKDAuMSwgMC4xLCAwLjEsIDEpKSk7XHJcbiAgICBub2RlID0gY3JlYXRlU3RhbmRhcmRGdWRnZU5vZGUoXCJCbGFja1VwcGVyU3RyaXBlXCIsIGRlY29yYXRpb25NYXRlcmlhbCwgbmV3IGYuTWVzaEN1YmUoKSk7XHJcbiAgICBub2RlLm10eExvY2FsLnRyYW5zbGF0ZShuZXcgZi5WZWN0b3IzKGJhc2tldFBvc2l0aW9uLngsIGJhc2tldFBvc2l0aW9uLnkgKyAwLjUsIGJhc2tldFBvc2l0aW9uLnogLSAwLjcyMzUpKTsgLy9Cb2FyZCAxNy41IGNtIGZyb20gYmFza2V0XHJcbiAgICBub2RlLm10eExvY2FsLnNjYWxlKG5ldyBmLlZlY3RvcjMoMC41OSwgMC4wNSwgMC4wNSkpO1xyXG4gICAgaGllcmFyY2h5LmFwcGVuZENoaWxkKG5vZGUpO1xyXG4gICAgbm9kZSA9IGNyZWF0ZVN0YW5kYXJkRnVkZ2VOb2RlKFwiQmxhY2tMb3dlclN0cmlwZVwiLCBkZWNvcmF0aW9uTWF0ZXJpYWwsIG5ldyBmLk1lc2hDdWJlKCkpO1xyXG4gICAgbm9kZS5tdHhMb2NhbC50cmFuc2xhdGUobmV3IGYuVmVjdG9yMyhiYXNrZXRQb3NpdGlvbi54LCBiYXNrZXRQb3NpdGlvbi55ICsgMC4wNSwgYmFza2V0UG9zaXRpb24ueiAtIDAuNzIzNSkpOyAvL0JvYXJkIDE3LjUgY20gZnJvbSBiYXNrZXRcclxuICAgIG5vZGUubXR4TG9jYWwuc2NhbGUobmV3IGYuVmVjdG9yMygwLjU5LCAwLjA1LCAwLjA1KSk7XHJcbiAgICBoaWVyYXJjaHkuYXBwZW5kQ2hpbGQobm9kZSk7XHJcbiAgICBub2RlID0gY3JlYXRlU3RhbmRhcmRGdWRnZU5vZGUoXCJCbGFja0xlZnRTdHJpcGVcIiwgZGVjb3JhdGlvbk1hdGVyaWFsLCBuZXcgZi5NZXNoQ3ViZSgpKTtcclxuICAgIG5vZGUubXR4TG9jYWwudHJhbnNsYXRlKG5ldyBmLlZlY3RvcjMoYmFza2V0UG9zaXRpb24ueCAtIDAuMjcsIGJhc2tldFBvc2l0aW9uLnkgKyAwLjI1LCBiYXNrZXRQb3NpdGlvbi56IC0gMC43MjM1KSk7IC8vQm9hcmQgMTcuNSBjbSBmcm9tIGJhc2tldFxyXG4gICAgbm9kZS5tdHhMb2NhbC5zY2FsZShuZXcgZi5WZWN0b3IzKDAuMDUsIDAuNDUsIDAuMDUpKTtcclxuICAgIGhpZXJhcmNoeS5hcHBlbmRDaGlsZChub2RlKTtcclxuICAgIG5vZGUgPSBjcmVhdGVTdGFuZGFyZEZ1ZGdlTm9kZShcIkJsYWNrUmlnaHRTdHJpcGVcIiwgZGVjb3JhdGlvbk1hdGVyaWFsLCBuZXcgZi5NZXNoQ3ViZSgpKTtcclxuICAgIG5vZGUubXR4TG9jYWwudHJhbnNsYXRlKG5ldyBmLlZlY3RvcjMoYmFza2V0UG9zaXRpb24ueCArIDAuMjcsIGJhc2tldFBvc2l0aW9uLnkgKyAwLjI1LCBiYXNrZXRQb3NpdGlvbi56IC0gMC43MjM1KSk7IC8vQm9hcmQgMTcuNSBjbSBmcm9tIGJhc2tldFxyXG4gICAgbm9kZS5tdHhMb2NhbC5zY2FsZShuZXcgZi5WZWN0b3IzKDAuMDUsIDAuNDUsIDAuMDUpKTtcclxuICAgIGhpZXJhcmNoeS5hcHBlbmRDaGlsZChub2RlKTtcclxuXHJcbiAgICAvL0dvYWxUcmlnZ2VyIC0gU2xpZ2h0bHkgcG9zaXRpb25lZCB1bmRlciB0aGUgYmFza2V0IGVudHJ5IHNvIGl0IG9ubHkgY291bnRzIHdoZW4gaXQgZ29lcyB0aHJvdWdoIGFuZCB2ZXJ5IHNtYWxsXHJcbiAgICBib2RpZXNbX2JvZHlTdGFydE5vICsgNl0gPSBjcmVhdGVDb21wbGV0ZU5vZGUoXCJHb2FsVHJpZ2dlclwiLCBtYXRlcmlhbEJhc2tldCwgbmV3IGYuTWVzaEN1YmUoKSwgMCwgZi5QSFlTSUNTX1RZUEUuU1RBVElDLCBmLlBIWVNJQ1NfR1JPVVAuVFJJR0dFUik7XHJcbiAgICBib2RpZXNbX2JvZHlTdGFydE5vICsgNl0ucmVtb3ZlQ29tcG9uZW50KGJvZGllc1tfYm9keVN0YXJ0Tm8gKyA2XS5nZXRDb21wb25lbnQoZi5Db21wb25lbnRNZXNoKSk7IC8vVHJpZ2dlciBkb2VzIG5vdCBuZWVkIHRvIGJlIHZpc2libGUgc28gcmVtb3ZlIHRoZSBtZXNoIGNvbXBvbmVudFxyXG4gICAgYm9kaWVzW19ib2R5U3RhcnRObyArIDZdLm10eExvY2FsLnRyYW5zbGF0ZShuZXcgZi5WZWN0b3IzKGJhc2tldFBvc2l0aW9uLngsIGJhc2tldFBvc2l0aW9uLnkgLSAwLjA1LCBiYXNrZXRQb3NpdGlvbi56IC0gMC4zKSk7XHJcbiAgICBib2RpZXNbX2JvZHlTdGFydE5vICsgNl0ubXR4TG9jYWwuc2NhbGUobmV3IGYuVmVjdG9yMygwLjEsIDAuMDUsIDAuMSkpO1xyXG4gICAgaGllcmFyY2h5LmFwcGVuZENoaWxkKGJvZGllc1tfYm9keVN0YXJ0Tm8gKyA2XSk7XHJcbiAgfVxyXG5cclxuICAvL1NvbWUgQm9kaWVzIG9uIEpvaW50cyB0aGF0IG1vdmUgd2hlbiBoaXQgYnkgdGhlIGJhbGwsIGp1c3QgZm9yIHZpc3VhbHMgYW5kIGZ1biAtIExlc3NvbiBKb2ludHNcclxuICBmdW5jdGlvbiBjcmVhdGVTaG9vdGFibGVEZWNvcmF0aW9uKF9ib2R5U3RhcnRObzogbnVtYmVyLCBfcG9zaXRpb246IGYuVmVjdG9yMywgX2hlaWdodDogbnVtYmVyID0gMSkge1xyXG4gICAgbGV0IHN0aWNrTWF0ZXJpYWw6IGYuTWF0ZXJpYWwgPSBuZXcgZi5NYXRlcmlhbChcIkpvaW50U3RpY2tcIiwgZi5TaGFkZXJGbGF0LCBuZXcgZi5Db2F0Q29sb3JlZChuZXcgZi5Db2xvcigwLCAwLjE1LCAxLCAwLjcpKSlcclxuICAgIC8vU3BoZXJpY2FsIEpvaW50XHJcbiAgICBib2RpZXNbX2JvZHlTdGFydE5vXSA9IGNyZWF0ZUNvbXBsZXRlTm9kZShcIlNvY2tldFwiLCBncm91bmRNYXRlcmlhbCwgbmV3IGYuTWVzaEN1YmUoKSwgMSwgZi5QSFlTSUNTX1RZUEUuU1RBVElDLCBmLlBIWVNJQ1NfR1JPVVAuR1JPVVBfMSk7XHJcbiAgICBoaWVyYXJjaHkuYXBwZW5kQ2hpbGQoYm9kaWVzW19ib2R5U3RhcnROb10pO1xyXG4gICAgYm9kaWVzW19ib2R5U3RhcnROb10ubXR4TG9jYWwudHJhbnNsYXRlKG5ldyBmLlZlY3RvcjMoX3Bvc2l0aW9uLngsIF9wb3NpdGlvbi55LCBfcG9zaXRpb24ueikpO1xyXG4gICAgYm9kaWVzW19ib2R5U3RhcnROb10ubXR4TG9jYWwuc2NhbGUobmV3IGYuVmVjdG9yMygwLjUsIDAuNSwgMC41KSk7XHJcblxyXG4gICAgYm9kaWVzW19ib2R5U3RhcnRObyArIDFdID0gY3JlYXRlQ29tcGxldGVOb2RlKFwiQmFsbEpvaW50XCIsIHN0aWNrTWF0ZXJpYWwsIG5ldyBmLk1lc2hDdWJlKCksIDAuNSwgZi5QSFlTSUNTX1RZUEUuRFlOQU1JQywgZi5QSFlTSUNTX0dST1VQLkdST1VQXzEpO1xyXG4gICAgaGllcmFyY2h5LmFwcGVuZENoaWxkKGJvZGllc1tfYm9keVN0YXJ0Tm8gKyAxXSk7XHJcbiAgICBib2RpZXNbX2JvZHlTdGFydE5vICsgMV0ubXR4TG9jYWwudHJhbnNsYXRlKG5ldyBmLlZlY3RvcjMoX3Bvc2l0aW9uLngsIF9wb3NpdGlvbi55ICsgX2hlaWdodCwgX3Bvc2l0aW9uLnopKTtcclxuICAgIGJvZGllc1tfYm9keVN0YXJ0Tm8gKyAxXS5tdHhMb2NhbC5zY2FsZShuZXcgZi5WZWN0b3IzKDAuMywgMS41LCAwLjMpKTtcclxuICAgIGxldCBoaW5nZUpvaW50ID0gbmV3IGYuQ29tcG9uZW50Sm9pbnRSZXZvbHV0ZShib2RpZXNbX2JvZHlTdGFydE5vXS5nZXRDb21wb25lbnQoZi5Db21wb25lbnRSaWdpZGJvZHkpLCBib2RpZXNbX2JvZHlTdGFydE5vICsgMV0uZ2V0Q29tcG9uZW50KGYuQ29tcG9uZW50UmlnaWRib2R5KSwgbmV3IGYuVmVjdG9yMygxLCAwLCAwKSk7XHJcbiAgICBib2RpZXNbX2JvZHlTdGFydE5vXS5hZGRDb21wb25lbnQoaGluZ2VKb2ludCk7XHJcbiAgICBoaW5nZUpvaW50LnNwcmluZ0RhbXBpbmcgPSAwLjk7XHJcbiAgfVxyXG5cclxuXHJcbiAgLy9TcGF3biBhIG9iamVjdCB0aGF0IGlzIHNpZ25hbGluZyBhIGZyZXNoIGJvdW5jZSBvbiB0aGUgZ3JvdW5kIC0gTGVzc29uIENvbGxpc2lvbiBFdmVudHMgLSBJbXB1bHNlc1xyXG4gIGZ1bmN0aW9uIHNwYXduRGVjb09iamVjdE9uU3BvdChfcG9zaXRpb246IGYuVmVjdG9yMywgX2ltcHVsc2VTdHJlbmd0aDogbnVtYmVyID0gMCkge1xyXG4gICAgbGV0IF9ub2RlID0gY3JlYXRlU3RhbmRhcmRGdWRnZU5vZGUoXCJEZWtvXCIsIGJvYXJkRGVmYXVsdCwgbmV3IGYuTWVzaEN1YmUoKSk7XHJcbiAgICBfbm9kZS5tdHhMb2NhbC50cmFuc2xhdGUoX3Bvc2l0aW9uKTtcclxuICAgIF9ub2RlLm10eExvY2FsLnNjYWxlKG5ldyBmLlZlY3RvcjMoMC4xLCBfaW1wdWxzZVN0cmVuZ3RoIC8gMTAsIDAuMSkpO1xyXG4gICAgaGllcmFyY2h5LmFkZENoaWxkKF9ub2RlKTtcclxuICAgIHdpbmRvdy5zZXRUaW1lb3V0KGRlc3Bhd25EZWNvT2JqZWN0LCAxMDAwLCBfbm9kZSk7XHJcbiAgfVxyXG5cclxuICAvL1JlbW92ZSB0aGUgY2hpbGQgYWdhaW5zdCBhZnRlciBhIHdoaWxlIChub3QgcGVyZm9ybWFudCwgc2hvdWxkIHVzZSBvYmplY3QgcG9vbGluZyBidXQgdGhhdCBpcyBub3QgcGFydCBvZiB0aGUgbGVzc29uKVxyXG4gIGZ1bmN0aW9uIGRlc3Bhd25EZWNvT2JqZWN0KF9ub2RlOiBmLk5vZGUpIHtcclxuICAgIGhpZXJhcmNoeS5yZW1vdmVDaGlsZChfbm9kZSk7XHJcbiAgfVxyXG5cclxuICAvL1NpbXBsZSBSYXljYXN0IHRoYXQgaXMgY2hlY2tpbmcgdGhlIHNwZWVkIG9mIHRoZSBwYXNzaW5nIGJhbGwgb24gdGhlIGJhc2tldHJpbmcgLSBMZXNzb24gUmF5Y2FzdFxyXG4gIGZ1bmN0aW9uIHJheWNhc3RTcGVlZFRlc3QoKSB7XHJcbiAgICBsZXQgb3JpZ2luID0gbmV3IGYuVmVjdG9yMygwLCAzLjE1LCAtNi43NzUpO1xyXG4gICAgbGV0IHJheUhpdDogZi5SYXlIaXRJbmZvID0gZi5QaHlzaWNzLnJheWNhc3Qob3JpZ2luLCBuZXcgZi5WZWN0b3IzKDAsIDAsIDEpLCAxLjUpO1xyXG4gICAgaWYgKHJheUhpdC5oaXQgJiYgcmF5SGl0LnJpZ2lkYm9keUNvbXBvbmVudC5nZXRDb250YWluZXIoKS5uYW1lID09IFwiQmFza2V0YmFsbFwiKSB7XHJcbiAgICAgIGxhc3RTcGVlZCA9IGJhbGwuZ2V0VmVsb2NpdHkoKS5tYWduaXR1ZGU7XHJcbiAgICAgIGdvYWxDb3VudGVyLnRleHRDb250ZW50ID0gXCJQb2ludHM6IFwiICsgcG9pbnRzLnRvU3RyaW5nKCkgKyBcIiAvIFNwZWVkOiBcIiArIGxhc3RTcGVlZC50b0ZpeGVkKDIpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLy8jcmVnaW9uIEV2ZW50IEhhbmRsaW5nXHJcbiAgLy9SZWdpc3RlciBhIHRyaWdnZXJpbmcgZXZlbnQgLSBMZXNzb24gVHJpZ2dlciBFdmVudHNcclxuICBmdW5jdGlvbiBnb2FsQ2hlY2tFbnRlcihfZXZlbnQ6IGYuRXZlbnRQaHlzaWNzKSB7XHJcbiAgICBpZiAoX2V2ZW50LmNtcFJpZ2lkYm9keS5nZXRDb250YWluZXIoKS5uYW1lID09IFwiQmFza2V0YmFsbFwiKSB7XHJcbiAgICAgIGJvZGllc1sxMF0uZ2V0Q29tcG9uZW50KGYuQ29tcG9uZW50TWF0ZXJpYWwpLm1hdGVyaWFsID0gYm9hcmRHb2FsO1xyXG4gICAgICBwb2ludHMgKz0gMTAwO1xyXG4gICAgICBnb2FsQ291bnRlci50ZXh0Q29udGVudCA9IFwiUG9pbnRzOiBcIiArIHBvaW50cy50b1N0cmluZygpICsgXCIgLyBTcGVlZDogXCIgKyBsYXN0U3BlZWQudG9GaXhlZCgyKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIGZ1bmN0aW9uIGdvYWxDaGVja0V4aXQoX2V2ZW50OiBmLkV2ZW50UGh5c2ljcykge1xyXG4gICAgaWYgKF9ldmVudC5jbXBSaWdpZGJvZHkuZ2V0Q29udGFpbmVyKCkubmFtZSA9PSBcIkJhc2tldGJhbGxcIikge1xyXG4gICAgICBib2RpZXNbMTBdLmdldENvbXBvbmVudChmLkNvbXBvbmVudE1hdGVyaWFsKS5tYXRlcmlhbCA9IGJvYXJkRGVmYXVsdDtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8vUmVnaXN0ZXIgYSBjb2xsaXNpb24gb2YgYSBib2R5IHdpdGggdGhlIGdyb3VuZCAtIExlc3NvbiBDb2xsaXNpb24gRXZlbnRzXHJcbiAgZnVuY3Rpb24gZ3JvdW5kQ29sRW50ZXIoX2V2ZW50OiBmLkV2ZW50UGh5c2ljcykge1xyXG4gICAgaWYgKF9ldmVudC5jbXBSaWdpZGJvZHkuZ2V0Q29udGFpbmVyKCkubmFtZSA9PSBcIkJhc2tldGJhbGxcIikge1xyXG4gICAgICBzcGF3bkRlY29PYmplY3RPblNwb3QoX2V2ZW50LmNvbGxpc2lvblBvaW50LCBfZXZlbnQubm9ybWFsSW1wdWxzZSk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBmdW5jdGlvbiB0YXJnZXRDb2xFbnRlcihfZXZlbnQ6IGYuRXZlbnRQaHlzaWNzKSB7XHJcbiAgICBpZiAoX2V2ZW50LmNtcFJpZ2lkYm9keS5nZXRDb250YWluZXIoKS5uYW1lID09IFwiQmFza2V0YmFsbFwiKSB7XHJcbiAgICAgIHBvaW50cyArPSA1MDtcclxuICAgICAgZ29hbENvdW50ZXIudGV4dENvbnRlbnQgPSBcIlBvaW50czogXCIgKyBwb2ludHMudG9TdHJpbmcoKSArIFwiIC8gU3BlZWQ6IFwiICsgbGFzdFNwZWVkLnRvRml4ZWQoMik7XHJcbiAgICB9XHJcbiAgfVxyXG4gIC8vI2VuZHJlZ2lvblxyXG5cclxufSJdfQ==