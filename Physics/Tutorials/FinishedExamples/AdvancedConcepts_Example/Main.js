"use strict";
///<reference types="../../../../Core/Build/FudgeCore.js"/>
var f = FudgeCore;
//Reference Fudge, getting code completion ready and creating a shortcut f to write FudgeCode more comfortably
var Turorials_FUDGEPhysics_Lesson1;
//Reference Fudge, getting code completion ready and creating a shortcut f to write FudgeCode more comfortably
(function (Turorials_FUDGEPhysics_Lesson1) {
    //GOALS: Learning how to define shpes to create a not predefined collider shape.
    //Built a simple physical player like you would find in a adventure or 3d platformer.
    //Hint! -> These concepts are only a basic start, expand on it yourself to improve on results.
    //Fudge Basic Variables
    window.addEventListener("load", init);
    const app = document.querySelector("canvas"); // The html element where the scene is drawn to
    let viewPort; // The scene visualization
    let hierarchy; // You're object scene tree
    //Physical Objects
    let bodies = new Array(); // Array of all physical objects in the scene to have a quick reference
    let player;
    let playerBody;
    //Setting Variables
    let materialConvexShape = new f.Material("MorningStarThingy", f.ShaderFlat, new f.CoatColored(new f.Color(0.5, 0.4, 0.35, 1)));
    let materialPlayer = new f.Material("Player", f.ShaderFlat, new f.CoatColored(new f.Color(0.7, 0.8, 0.6, 1)));
    let environmentMat = new f.Material("Environment", f.ShaderFlat, new f.CoatColored(new f.Color(0.2, 0.2, 0.2, 1)));
    //Physical Player Variables
    let isGrounded;
    let movementspeed = 8;
    let turningspeed = 80;
    let playerWeight = 75;
    let playerJumpForce = 500;
    let cmpCamera; //We let the camera look at our player in update
    let yTurn = 0; //How high the turning input currently is
    let forwardMovement = 0; //How high the forward movement input currently is
    //Function to initialize the Fudge Scene with a camera, light, viewport and PHYSCIAL Objects
    function init(_event) {
        hierarchy = new f.Node("Scene"); //create the root Node where every object is parented to. Should never be changed
        //#region PHYSICS
        //OimoPhysics which is integrated in Fudge is using a correctionAlgorithm on solver iterations instead of fully recalculate physics too often, 
        //so you can crank the number of solver iterations higher than with most engines. But Oimo is in general less accurate.
        //This is not needed but we just do it to show it.
        f.Physics.world.setSolverIterations(1000);
        f.Physics.settings.defaultRestitution = 0.15;
        f.Physics.settings.defaultFriction = 0.8;
        //PHYSICS 
        //Creating a physically static ground plane for our physics playground. A simple scaled cube but with physics type set to static
        bodies[0] = createCompleteNode("Ground", environmentMat, new f.MeshCube(), 0, f.PHYSICS_TYPE.STATIC, f.PHYSICS_GROUP.GROUP_2);
        bodies[0].mtxLocal.scale(new f.Vector3(14, 0.3, 14)); //Scale the body with it's standard ComponentTransform
        //bodies[0].mtxLocal.rotateX(4, true); //Give it a slight rotation so the physical objects are sliding, always from left when it's after a scaling
        hierarchy.appendChild(bodies[0]); //Add the node to the scene by adding it to the scene-root
        //CONCEPT 1 - Convex Colliders / Compound Collider - A Collider Shape that is not predefined and has no holes in it
        //e.g. something like a morning star shape a cube with pyramides as spikes on the side
        createConvexCompountCollider();
        //CONCEPT 2 - Setting Up a physical player
        //A physical player is a standard physical object of the type dynamic, BUT, you only want to rotate on Y axis, and you want to setup things
        //like a grounded variable and other movement related stuff.
        settingUpAPlayer();
        //Setting up some environment objects for our player to jump on
        bodies[100] = createCompleteNode("Envinroment", environmentMat, new f.MeshCube(), 0, f.PHYSICS_TYPE.STATIC, f.PHYSICS_GROUP.GROUP_2);
        bodies[100].mtxLocal.translate(new f.Vector3(5, 1, 3));
        bodies[100].mtxLocal.scale(new f.Vector3(1, 1, 1));
        //bodies[100].mtxLocal.rotateX(4, true); 
        hierarchy.appendChild(bodies[100]); //Add the node to the scene by adding it to the scene-root
        bodies[101] = createCompleteNode("Envinroment", environmentMat, new f.MeshCube(), 0, f.PHYSICS_TYPE.STATIC, f.PHYSICS_GROUP.GROUP_2);
        bodies[101].mtxLocal.translate(new f.Vector3(-3, 3.5, 2));
        bodies[101].mtxLocal.scale(new f.Vector3(1, 1, 5));
        bodies[101].mtxLocal.rotateX(40, true);
        hierarchy.appendChild(bodies[101]);
        /*Stairs, keep in mind our player is only able to walk up stars because he is a capsule but it's not easy for him because we do not lift any feet,
        we are just pushing a capsule with force against a slope until it's pushed up, which we make easier by giving the player a low friction, the way
        we set the player up he can not slide on the ground but it helps to get him up the stairs.
        So you need to turn around a little while moving to climb these stairs
        advanced stairwalking is something you need to figure out yourself. Keyword raycast is a good start.
        */
        let slopeHeight = 0.20;
        bodies[102] = createCompleteNode("Envinroment", environmentMat, new f.MeshCube(), 0, f.PHYSICS_TYPE.STATIC, f.PHYSICS_GROUP.GROUP_2);
        bodies[102].mtxLocal.translate(new f.Vector3(-3, slopeHeight, -2));
        bodies[102].mtxLocal.scale(new f.Vector3(2, slopeHeight * 2, 0.35));
        hierarchy.appendChild(bodies[102]);
        bodies[103] = createCompleteNode("Envinroment", environmentMat, new f.MeshCube(), 0, f.PHYSICS_TYPE.STATIC, f.PHYSICS_GROUP.GROUP_2);
        bodies[103].mtxLocal.translate(new f.Vector3(-3, slopeHeight * 2, -2 - 0.35));
        bodies[103].mtxLocal.scale(new f.Vector3(2, slopeHeight * 2, 0.35));
        hierarchy.appendChild(bodies[103]);
        bodies[104] = createCompleteNode("Envinroment", environmentMat, new f.MeshCube(), 0, f.PHYSICS_TYPE.STATIC, f.PHYSICS_GROUP.GROUP_2);
        bodies[104].mtxLocal.translate(new f.Vector3(-3, slopeHeight * 3, -2 - 0.35 * 2));
        bodies[104].mtxLocal.scale(new f.Vector3(2, slopeHeight * 2, 0.35));
        hierarchy.appendChild(bodies[104]);
        bodies[105] = createCompleteNode("Envinroment", environmentMat, new f.MeshCube(), 0, f.PHYSICS_TYPE.STATIC, f.PHYSICS_GROUP.GROUP_2);
        bodies[105].mtxLocal.translate(new f.Vector3(-3, slopeHeight * 4, -2 - 0.35 * 3));
        bodies[105].mtxLocal.scale(new f.Vector3(2, slopeHeight * 2, 0.35));
        hierarchy.appendChild(bodies[105]);
        bodies[106] = createCompleteNode("Envinroment", environmentMat, new f.MeshCube(), 0, f.PHYSICS_TYPE.STATIC, f.PHYSICS_GROUP.GROUP_2);
        bodies[106].mtxLocal.translate(new f.Vector3(-3, slopeHeight * 5, -2 - 0.35 * 4));
        bodies[106].mtxLocal.scale(new f.Vector3(2, slopeHeight * 2, 0.35));
        hierarchy.appendChild(bodies[106]);
        //#endregion PHYSICS
        //Standard Fudge Scene Initialization - Creating a directional light, a camera and initialize the viewport
        let cmpLight = new f.ComponentLight(new f.LightDirectional(f.Color.CSS("WHITE")));
        cmpLight.pivot.lookAt(new f.Vector3(0.5, -1, -0.8)); //Set light direction
        hierarchy.addComponent(cmpLight);
        cmpCamera = new f.ComponentCamera();
        cmpCamera.backgroundColor = f.Color.CSS("GREY");
        cmpCamera.pivot.translate(new f.Vector3(17, 4, 17)); //Move camera far back so the whole scene is visible
        cmpCamera.pivot.lookAt(f.Vector3.ZERO()); //Set the camera matrix so that it looks at the center of the scene
        viewPort = new f.Viewport(); //Creating a viewport that is rendered onto the html canvas element
        viewPort.initialize("Viewport", hierarchy, cmpCamera, app); //initialize the viewport with the root node, camera and canvas
        document.addEventListener("keypress", hndKey); //Adding a listener for keypress handling
        document.addEventListener("keyup", hndKeyUp); //Adding a listener for keyUp
        //PHYSICS - Start using physics by telling the physics the scene root object. Physics will recalculate every transform and initialize
        f.Physics.start(hierarchy);
        f.Physics.settings.debugDraw = true;
        //Important start the game loop after starting physics, so physics can use the current transform before it's first iteration
        f.Loop.addEventListener("loopFrame" /* LOOP_FRAME */, update); //Tell the game loop to call the update function on each frame
        f.Loop.start(); //Stard the game loop
    }
    //Function to animate/update the Fudge scene, commonly known as gameloop
    function update() {
        //PHYSICS - Simulate physical changes each frame, parameter to set time between frames
        f.Physics.world.simulate(f.Loop.timeFrameReal / 1000);
        //Player constant update functions do it after physics calculation is best practice
        cmpCamera.pivot.lookAt(player.mtxWorld.translation);
        playerIsGroundedRaycast();
        playerMovement(f.Loop.timeFrameReal / 1000);
        viewPort.draw(); // Draw the current Fudge Scene to the canvas
    }
    // Function to quickly create a node with multiple needed FudgeComponents, including a physics component
    function createCompleteNode(_name, _material, _mesh, _mass, _physicsType, _group = f.PHYSICS_GROUP.DEFAULT, _colType = f.COLLIDER_TYPE.CUBE, _convexMesh = null) {
        let node = new f.Node(_name);
        let cmpMesh = new f.ComponentMesh(_mesh);
        let cmpMaterial = new f.ComponentMaterial(_material);
        let cmpTransform = new f.ComponentTransform();
        let cmpRigidbody = new f.ComponentRigidbody(_mass, _physicsType, _colType, _group, null, _convexMesh); //add a Float32 Array of points to the rb constructor to create a convex collider
        node.addComponent(cmpMesh);
        node.addComponent(cmpMaterial);
        node.addComponent(cmpTransform);
        node.addComponent(cmpRigidbody);
        return node;
    }
    function createConvexCompountCollider() {
        //Step 1 - define points that construct the shape you want for your collider - order is important so think about what point comes when in your shape
        let colliderVertices = new Float32Array([
            1, -1, 1,
            0, -2, 0,
            1, 1, 1,
            -1, 1, 1,
            -1, -1, 1,
            -2, 0, 0,
            1, 1, -1,
            -1, 1, -1,
            -1, -1, -1,
            0, 0, -2,
            1, -1, -1,
            2, 0, 0,
            0, 2, 0,
            0, 0, 2
        ]);
        //Step 2 - define the visual nodes that are part of your whole shape, since we have a cube that is surounded by pyramids:
        //Main Shape
        bodies[5] = createCompleteNode("Compound", materialConvexShape, new f.MeshCube(), 1, f.PHYSICS_TYPE.DYNAMIC, f.PHYSICS_GROUP.DEFAULT, f.COLLIDER_TYPE.CONVEX, colliderVertices);
        hierarchy.appendChild(bodies[5]);
        bodies[5].mtxLocal.translate(new f.Vector3(2.5, 4, 3.5));
        bodies[5].mtxLocal.rotateX(27);
        bodies[5].mtxLocal.rotateY(32);
        //Components - Removing the Physics component on each of them since they all build one shape on the main Node only the visual nodes need to be there
        bodies[6] = createCompleteNode("CompoundUpper", materialConvexShape, new f.MeshPyramid(), 1, f.PHYSICS_TYPE.DYNAMIC, f.PHYSICS_GROUP.DEFAULT, f.COLLIDER_TYPE.PYRAMID);
        bodies[6].removeComponent(bodies[6].getComponent(f.ComponentRigidbody));
        bodies[6].mtxLocal.translateY(0.5);
        bodies[6].mtxLocal.scale(new f.Vector3(1, 0.5, 1));
        bodies[5].appendChild(bodies[6]); //appending the Node not to the main hierarchy but the Node it is part of
        bodies[7] = createCompleteNode("CompoundLower", materialConvexShape, new f.MeshPyramid(), 1, f.PHYSICS_TYPE.DYNAMIC, f.PHYSICS_GROUP.DEFAULT, f.COLLIDER_TYPE.PYRAMID);
        bodies[7].removeComponent(bodies[7].getComponent(f.ComponentRigidbody));
        bodies[7].mtxLocal.rotateX(180);
        bodies[7].mtxLocal.translateY(0.5);
        bodies[7].mtxLocal.scale(new f.Vector3(1, 0.5, 1));
        bodies[5].appendChild(bodies[7]);
        bodies[8] = createCompleteNode("CompoundLeft", materialConvexShape, new f.MeshPyramid(), 1, f.PHYSICS_TYPE.DYNAMIC, f.PHYSICS_GROUP.DEFAULT, f.COLLIDER_TYPE.PYRAMID);
        bodies[8].removeComponent(bodies[8].getComponent(f.ComponentRigidbody));
        bodies[8].mtxLocal.rotateZ(90);
        bodies[8].mtxLocal.translateY(0.5);
        bodies[8].mtxLocal.scale(new f.Vector3(1, 0.5, 1));
        bodies[5].appendChild(bodies[8]);
        bodies[9] = createCompleteNode("CompoundRight", materialConvexShape, new f.MeshPyramid(), 1, f.PHYSICS_TYPE.DYNAMIC, f.PHYSICS_GROUP.DEFAULT, f.COLLIDER_TYPE.PYRAMID);
        bodies[9].removeComponent(bodies[9].getComponent(f.ComponentRigidbody));
        bodies[9].mtxLocal.rotateZ(-90);
        bodies[9].mtxLocal.translateY(0.5);
        bodies[9].mtxLocal.scale(new f.Vector3(1, 0.5, 1));
        bodies[5].appendChild(bodies[9]);
        bodies[10] = createCompleteNode("CompoundFront", materialConvexShape, new f.MeshPyramid(), 1, f.PHYSICS_TYPE.DYNAMIC, f.PHYSICS_GROUP.DEFAULT, f.COLLIDER_TYPE.PYRAMID);
        bodies[10].removeComponent(bodies[10].getComponent(f.ComponentRigidbody));
        bodies[10].mtxLocal.rotateX(90);
        bodies[10].mtxLocal.translateY(0.5);
        bodies[10].mtxLocal.scale(new f.Vector3(1, 0.5, 1));
        bodies[5].appendChild(bodies[10]);
        bodies[11] = createCompleteNode("CompoundBack", materialConvexShape, new f.MeshPyramid(), 1, f.PHYSICS_TYPE.DYNAMIC, f.PHYSICS_GROUP.DEFAULT, f.COLLIDER_TYPE.PYRAMID);
        bodies[11].removeComponent(bodies[11].getComponent(f.ComponentRigidbody));
        bodies[11].mtxLocal.rotateX(-90);
        bodies[11].mtxLocal.translateY(0.5);
        bodies[11].mtxLocal.scale(new f.Vector3(1, 0.5, 1));
        bodies[5].appendChild(bodies[11]);
        bodies[5].getComponent(f.ComponentRigidbody).restitution = 3;
    }
    //Setting up a physical player which is nothign but a cube but able to platform in our little world and reacting to stuff
    function settingUpAPlayer() {
        player = createCompleteNode("Player", materialPlayer, new f.MeshCube(), playerWeight, f.PHYSICS_TYPE.DYNAMIC, f.PHYSICS_GROUP.DEFAULT, f.COLLIDER_TYPE.CAPSULE);
        hierarchy.appendChild(player);
        playerBody = player.getComponent(f.ComponentRigidbody);
        player.mtxLocal.scale(new f.Vector3(0.5, 1.8, 0.3));
        player.mtxLocal.translate(new f.Vector3(2.5, 4, 3.5));
        playerBody.rotationInfluenceFactor = new f.Vector3(0, 0, 0); //Physics not turn our player we do it ourselves
        //since our capsule collider is a box with half spheres on top and bottom it's a little higher than our box mesh, we need to scale the pivot on the rb itself
        playerBody.pivot.scale(new f.Vector3(1, 0.85, 1));
        playerBody.friction = 0.01; //lower the friction to make it easier climbing stairs - this is only needed in this kind of player structure
        //addign a nose to our player so we know whats the forward direction - but it's not a physics object
        let playerNose = createCompleteNode("PlayerNose", materialPlayer, new f.MeshCube(), playerWeight, f.PHYSICS_TYPE.DYNAMIC);
        playerNose.mtxLocal.translate(new f.Vector3(0, 0.2, 0.4));
        playerNose.mtxLocal.scale(new f.Vector3(0.1, 0.2, 1.5));
        playerNose.removeComponent(playerNose.getComponent(f.ComponentRigidbody));
        player.addChild(playerNose);
    }
    //Check if our physical player is hitting a surface with his feed, if yo let him be able to jump
    function playerIsGroundedRaycast() {
        let hitInfo;
        hitInfo = f.Physics.raycast(playerBody.getPosition(), new f.Vector3(0, -1, 0), 1.1);
        if (hitInfo.hit) {
            isGrounded = true;
        }
        else {
            isGrounded = false;
        }
    }
    // Event Function handling keyboard input
    function hndKey(_event) {
        if (_event.code == f.KEYBOARD_CODE.A) {
            yTurn = 1;
        }
        if (_event.code == f.KEYBOARD_CODE.W) {
            forwardMovement = 1;
        }
        if (_event.code == f.KEYBOARD_CODE.S) {
            forwardMovement = -1;
        }
        if (_event.code == f.KEYBOARD_CODE.D) {
            yTurn = -1;
        }
        if (_event.code == f.KEYBOARD_CODE.SPACE) {
            if (isGrounded) //Let the player only jumping when on the ground
                playerBody.applyLinearImpulse(new f.Vector3(0, playerJumpForce, 0));
        }
        if (_event.code == f.KEYBOARD_CODE.T) {
            f.Physics.settings.debugMode = f.Physics.settings.debugMode == f.PHYSICS_DEBUGMODE.JOINTS_AND_COLLIDER ? f.PHYSICS_DEBUGMODE.PHYSIC_OBJECTS_ONLY : f.PHYSICS_DEBUGMODE.JOINTS_AND_COLLIDER;
        }
    }
    //When the key is up we want to stop movement
    function hndKeyUp(_event) {
        if (_event.code == f.KEYBOARD_CODE.A) {
            yTurn = 0;
        }
        if (_event.code == f.KEYBOARD_CODE.W) {
            forwardMovement = 0;
        }
        if (_event.code == f.KEYBOARD_CODE.S) {
            forwardMovement = 0;
        }
        if (_event.code == f.KEYBOARD_CODE.D) {
            yTurn = 0;
        }
    }
    //Actually moving the player
    function playerMovement(_deltaTime) {
        let playerForward;
        playerForward = f.Vector3.Z();
        playerForward.transform(player.mtxWorld, false);
        //You can rotate a body like you would rotate a transform, incremental but keep in mind, normally we use forces in physics,
        //this is just a feature to make it easier to create player characters
        playerBody.rotateBody(new f.Vector3(0, yTurn * turningspeed * _deltaTime, 0));
        let movementVelocity = new f.Vector3();
        movementVelocity.x = playerForward.x * forwardMovement * movementspeed;
        movementVelocity.y = playerBody.getVelocity().y;
        movementVelocity.z = playerForward.z * forwardMovement * movementspeed;
        playerBody.setVelocity(movementVelocity);
        //Since we are resetting the velocity when releasing the key to have a instant stop our player is not able to slide. We would have
        //the player fade out have sliding instead you need to configure that for your own game.
    }
})(Turorials_FUDGEPhysics_Lesson1 || (Turorials_FUDGEPhysics_Lesson1 = {}));
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiTWFpbi5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIk1haW4udHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtBQUFBLDJEQUEyRDtBQUMzRCxJQUFPLENBQUMsR0FBRyxTQUFTLENBQUM7QUFDckIsOEdBQThHO0FBRTlHLElBQVUsOEJBQThCLENBK1R2QztBQWpVRCw4R0FBOEc7QUFFOUcsV0FBVSw4QkFBOEI7SUFFdEMsZ0ZBQWdGO0lBQ2hGLHFGQUFxRjtJQUNyRiw4RkFBOEY7SUFFOUYsdUJBQXVCO0lBQ3ZCLE1BQU0sQ0FBQyxnQkFBZ0IsQ0FBQyxNQUFNLEVBQUUsSUFBSSxDQUFDLENBQUM7SUFDdEMsTUFBTSxHQUFHLEdBQXNCLFFBQVEsQ0FBQyxhQUFhLENBQUMsUUFBUSxDQUFDLENBQUMsQ0FBQywrQ0FBK0M7SUFDaEgsSUFBSSxRQUFvQixDQUFDLENBQUMsMEJBQTBCO0lBQ3BELElBQUksU0FBaUIsQ0FBQyxDQUFDLDJCQUEyQjtJQUdsRCxrQkFBa0I7SUFDbEIsSUFBSSxNQUFNLEdBQWEsSUFBSSxLQUFLLEVBQUUsQ0FBQyxDQUFDLHVFQUF1RTtJQUMzRyxJQUFJLE1BQWMsQ0FBQztJQUNuQixJQUFJLFVBQWdDLENBQUM7SUFFckMsbUJBQW1CO0lBQ25CLElBQUksbUJBQW1CLEdBQWUsSUFBSSxDQUFDLENBQUMsUUFBUSxDQUFDLG1CQUFtQixFQUFFLENBQUMsQ0FBQyxVQUFVLEVBQUUsSUFBSSxDQUFDLENBQUMsV0FBVyxDQUFDLElBQUksQ0FBQyxDQUFDLEtBQUssQ0FBQyxHQUFHLEVBQUUsR0FBRyxFQUFFLElBQUksRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7SUFDM0ksSUFBSSxjQUFjLEdBQWUsSUFBSSxDQUFDLENBQUMsUUFBUSxDQUFDLFFBQVEsRUFBRSxDQUFDLENBQUMsVUFBVSxFQUFFLElBQUksQ0FBQyxDQUFDLFdBQVcsQ0FBQyxJQUFJLENBQUMsQ0FBQyxLQUFLLENBQUMsR0FBRyxFQUFFLEdBQUcsRUFBRSxH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ZSxFQUFFLG1CQUFtQixFQUFFLElBQUksQ0FBQyxDQUFDLFdBQVcsRUFBRSxFQUFFLENBQUMsRUFBRSxDQUFDLENBQUMsWUFBWSxDQUFDLE9BQU8sRUFBRSxDQUFDLENBQUMsYUFBYSxDQUFDLE9BQU8sRUFBRSxDQUFDLENBQUMsYUFBYSxDQUFDLE9BQU8sQ0FBQyxDQUFDO1FBQ3hLLE1BQU0sQ0FBQyxFQUFFLENBQUMsQ0FBQyxlQUFlLENBQUMsTUFBTSxDQUFDLEVBQUUsQ0FBQyxDQUFDLFlBQVksQ0FBQyxDQUFDLENBQUMsa0JBQWtCLENBQUMsQ0FBQyxDQUFDO1FBQzFFLE1BQU0sQ0FBQyxFQUFFLENBQUMsQ0FBQyxRQUFRLENBQUMsT0FBTyxDQUFDLEVBQUUsQ0FBQyxDQUFDO1FBQ2hDLE1BQU0sQ0FBQyxFQUFFLENBQUMsQ0FBQyxRQUFRLENBQUMsVUFBVSxDQUFDLEdBQUcsQ0FBQyxDQUFDO1FBQ3BDLE1BQU0sQ0FBQyxFQUFFLENBQUMsQ0FBQyxRQUFRLENBQUMsS0FBSyxDQUFDLElBQUksQ0FBQyxDQUFDLE9BQU8sQ0FBQyxDQUFDLEVBQUUsR0FBRyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUM7UUFDcEQsTUFBTSxDQUFDLENBQUMsQ0FBQyxDQUFDLFdBQVcsQ0FBQyxNQUFNLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQztRQUNsQyxNQUFNLENBQUMsRUFBRSxDQUFDLEdBQUcsa0JBQWtCLENBQUMsY0FBYyxFQUFFLG1CQUFtQixFQUFFLElBQUksQ0FBQyxDQUFDLFdBQVcsRUFBRSxFQUFFLENBQUMsRUFBRSxDQUFDLENBQUMsWUFBWSxDQUFDLE9BQU8sRUFBRSxDQUFDLENBQUMsYUFBYSxDQUFDLE9BQU8sRUFBRSxDQUFDLENBQUMsYUFBYSxDQUFDLE9BQU8sQ0FBQyxDQUFDO1FBQ3ZLLE1BQU0sQ0FBQyxFQUFFLENBQUMsQ0FBQyxlQUFlLENBQUMsTUFBTSxDQUFDLEVBQUUsQ0FBQyxDQUFDLFlBQVksQ0FBQyxDQUFDLENBQUMsa0JBQWtCLENBQUMsQ0FBQyxDQUFDO1FBQzFFLE1BQU0s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SSxnQkFBZ0IsR0FBYyxJQUFJLENBQUMsQ0FBQyxPQUFPLEVBQUUsQ0FBQztRQUNsRCxnQkFBZ0IsQ0FBQyxDQUFDLEdBQUcsYUFBYSxDQUFDLENBQUMsR0FBRyxlQUFlLEdBQUcsYUFBYSxDQUFDO1FBQ3ZFLGdCQUFnQixDQUFDLENBQUMsR0FBRyxVQUFVLENBQUMsV0FBVyxFQUFFLENBQUMsQ0FBQyxDQUFDO1FBQ2hELGdCQUFnQixDQUFDLENBQUMsR0FBRyxhQUFhLENBQUMsQ0FBQyxHQUFHLGVBQWUsR0FBRyxhQUFhLENBQUM7UUFDdkUsVUFBVSxDQUFDLFdBQVcsQ0FBQyxnQkFBZ0IsQ0FBQyxDQUFDO1FBQ3pDLGtJQUFrSTtRQUNsSSx3RkFBd0Y7SUFDMUYsQ0FBQztBQUVILENBQUMsRUEvVFMsOEJBQThCLEtBQTlCLDhCQUE4QixRQStUdkMiLCJzb3VyY2VzQ29udGVudCI6WyIvLy88cmVmZXJlbmNlIHR5cGVzPVwiLi4vLi4vLi4vLi4vQ29yZS9CdWlsZC9GdWRnZUNvcmUuanNcIi8+XHJcbmltcG9ydCBmID0gRnVkZ2VDb3JlO1xyXG4vL1JlZmVyZW5jZSBGdWRnZSwgZ2V0dGluZyBjb2RlIGNvbXBsZXRpb24gcmVhZHkgYW5kIGNyZWF0aW5nIGEgc2hvcnRjdXQgZiB0byB3cml0ZSBGdWRnZUNvZGUgbW9yZSBjb21mb3J0YWJseVxyXG5cclxubmFtZXNwYWNlIFR1cm9yaWFsc19GVURHRVBoeXNpY3NfTGVzc29uMSB7XHJcblxyXG4gIC8vR09BTFM6IExlYXJuaW5nIGhvdyB0byBkZWZpbmUgc2hwZXMgdG8gY3JlYXRlIGEgbm90IHByZWRlZmluZWQgY29sbGlkZXIgc2hhcGUuXHJcbiAgLy9CdWlsdCBhIHNpbXBsZSBwaHlzaWNhbCBwbGF5ZXIgbGlrZSB5b3Ugd291bGQgZmluZCBpbiBhIGFkdmVudHVyZSBvciAzZCBwbGF0Zm9ybWVyLlxyXG4gIC8vSGludCEgLT4gVGhlc2UgY29uY2VwdHMgYXJlIG9ubHkgYSBiYXNpYyBzdGFydCwgZXhwYW5kIG9uIGl0IHlvdXJzZWxmIHRvIGltcHJvdmUgb24gcmVzdWx0cy5cclxuXHJcbiAgLy9GdWRnZSBCYXNpYyBWYXJpYWJsZXNcclxuICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcImxvYWRcIiwgaW5pdCk7XHJcbiAgY29uc3QgYXBwOiBIVE1MQ2FudmFzRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCJjYW52YXNcIik7IC8vIFRoZSBodG1sIGVsZW1lbnQgd2hlcmUgdGhlIHNjZW5lIGlzIGRyYXduIHRvXHJcbiAgbGV0IHZpZXdQb3J0OiBmLlZpZXdwb3J0OyAvLyBUaGUgc2NlbmUgdmlzdWFsaXphdGlvblxyXG4gIGxldCBoaWVyYXJjaHk6IGYuTm9kZTsgLy8gWW91J3JlIG9iamVjdCBzY2VuZSB0cmVlXHJcblxyXG5cclxuICAvL1BoeXNpY2FsIE9iamVjdHNcclxuICBsZXQgYm9kaWVzOiBmLk5vZGVbXSA9IG5ldyBBcnJheSgpOyAvLyBBcnJheSBvZiBhbGwgcGh5c2ljYWwgb2JqZWN0cyBpbiB0aGUgc2NlbmUgdG8gaGF2ZSBhIHF1aWNrIHJlZmVyZW5jZVxyXG4gIGxldCBwbGF5ZXI6IGYuTm9kZTtcclxuICBsZXQgcGxheWVyQm9keTogZi5Db21wb25lbnRSaWdpZGJvZHk7XHJcblxyXG4gIC8vU2V0dGluZyBWYXJpYWJsZXNcclxuICBsZXQgbWF0ZXJpYWxDb252ZXhTaGFwZTogZi5NYXRlcmlhbCA9IG5ldyBmLk1hdGVyaWFsKFwiTW9ybmluZ1N0YXJUaGluZ3lcIiwgZi5TaGFkZXJGbGF0LCBuZXcgZi5Db2F0Q29sb3JlZChuZXcgZi5Db2xvcigwLjUsIDAuNCwgMC4zNSwgMSkpKTtcclxuICBsZXQgbWF0ZXJpYWxQbGF5ZXI6IGYuTWF0ZXJpYWwgPSBuZXcgZi5NYXRlcmlhbChcIlBsYXllclwiLCBmLlNoYWRlckZsYXQsIG5ldyBmLkNvYXRDb2xvcmVkKG5ldyBmLkNvbG9yKDAuNywgMC44LCAwLjYsIDEpKSk7XHJcbiAgbGV0IGVudmlyb25tZW50TWF0OiBmLk1hdGVyaWFsID0gbmV3IGYuTWF0ZXJpYWwoXCJFbnZpcm9ubWVudFwiLCBmLlNoYWRlckZsYXQsIG5ldyBmLkNvYXRDb2xvcmVkKG5ldyBmLkNvbG9yKDAuMiwgMC4yLCAwLjIsIDEpKSk7XHJcblxyXG4gIC8vUGh5c2ljYWwgUGxheWVyIFZhcmlhYmxlc1xyXG4gIGxldCBpc0dyb3VuZGVkOiBib29sZWFuO1xyXG4gIGxldCBtb3ZlbWVudHNwZWVkOiBudW1iZXIgPSA4O1xyXG4gIGxldCB0dXJuaW5nc3BlZWQ6IG51bWJlciA9IDgwO1xyXG4gIGxldCBwbGF5ZXJXZWlnaHQ6IG51bWJlciA9IDc1O1xyXG4gIGxldCBwbGF5ZXJKdW1wRm9yY2U6IG51bWJlciA9IDUwMDtcclxuICBsZXQgY21wQ2FtZXJhOiBmLkNvbXBvbmVudENhbWVyYTsgLy9XZSBsZXQgdGhlIGNhbWVyYSBsb29rIGF0IG91ciBwbGF5ZXIgaW4gdXBkYXRlXHJcbiAgbGV0IHlUdXJuOiBudW1iZXIgPSAwOyAvL0hvdyBoaWdoIHRoZSB0dXJuaW5nIGlucHV0IGN1cnJlbnRseSBpc1xyXG4gIGxldCBmb3J3YXJkTW92ZW1lbnQ6IG51bWJlciA9IDA7IC8vSG93IGhpZ2ggdGhlIGZvcndhcmQgbW92ZW1lbnQgaW5wdXQgY3VycmVudGx5IGlzXHJcblxyXG4gIC8vRnVuY3Rpb24gdG8gaW5pdGlhbGl6ZSB0aGUgRnVkZ2UgU2NlbmUgd2l0aCBhIGNhbWVyYSwgbGlnaHQsIHZpZXdwb3J0IGFuZCBQSFlTQ0lBTCBPYmplY3RzXHJcbiAgZnVuY3Rpb24gaW5pdChfZXZlbnQ6IEV2ZW50KTogdm9pZCB7XHJcblxyXG4gICAgaGllcmFyY2h5ID0gbmV3IGYuTm9kZShcIlNjZW5lXCIpOyAvL2NyZWF0ZSB0aGUgcm9vdCBOb2RlIHdoZXJlIGV2ZXJ5IG9iamVjdCBpcyBwYXJlbnRlZCB0by4gU2hvdWxkIG5ldmVyIGJlIGNoYW5nZWRcclxuXHJcbiAgICAvLyNyZWdpb24gUEhZU0lDU1xyXG4gICAgLy9PaW1vUGh5c2ljcyB3aGljaCBpcyBpbnRlZ3JhdGVkIGluIEZ1ZGdlIGlzIHVzaW5nIGEgY29ycmVjdGlvbkFsZ29yaXRobSBvbiBzb2x2ZXIgaXRlcmF0aW9ucyBpbnN0ZWFkIG9mIGZ1bGx5IHJlY2FsY3VsYXRlIHBoeXNpY3MgdG9vIG9mdGVuLCBcclxuICAgIC8vc28geW91IGNhbiBjcmFuayB0aGUgbnVtYmVyIG9mIHNvbHZlciBpdGVyYXRpb25zIGhpZ2hlciB0aGFuIHdpdGggbW9zdCBlbmdpbmVzLiBCdXQgT2ltbyBpcyBpbiBnZW5lcmFsIGxlc3MgYWNjdXJhdGUuXHJcbiAgICAvL1RoaXMgaXMgbm90IG5lZWRlZCBidXQgd2UganVzdCBkbyBpdCB0byBzaG93IGl0LlxyXG4gICAgZi5QaHlzaWNzLndvcmxkLnNldFNvbHZlckl0ZXJhdGlvbnMoMTAwMCk7XHJcbiAgICBmLlBoeXNpY3Muc2V0dGluZ3MuZGVmYXVsdFJlc3RpdHV0aW9uID0gMC4xNTtcclxuICAgIGYuUGh5c2ljcy5zZXR0aW5ncy5kZWZhdWx0RnJpY3Rpb24gPSAwLjg7XHJcblxyXG5cclxuICAgIC8vUEhZU0lDUyBcclxuICAgIC8vQ3JlYXRpbmcgYSBwaHlzaWNhbGx5IHN0YXRpYyBncm91bmQgcGxhbmUgZm9yIG91ciBwaHlzaWNzIHBsYXlncm91bmQuIEEgc2ltcGxlIHNjYWxlZCBjdWJlIGJ1dCB3aXRoIHBoeXNpY3MgdHlwZSBzZXQgdG8gc3RhdGljXHJcbiAgICBib2RpZXNbMF0gPSBjcmVhdGVDb21wbGV0ZU5vZGUoXCJHcm91bmRcIiwgZW52aXJvbm1lbnRNYXQsIG5ldyBmLk1lc2hDdWJlKCksIDAsIGYuUEhZU0lDU19UWVBFLlNUQVRJQywgZi5QSFlTSUNTX0dST1VQLkdST1VQXzIpO1xyXG4gICAgYm9kaWVzWzBdLm10eExvY2FsLnNjYWxlKG5ldyBmLlZlY3RvcjMoMTQsIDAuMywgMTQpKTsgLy9TY2FsZSB0aGUgYm9keSB3aXRoIGl0J3Mgc3RhbmRhcmQgQ29tcG9uZW50VHJhbnNmb3JtXHJcbiAgICAvL2JvZGllc1swXS5tdHhMb2NhbC5yb3RhdGVYKDQsIHRydWUpOyAvL0dpdmUgaXQgYSBzbGlnaHQgcm90YXRpb24gc28gdGhlIHBoeXNpY2FsIG9iamVjdHMgYXJlIHNsaWRpbmcsIGFsd2F5cyBmcm9tIGxlZnQgd2hlbiBpdCdzIGFmdGVyIGEgc2NhbGluZ1xyXG4gICAgaGllcmFyY2h5LmFwcGVuZENoaWxkKGJvZGllc1swXSk7IC8vQWRkIHRoZSBub2RlIHRvIHRoZSBzY2VuZSBieSBhZGRpbmcgaXQgdG8gdGhlIHNjZW5lLXJvb3RcclxuXHJcblxyXG4gICAgLy9DT05DRVBUIDEgLSBDb252ZXggQ29sbGlkZXJzIC8gQ29tcG91bmQgQ29sbGlkZXIgLSBBIENvbGxpZGVyIFNoYXBlIHRoYXQgaXMgbm90IHByZWRlZmluZWQgYW5kIGhhcyBubyBob2xlcyBpbiBpdFxyXG4gICAgLy9lLmcuIHNvbWV0aGluZyBsaWtlIGEgbW9ybmluZyBzdGFyIHNoYXBlIGEgY3ViZSB3aXRoIHB5cmFtaWRlcyBhcyBzcGlrZXMgb24gdGhlIHNpZGVcclxuICAgIGNyZWF0ZUNvbnZleENvbXBvdW50Q29sbGlkZXIoKTtcclxuXHJcbiAgICAvL0NPTkNFUFQgMiAtIFNldHRpbmcgVXAgYSBwaHlzaWNhbCBwbGF5ZXJcclxuICAgIC8vQSBwaHlzaWNhbCBwbGF5ZXIgaXMgYSBzdGFuZGFyZCBwaHlzaWNhbCBvYmplY3Qgb2YgdGhlIHR5cGUgZHluYW1pYywgQlVULCB5b3Ugb25seSB3YW50IHRvIHJvdGF0ZSBvbiBZIGF4aXMsIGFuZCB5b3Ugd2FudCB0byBzZXR1cCB0aGluZ3NcclxuICAgIC8vbGlrZSBhIGdyb3VuZGVkIHZhcmlhYmxlIGFuZCBvdGhlciBtb3ZlbWVudCByZWxhdGVkIHN0dWZmLlxyXG4gICAgc2V0dGluZ1VwQVBsYXllcigpO1xyXG5cclxuICAgIC8vU2V0dGluZyB1cCBzb21lIGVudmlyb25tZW50IG9iamVjdHMgZm9yIG91ciBwbGF5ZXIgdG8ganVtcCBvblxyXG4gICAgYm9kaWVzWzEwMF0gPSBjcmVhdGVDb21wbGV0ZU5vZGUoXCJFbnZpbnJvbWVudFwiLCBlbnZpcm9ubWVudE1hdCwgbmV3IGYuTWVzaEN1YmUoKSwgMCwgZi5QSFlTSUNTX1RZUEUuU1RBVElDLCBmLlBIWVNJQ1NfR1JPVVAuR1JPVVBfMik7XHJcbiAgICBib2RpZXNbMTAwXS5tdHhMb2NhbC50cmFuc2xhdGUobmV3IGYuVmVjdG9yMyg1LCAxLCAzKSk7XHJcbiAgICBib2RpZXNbMTAwXS5tdHhMb2NhbC5zY2FsZShuZXcgZi5WZWN0b3IzKDEsIDEsIDEpKTtcclxuICAgIC8vYm9kaWVzWzEwMF0ubXR4TG9jYWwucm90YXRlWCg0LCB0cnVlKTsgXHJcbiAgICBoaWVyYXJjaHkuYXBwZW5kQ2hpbGQoYm9kaWVzWzEwMF0pOyAvL0FkZCB0aGUgbm9kZSB0byB0aGUgc2NlbmUgYnkgYWRkaW5nIGl0IHRvIHRoZSBzY2VuZS1yb290XHJcblxyXG4gICAgYm9kaWVzWzEwMV0gPSBjcmVhdGVDb21wbGV0ZU5vZGUoXCJFbnZpbnJvbWVudFwiLCBlbnZpcm9ubWVudE1hdCwgbmV3IGYuTWVzaEN1YmUoKSwgMCwgZi5QSFlTSUNTX1RZUEUuU1RBVElDLCBmLlBIWVNJQ1NfR1JPVVAuR1JPVVBfMik7XHJcbiAgICBib2RpZXNbMTAxXS5tdHhMb2NhbC50cmFuc2xhdGUobmV3IGYuVmVjdG9yMygtMywgMy41LCAyKSk7XHJcbiAgICBib2RpZXNbMTAxXS5tdHhMb2NhbC5zY2FsZShuZXcgZi5WZWN0b3IzKDEsIDEsIDUpKTtcclxuICAgIGJvZGllc1sxMDFdLm10eExvY2FsLnJvdGF0ZVgoNDAsIHRydWUpO1xyXG4gICAgaGllcmFyY2h5LmFwcGVuZENoaWxkKGJvZGllc1sxMDFdKTtcclxuXHJcbiAgICAvKlN0YWlycywga2VlcCBpbiBtaW5kIG91ciBwbGF5ZXIgaXMgb25seSBhYmxlIHRvIHdhbGsgdXAgc3RhcnMgYmVjYXVzZSBoZSBpcyBhIGNhcHN1bGUgYnV0IGl0J3Mgbm90IGVhc3kgZm9yIGhpbSBiZWNhdXNlIHdlIGRvIG5vdCBsaWZ0IGFueSBmZWV0LFxyXG4gICAgd2UgYXJlIGp1c3QgcHVzaGluZyBhIGNhcHN1bGUgd2l0aCBmb3JjZSBhZ2FpbnN0IGEgc2xvcGUgdW50aWwgaXQncyBwdXNoZWQgdXAsIHdoaWNoIHdlIG1ha2UgZWFzaWVyIGJ5IGdpdmluZyB0aGUgcGxheWVyIGEgbG93IGZyaWN0aW9uLCB0aGUgd2F5XHJcbiAgICB3ZSBzZXQgdGhlIHBsYXllciB1cCBoZSBjYW4gbm90IHNsaWRlIG9uIHRoZSBncm91bmQgYnV0IGl0IGhlbHBzIHRvIGdldCBoaW0gdXAgdGhlIHN0YWlycy5cclxuICAgIFNvIHlvdSBuZWVkIHRvIHR1cm4gYXJvdW5kIGEgbGl0dGxlIHdoaWxlIG1vdmluZyB0byBjbGltYiB0aGVzZSBzdGFpcnNcclxuICAgIGFkdmFuY2VkIHN0YWlyd2Fsa2luZyBpcyBzb21ldGhpbmcgeW91IG5lZWQgdG8gZmlndXJlIG91dCB5b3Vyc2VsZi4gS2V5d29yZCByYXljYXN0IGlzIGEgZ29vZCBzdGFydC4gXHJcbiAgICAqL1xyXG4gICAgbGV0IHNsb3BlSGVpZ2h0OiBudW1iZXIgPSAwLjIwO1xyXG4gICAgYm9kaWVzWzEwMl0gPSBjcmVhdGVDb21wbGV0ZU5vZGUoXCJFbnZpbnJvbWVudFwiLCBlbnZpcm9ubWVudE1hdCwgbmV3IGYuTWVzaEN1YmUoKSwgMCwgZi5QSFlTSUNTX1RZUEUuU1RBVElDLCBmLlBIWVNJQ1NfR1JPVVAuR1JPVVBfMik7XHJcbiAgICBib2RpZXNbMTAyXS5tdHhMb2NhbC50cmFuc2xhdGUobmV3IGYuVmVjdG9yMygtMywgc2xvcGVIZWlnaHQsIC0yKSk7XHJcbiAgICBib2RpZXNbMTAyXS5tdHhMb2NhbC5zY2FsZShuZXcgZi5WZWN0b3IzKDIsIHNsb3BlSGVpZ2h0ICogMiwgMC4zNSkpO1xyXG4gICAgaGllcmFyY2h5LmFwcGVuZENoaWxkKGJvZGllc1sxMDJdKTtcclxuICAgIGJvZGllc1sxMDNdID0gY3JlYXRlQ29tcGxldGVOb2RlKFwiRW52aW5yb21lbnRcIiwgZW52aXJvbm1lbnRNYXQsIG5ldyBmLk1lc2hDdWJlKCksIDAsIGYuUEhZU0lDU19UWVBFLlNUQVRJQywgZi5QSFlTSUNTX0dST1VQLkdST1VQXzIpO1xyXG4gICAgYm9kaWVzWzEwM10ubXR4TG9jYWwudHJhbnNsYXRlKG5ldyBmLlZlY3RvcjMoLTMsIHNsb3BlSGVpZ2h0ICogMiwgLTIgLSAwLjM1KSk7XHJcbiAgICBib2RpZXNbMTAzXS5tdHhMb2NhbC5zY2FsZShuZXcgZi5WZWN0b3IzKDIsIHNsb3BlSGVpZ2h0ICogMiwgMC4zNSkpO1xyXG4gICAgaGllcmFyY2h5LmFwcGVuZENoaWxkKGJvZGllc1sxMDNdKTtcclxuICAgIGJvZGllc1sxMDRdID0gY3JlYXRlQ29tcGxldGVOb2RlKFwiRW52aW5yb21lbnRcIiwgZW52aXJvbm1lbnRNYXQsIG5ldyBmLk1lc2hDdWJlKCksIDAsIGYuUEhZU0lDU19UWVBFLlNUQVRJQywgZi5QSFlTSUNTX0dST1VQLkdST1VQXzIpO1xyXG4gICAgYm9kaWVzWzEwNF0ubXR4TG9jYWwudHJhbnNsYXRlKG5ldyBmLlZlY3RvcjMoLTMsIHNsb3BlSGVpZ2h0ICogMywgLTIgLSAwLjM1ICogMikpO1xyXG4gICAgYm9kaWVzWzEwNF0ubXR4TG9jYWwuc2NhbGUobmV3IGYuVmVjdG9yMygyLCBzbG9wZUhlaWdodCAqIDIsIDAuMzUpKTtcclxuICAgIGhpZXJhcmNoeS5hcHBlbmRDaGlsZChib2RpZXNbMTA0XSk7XHJcbiAgICBib2RpZXNbMTA1XSA9IGNyZWF0ZUNvbXBsZXRlTm9kZShcIkVudmlucm9tZW50XCIsIGVudmlyb25tZW50TWF0LCBuZXcgZi5NZXNoQ3ViZSgpLCAwLCBmLlBIWVNJQ1NfVFlQRS5TVEFUSUMsIGYuUEhZU0lDU19HUk9VUC5HUk9VUF8yKTtcclxuICAgIGJvZGllc1sxMDVdLm10eExvY2FsLnRyYW5zbGF0ZShuZXcgZi5WZWN0b3IzKC0zLCBzbG9wZUhlaWdodCAqIDQsIC0yIC0gMC4zNSAqIDMpKTtcclxuICAgIGJvZGllc1sxMDVdLm10eExvY2FsLnNjYWxlKG5ldyBmLlZlY3RvcjMoMiwgc2xvcGVIZWlnaHQgKiAyLCAwLjM1KSk7XHJcbiAgICBoaWVyYXJjaHkuYXBwZW5kQ2hpbGQoYm9kaWVzWzEwNV0pO1xyXG4gICAgYm9kaWVzWzEwNl0gPSBjcmVhdGVDb21wbGV0ZU5vZGUoXCJFbnZpbnJvbWVudFwiLCBlbnZpcm9ubWVudE1hdCwgbmV3IGYuTWVzaEN1YmUoKSwgMCwgZi5QSFlTSUNTX1RZUEUuU1RBVElDLCBmLlBIWVNJQ1NfR1JPVVAuR1JPVVBfMik7XHJcbiAgICBib2RpZXNbMTA2XS5tdHhMb2NhbC50cmFuc2xhdGUobmV3IGYuVmVjdG9yMygtMywgc2xvcGVIZWlnaHQgKiA1LCAtMiAtIDAuMzUgKiA0KSk7XHJcbiAgICBib2RpZXNbMTA2XS5tdHhMb2NhbC5zY2FsZShuZXcgZi5WZWN0b3IzKDIsIHNsb3BlSGVpZ2h0ICogMiwgMC4zNSkpO1xyXG4gICAgaGllcmFyY2h5LmFwcGVuZENoaWxkKGJvZGllc1sxMDZdKTtcclxuICAgIC8vI2VuZHJlZ2lvbiBQSFlTSUNTXHJcblxyXG5cclxuICAgIC8vU3RhbmRhcmQgRnVkZ2UgU2NlbmUgSW5pdGlhbGl6YXRpb24gLSBDcmVhdGluZyBhIGRpcmVjdGlvbmFsIGxpZ2h0LCBhIGNhbWVyYSBhbmQgaW5pdGlhbGl6ZSB0aGUgdmlld3BvcnRcclxuICAgIGxldCBjbXBMaWdodDogZi5Db21wb25lbnRMaWdodCA9IG5ldyBmLkNvbXBvbmVudExpZ2h0KG5ldyBmLkxpZ2h0RGlyZWN0aW9uYWwoZi5Db2xvci5DU1MoXCJXSElURVwiKSkpO1xyXG4gICAgY21wTGlnaHQucGl2b3QubG9va0F0KG5ldyBmLlZlY3RvcjMoMC41LCAtMSwgLTAuOCkpOyAvL1NldCBsaWdodCBkaXJlY3Rpb25cclxuICAgIGhpZXJhcmNoeS5hZGRDb21wb25lbnQoY21wTGlnaHQpO1xyXG5cclxuICAgIGNtcENhbWVyYSA9IG5ldyBmLkNvbXBvbmVudENhbWVyYSgpO1xyXG4gICAgY21wQ2FtZXJhLmJhY2tncm91bmRDb2xvciA9IGYuQ29sb3IuQ1NTKFwiR1JFWVwiKTtcclxuICAgIGNtcENhbWVyYS5waXZvdC50cmFuc2xhdGUobmV3IGYuVmVjdG9yMygxNywgNCwgMTcpKTsgLy9Nb3ZlIGNhbWVyYSBmYXIgYmFjayBzbyB0aGUgd2hvbGUgc2NlbmUgaXMgdmlzaWJsZVxyXG4gICAgY21wQ2FtZXJhLnBpdm90Lmxvb2tBdChmLlZlY3RvcjMuWkVSTygpKTsgLy9TZXQgdGhlIGNhbWVyYSBtYXRyaXggc28gdGhhdCBpdCBsb29rcyBhdCB0aGUgY2VudGVyIG9mIHRoZSBzY2VuZVxyXG5cclxuICAgIHZpZXdQb3J0ID0gbmV3IGYuVmlld3BvcnQoKTsgLy9DcmVhdGluZyBhIHZpZXdwb3J0IHRoYXQgaXMgcmVuZGVyZWQgb250byB0aGUgaHRtbCBjYW52YXMgZWxlbWVudFxyXG4gICAgdmlld1BvcnQuaW5pdGlhbGl6ZShcIlZpZXdwb3J0XCIsIGhpZXJhcmNoeSwgY21wQ2FtZXJhLCBhcHApOyAvL2luaXRpYWxpemUgdGhlIHZpZXdwb3J0IHdpdGggdGhlIHJvb3Qgbm9kZSwgY2FtZXJhIGFuZCBjYW52YXNcclxuXHJcbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwia2V5cHJlc3NcIiwgaG5kS2V5KTsgLy9BZGRpbmcgYSBsaXN0ZW5lciBmb3Iga2V5cHJlc3MgaGFuZGxpbmdcclxuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJrZXl1cFwiLCBobmRLZXlVcCk7IC8vQWRkaW5nIGEgbGlzdGVuZXIgZm9yIGtleVVwXHJcblxyXG4gICAgLy9QSFlTSUNTIC0gU3RhcnQgdXNpbmcgcGh5c2ljcyBieSB0ZWxsaW5nIHRoZSBwaHlzaWNzIHRoZSBzY2VuZSByb290IG9iamVjdC4gUGh5c2ljcyB3aWxsIHJlY2FsY3VsYXRlIGV2ZXJ5IHRyYW5zZm9ybSBhbmQgaW5pdGlhbGl6ZVxyXG4gICAgZi5QaHlzaWNzLnN0YXJ0KGhpZXJhcmNoeSk7XHJcblxyXG4gICAgZi5QaHlzaWNzLnNldHRpbmdzLmRlYnVnRHJhdyA9IHRydWU7XHJcblxyXG4gICAgLy9JbXBvcnRhbnQgc3RhcnQgdGhlIGdhbWUgbG9vcCBhZnRlciBzdGFydGluZyBwaHlzaWNzLCBzbyBwaHlzaWNzIGNhbiB1c2UgdGhlIGN1cnJlbnQgdHJhbnNmb3JtIGJlZm9yZSBpdCdzIGZpcnN0IGl0ZXJhdGlvblxyXG4gICAgZi5Mb29wLmFkZEV2ZW50TGlzdGVuZXIoZi5FVkVOVC5MT09QX0ZSQU1FLCB1cGRhdGUpOyAvL1RlbGwgdGhlIGdhbWUgbG9vcCB0byBjYWxsIHRoZSB1cGRhdGUgZnVuY3Rpb24gb24gZWFjaCBmcmFtZVxyXG4gICAgZi5Mb29wLnN0YXJ0KCk7IC8vU3RhcmQgdGhlIGdhbWUgbG9vcFxyXG4gIH1cclxuXHJcbiAgLy9GdW5jdGlvbiB0byBhbmltYXRlL3VwZGF0ZSB0aGUgRnVkZ2Ugc2NlbmUsIGNvbW1vbmx5IGtub3duIGFzIGdhbWVsb29wXHJcbiAgZnVuY3Rpb24gdXBkYXRlKCk6IHZvaWQge1xyXG4gICAgLy9QSFlTSUNTIC0gU2ltdWxhdGUgcGh5c2ljYWwgY2hhbmdlcyBlYWNoIGZyYW1lLCBwYXJhbWV0ZXIgdG8gc2V0IHRpbWUgYmV0d2VlbiBmcmFtZXNcclxuICAgIGYuUGh5c2ljcy53b3JsZC5zaW11bGF0ZShmLkxvb3AudGltZUZyYW1lUmVhbCAvIDEwMDApO1xyXG5cclxuICAgIC8vUGxheWVyIGNvbnN0YW50IHVwZGF0ZSBmdW5jdGlvbnMgZG8gaXQgYWZ0ZXIgcGh5c2ljcyBjYWxjdWxhdGlvbiBpcyBiZXN0IHByYWN0aWNlXHJcbiAgICBjbXBDYW1lcmEucGl2b3QubG9va0F0KHBsYXllci5tdHhXb3JsZC50cmFuc2xhdGlvbik7XHJcbiAgICBwbGF5ZXJJc0dyb3VuZGVkUmF5Y2FzdCgpO1xyXG4gICAgcGxheWVyTW92ZW1lbnQoZi5Mb29wLnRpbWVGcmFtZVJlYWwgLyAxMDAwKTtcclxuXHJcbiAgICB2aWV3UG9ydC5kcmF3KCk7IC8vIERyYXcgdGhlIGN1cnJlbnQgRnVkZ2UgU2NlbmUgdG8gdGhlIGNhbnZhc1xyXG4gIH1cclxuXHJcbiAgLy8gRnVuY3Rpb24gdG8gcXVpY2tseSBjcmVhdGUgYSBub2RlIHdpdGggbXVsdGlwbGUgbmVlZGVkIEZ1ZGdlQ29tcG9uZW50cywgaW5jbHVkaW5nIGEgcGh5c2ljcyBjb21wb25lbnRcclxuICBmdW5jdGlvbiBjcmVhdGVDb21wbGV0ZU5vZGUoX25hbWU6IHN0cmluZywgX21hdGVyaWFsOiBmLk1hdGVyaWFsLCBfbWVzaDogZi5NZXNoLCBfbWFzczogbnVtYmVyLCBfcGh5c2ljc1R5cGU6IGYuUEhZU0lDU19UWVBFLCBfZ3JvdXA6IGYuUEhZU0lDU19HUk9VUCA9IGYuUEhZU0lDU19HUk9VUC5ERUZBVUxULCBfY29sVHlwZTogZi5DT0xMSURFUl9UWVBFID0gZi5DT0xMSURFUl9UWVBFLkNVQkUsIF9jb252ZXhNZXNoOiBGbG9hdDMyQXJyYXkgPSBudWxsKTogZi5Ob2RlIHtcclxuICAgIGxldCBub2RlOiBmLk5vZGUgPSBuZXcgZi5Ob2RlKF9uYW1lKTtcclxuICAgIGxldCBjbXBNZXNoOiBmLkNvbXBvbmVudE1lc2ggPSBuZXcgZi5Db21wb25lbnRNZXNoKF9tZXNoKTtcclxuICAgIGxldCBjbXBNYXRlcmlhbDogZi5Db21wb25lbnRNYXRlcmlhbCA9IG5ldyBmLkNvbXBvbmVudE1hdGVyaWFsKF9tYXRlcmlhbCk7XHJcblxyXG4gICAgbGV0IGNtcFRyYW5zZm9ybTogZi5Db21wb25lbnRUcmFuc2Zvcm0gPSBuZXcgZi5Db21wb25lbnRUcmFuc2Zvcm0oKTtcclxuICAgIGxldCBjbXBSaWdpZGJvZHk6IGYuQ29tcG9uZW50UmlnaWRib2R5ID0gbmV3IGYuQ29tcG9uZW50UmlnaWRib2R5KF9tYXNzLCBfcGh5c2ljc1R5cGUsIF9jb2xUeXBlLCBfZ3JvdXAsIG51bGwsIF9jb252ZXhNZXNoKTsgLy9hZGQgYSBGbG9hdDMyIEFycmF5IG9mIHBvaW50cyB0byB0aGUgcmIgY29uc3RydWN0b3IgdG8gY3JlYXRlIGEgY29udmV4IGNvbGxpZGVyXHJcbiAgICBub2RlLmFkZENvbXBvbmVudChjbXBNZXNoKTtcclxuICAgIG5vZGUuYWRkQ29tcG9uZW50KGNtcE1hdGVyaWFsKTtcclxuICAgIG5vZGUuYWRkQ29tcG9uZW50KGNtcFRyYW5zZm9ybSk7XHJcbiAgICBub2RlLmFkZENvbXBvbmVudChjbXBSaWdpZGJvZHkpO1xyXG4gICAgcmV0dXJuIG5vZGU7XHJcbiAgfVxyXG5cclxuICBmdW5jdGlvbiBjcmVhdGVDb252ZXhDb21wb3VudENvbGxpZGVyKCk6IHZvaWQge1xyXG4gICAgLy9TdGVwIDEgLSBkZWZpbmUgcG9pbnRzIHRoYXQgY29uc3RydWN0IHRoZSBzaGFwZSB5b3Ugd2FudCBmb3IgeW91ciBjb2xsaWRlciAtIG9yZGVyIGlzIGltcG9ydGFudCBzbyB0aGluayBhYm91dCB3aGF0IHBvaW50IGNvbWVzIHdoZW4gaW4geW91ciBzaGFwZVxyXG4gICAgbGV0IGNvbGxpZGVyVmVydGljZXM6IEZsb2F0MzJBcnJheSA9IG5ldyBGbG9hdDMyQXJyYXlcclxuICAgICAgKFtcclxuICAgICAgICAxLCAtMSwgMSwgICAgIC8vU3RhcnQgb2Ygd2l0aCBhIGN1YmUgcG9pbnRcclxuICAgICAgICAwLCAtMiwgMCwgICAgIC8vZ28gdG8gYSBweXJhbWlkIHBvaW50XHJcbiAgICAgICAgMSwgMSwgMSwgICAgICAvL2JhY2sgdG8gdGhlIGN1YmVcclxuICAgICAgICAtIDEsIDEsIDEsICAgIC8vYWxvbmcgdGhlIGN1YmVcclxuICAgICAgICAtIDEsIC0xLCAxLCAgIC8vYWxvbmcgdGhlIGN1YmUgb24gYSBkaWZmZXJlbnQgc2lkZVxyXG4gICAgICAgIC0yLCAwLCAwLCAgICAgLy9nbyB0byBhbm90aGVyIHB5cmFtaWQgcG9pbnRcclxuICAgICAgICAxLCAxLCAtMSwgICAgIC8vYmFjayBvbiB0aGUgY3ViZVxyXG4gICAgICAgIC0gMSwgMSwgLTEsICAgLy9hbmQgc28gb24uLiBpdCBpcyBub3QgaW1wb3J0YW50IHRoYXQgYWxsIHBvaW50cyBhcmUgaW4gYSBjb3JyZWN0IG9yZGVyLFxyXG4gICAgICAgIC0gMSwgLTEsIC0xLCAgLy9idXQgc2luY2UgdGhlIHBoeXNpY3MgZW5naW5lIGlzIHRyeWluZyB0byBjb25zdHJ1Y3QgYSBzaGFwZSBvdXQgb2YgeW91ciBwb2ludHMgdGhhdCBpcyBjbG9zZWQgb2YgaXQgc2hvdWxkIG1ha2Ugc29tZSBzZW5zZVxyXG4gICAgICAgIDAsIDAsIC0yLFxyXG4gICAgICAgIDEsIC0xLCAtMSxcclxuICAgICAgICAyLCAwLCAwLFxyXG4gICAgICAgIDAsIDIsIDAsXHJcbiAgICAgICAgMCwgMCwgMlxyXG4gICAgICBdKTtcclxuXHJcbiAgICAvL1N0ZXAgMiAtIGRlZmluZSB0aGUgdmlzdWFsIG5vZGVzIHRoYXQgYXJlIHBhcnQgb2YgeW91ciB3aG9sZSBzaGFwZSwgc2luY2Ugd2UgaGF2ZSBhIGN1YmUgdGhhdCBpcyBzdXJvdW5kZWQgYnkgcHlyYW1pZHM6XHJcbiAgICAvL01haW4gU2hhcGVcclxuICAgIGJvZGllc1s1XSA9IGNyZWF0ZUNvbXBsZXRlTm9kZShcIkNvbXBvdW5kXCIsIG1hdGVyaWFsQ29udmV4U2hhcGUsIG5ldyBmLk1lc2hDdWJlKCksIDEsIGYuUEhZU0lDU19UWVBFLkRZTkFNSUMsIGYuUEhZU0lDU19HUk9VUC5ERUZBVUxULCBmLkNPTExJREVSX1RZUEUuQ09OVkVYLCBjb2xsaWRlclZlcnRpY2VzKTtcclxuICAgIGhpZXJhcmNoeS5hcHBlbmRDaGlsZChib2RpZXNbNV0pO1xyXG4gICAgYm9kaWVzWzVdLm10eExvY2FsLnRyYW5zbGF0ZShuZXcgZi5WZWN0b3IzKDIuNSwgNCwgMy41KSk7XHJcbiAgICBib2RpZXNbNV0ubXR4TG9jYWwucm90YXRlWCgyNyk7XHJcbiAgICBib2RpZXNbNV0ubXR4TG9jYWwucm90YXRlWSgzMik7XHJcbiAgICAvL0NvbXBvbmVudHMgLSBSZW1vdmluZyB0aGUgUGh5c2ljcyBjb21wb25lbnQgb24gZWFjaCBvZiB0aGVtIHNpbmNlIHRoZXkgYWxsIGJ1aWxkIG9uZSBzaGFwZSBvbiB0aGUgbWFpbiBOb2RlIG9ubHkgdGhlIHZpc3VhbCBub2RlcyBuZWVkIHRvIGJlIHRoZXJlXHJcbiAgICBib2RpZXNbNl0gPSBjcmVhdGVDb21wbGV0ZU5vZGUoXCJDb21wb3VuZFVwcGVyXCIsIG1hdGVyaWFsQ29udmV4U2hhcGUsIG5ldyBmLk1lc2hQeXJhbWlkKCksIDEsIGYuUEhZU0lDU19UWVBFLkRZTkFNSUMsIGYuUEhZU0lDU19HUk9VUC5ERUZBVUxULCBmLkNPTExJREVSX1RZUEUuUFlSQU1JRCk7XHJcbiAgICBib2RpZXNbNl0ucmVtb3ZlQ29tcG9uZW50KGJvZGllc1s2XS5nZXRDb21wb25lbnQoZi5Db21wb25lbnRSaWdpZGJvZHkpKTtcclxuICAgIGJvZGllc1s2XS5tdHhMb2NhbC50cmFuc2xhdGVZKDAuNSk7XHJcbiAgICBib2RpZXNbNl0ubXR4TG9jYWwuc2NhbGUobmV3IGYuVmVjdG9yMygxLCAwLjUsIDEpKTtcclxuICAgIGJvZGllc1s1XS5hcHBlbmRDaGlsZChib2RpZXNbNl0pOyAvL2FwcGVuZGluZyB0aGUgTm9kZSBub3QgdG8gdGhlIG1haW4gaGllcmFyY2h5IGJ1dCB0aGUgTm9kZSBpdCBpcyBwYXJ0IG9mXHJcbiAgICBib2RpZXNbN10gPSBjcmVhdGVDb21wbGV0ZU5vZGUoXCJDb21wb3VuZExvd2VyXCIsIG1hdGVyaWFsQ29udmV4U2hhcGUsIG5ldyBmLk1lc2hQeXJhbWlkKCksIDEsIGYuUEhZU0lDU19UWVBFLkRZTkFNSUMsIGYuUEhZU0lDU19HUk9VUC5ERUZBVUxULCBmLkNPTExJREVSX1RZUEUuUFlSQU1JRCk7XHJcbiAgICBib2RpZXNbN10ucmVtb3ZlQ29tcG9uZW50KGJvZGllc1s3XS5nZXRDb21wb25lbnQoZi5Db21wb25lbnRSaWdpZGJvZHkpKTtcclxuICAgIGJvZGllc1s3XS5tdHhMb2NhbC5yb3RhdGVYKDE4MCk7XHJcbiAgICBib2RpZXNbN10ubXR4TG9jYWwudHJhbnNsYXRlWSgwLjUpO1xyXG4gICAgYm9kaWVzWzddLm10eExvY2FsLnNjYWxlKG5ldyBmLlZlY3RvcjMoMSwgMC41LCAxKSk7XHJcbiAgICBib2RpZXNbNV0uYXBwZW5kQ2hpbGQoYm9kaWVzWzddKTtcclxuICAgIGJvZGllc1s4XSA9IGNyZWF0ZUNvbXBsZXRlTm9kZShcIkNvbXBvdW5kTGVmdFwiLCBtYXRlcmlhbENvbnZleFNoYXBlLCBuZXcgZi5NZXNoUHlyYW1pZCgpLCAxLCBmLlBIWVNJQ1NfVFlQRS5EWU5BTUlDLCBmLlBIWVNJQ1NfR1JPVVAuREVGQVVMVCwgZi5DT0xMSURFUl9UWVBFLlBZUkFNSUQpO1xyXG4gICAgYm9kaWVzWzhdLnJlbW92ZUNvbXBvbmVudChib2RpZXNbOF0uZ2V0Q29tcG9uZW50KGYuQ29tcG9uZW50UmlnaWRib2R5KSk7XHJcbiAgICBib2RpZXNbOF0ubXR4TG9jYWwucm90YXRlWig5MCk7XHJcbiAgICBib2RpZXNbOF0ubXR4TG9jYWwudHJhbnNsYXRlWSgwLjUpO1xyXG4gICAgYm9kaWVzWzhdLm10eExvY2FsLnNjYWxlKG5ldyBmLlZlY3RvcjMoMSwgMC41LCAxKSk7XHJcbiAgICBib2RpZXNbNV0uYXBwZW5kQ2hpbGQoYm9kaWVzWzhdKTtcclxuICAgIGJvZGllc1s5XSA9IGNyZWF0ZUNvbXBsZXRlTm9kZShcIkNvbXBvdW5kUmlnaHRcIiwgbWF0ZXJpYWxDb252ZXhTaGFwZSwgbmV3IGYuTWVzaFB5cmFtaWQoKSwgMSwgZi5QSFlTSUNTX1RZUEUuRFlOQU1JQywgZi5QSFlTSUNTX0dST1VQLkRFRkFVTFQsIGYuQ09MTElERVJfVFlQRS5QWVJBTUlEKTtcclxuICAgIGJvZGllc1s5XS5yZW1vdmVDb21wb25lbnQoYm9kaWVzWzldLmdldENvbXBvbmVudChmLkNvbXBvbmVudFJpZ2lkYm9keSkpO1xyXG4gICAgYm9kaWVzWzldLm10eExvY2FsLnJvdGF0ZVooLTkwKTtcclxuICAgIGJvZGllc1s5XS5tdHhMb2NhbC50cmFuc2xhdGVZKDAuNSk7XHJcbiAgICBib2RpZXNbOV0ubXR4TG9jYWwuc2NhbGUobmV3IGYuVmVjdG9yMygxLCAwLjUsIDEpKTtcclxuICAgIGJvZGllc1s1XS5hcHBlbmRDaGlsZChib2RpZXNbOV0pO1xyXG4gICAgYm9kaWVzWzEwXSA9IGNyZWF0ZUNvbXBsZXRlTm9kZShcIkNvbXBvdW5kRnJvbnRcIiwgbWF0ZXJpYWxDb252ZXhTaGFwZSwgbmV3IGYuTWVzaFB5cmFtaWQoKSwgMSwgZi5QSFlTSUNTX1RZUEUuRFlOQU1JQywgZi5QSFlTSUNTX0dST1VQLkRFRkFVTFQsIGYuQ09MTElERVJfVFlQRS5QWVJBTUlEKTtcclxuICAgIGJvZGllc1sxMF0ucmVtb3ZlQ29tcG9uZW50KGJvZGllc1sxMF0uZ2V0Q29tcG9uZW50KGYuQ29tcG9uZW50UmlnaWRib2R5KSk7XHJcbiAgICBib2RpZXNbMTBdLm10eExvY2FsLnJvdGF0ZVgoOTApO1xyXG4gICAgYm9kaWVzWzEwXS5tdHhMb2NhbC50cmFuc2xhdGVZKDAuNSk7XHJcbiAgICBib2RpZXNbMTBdLm10eExvY2FsLnNjYWxlKG5ldyBmLlZlY3RvcjMoMSwgMC41LCAxKSk7XHJcbiAgICBib2RpZXNbNV0uYXBwZW5kQ2hpbGQoYm9kaWVzWzEwXSk7XHJcbiAgICBib2RpZXNbMTFdID0gY3JlYXRlQ29tcGxldGVOb2RlKFwiQ29tcG91bmRCYWNrXCIsIG1hdGVyaWFsQ29udmV4U2hhcGUsIG5ldyBmLk1lc2hQeXJhbWlkKCksIDEsIGYuUEhZU0lDU19UWVBFLkRZTkFNSUMsIGYuUEhZU0lDU19HUk9VUC5ERUZBVUxULCBmLkNPTExJREVSX1RZUEUuUFlSQU1JRCk7XHJcbiAgICBib2RpZXNbMTFdLnJlbW92ZUNvbXBvbmVudChib2RpZXNbMTFdLmdldENvbXBvbmVudChmLkNvbXBvbmVudFJpZ2lkYm9keSkpO1xyXG4gICAgYm9kaWVzWzExXS5tdHhMb2NhbC5yb3RhdGVYKC05MCk7XHJcbiAgICBib2RpZXNbMTFdLm10eExvY2FsLnRyYW5zbGF0ZVkoMC41KTtcclxuICAgIGJvZGllc1sxMV0ubXR4TG9jYWwuc2NhbGUobmV3IGYuVmVjdG9yMygxLCAwLjUsIDEpKTtcclxuICAgIGJvZGllc1s1XS5hcHBlbmRDaGlsZChib2RpZXNbMTFdKTtcclxuICAgIGJvZGllc1s1XS5nZXRDb21wb25lbnQoZi5Db21wb25lbnRSaWdpZGJvZHkpLnJlc3RpdHV0aW9uID0gMztcclxuICB9XHJcblxyXG4gIC8vU2V0dGluZyB1cCBhIHBoeXNpY2FsIHBsYXllciB3aGljaCBpcyBub3RoaWduIGJ1dCBhIGN1YmUgYnV0IGFibGUgdG8gcGxhdGZvcm0gaW4gb3VyIGxpdHRsZSB3b3JsZCBhbmQgcmVhY3RpbmcgdG8gc3R1ZmZcclxuICBmdW5jdGlvbiBzZXR0aW5nVXBBUGxheWVyKCk6IHZvaWQge1xyXG4gICAgcGxheWVyID0gY3JlYXRlQ29tcGxldGVOb2RlKFwiUGxheWVyXCIsIG1hdGVyaWFsUGxheWVyLCBuZXcgZi5NZXNoQ3ViZSgpLCBwbGF5ZXJXZWlnaHQsIGYuUEhZU0lDU19UWVBFLkRZTkFNSUMsIGYuUEhZU0lDU19HUk9VUC5ERUZBVUxULCBmLkNPTExJREVSX1RZUEUuQ0FQU1VMRSk7XHJcbiAgICBoaWVyYXJjaHkuYXBwZW5kQ2hpbGQocGxheWVyKTtcclxuICAgIHBsYXllckJvZHkgPSBwbGF5ZXIuZ2V0Q29tcG9uZW50KGYuQ29tcG9uZW50UmlnaWRib2R5KTtcclxuICAgIHBsYXllci5tdHhMb2NhbC5zY2FsZShuZXcgZi5WZWN0b3IzKDAuNSwgMS44LCAwLjMpKTtcclxuICAgIHBsYXllci5tdHhMb2NhbC50cmFuc2xhdGUobmV3IGYuVmVjdG9yMygyLjUsIDQsIDMuNSkpO1xyXG4gICAgcGxheWVyQm9keS5yb3RhdGlvbkluZmx1ZW5jZUZhY3RvciA9IG5ldyBmLlZlY3RvcjMoMCwgMCwgMCk7IC8vUGh5c2ljcyBub3QgdHVybiBvdXIgcGxheWVyIHdlIGRvIGl0IG91cnNlbHZlc1xyXG4gICAgLy9zaW5jZSBvdXIgY2Fwc3VsZSBjb2xsaWRlciBpcyBhIGJveCB3aXRoIGhhbGYgc3BoZXJlcyBvbiB0b3AgYW5kIGJvdHRvbSBpdCdzIGEgbGl0dGxlIGhpZ2hlciB0aGFuIG91ciBib3ggbWVzaCwgd2UgbmVlZCB0byBzY2FsZSB0aGUgcGl2b3Qgb24gdGhlIHJiIGl0c2VsZlxyXG4gICAgcGxheWVyQm9keS5waXZvdC5zY2FsZShuZXcgZi5WZWN0b3IzKDEsIDAuODUsIDEpKTtcclxuICAgIHBsYXllckJvZHkuZnJpY3Rpb24gPSAwLjAxOyAvL2xvd2VyIHRoZSBmcmljdGlvbiB0byBtYWtlIGl0IGVhc2llciBjbGltYmluZyBzdGFpcnMgLSB0aGlzIGlzIG9ubHkgbmVlZGVkIGluIHRoaXMga2luZCBvZiBwbGF5ZXIgc3RydWN0dXJlXHJcblxyXG4gICAgLy9hZGRpZ24gYSBub3NlIHRvIG91ciBwbGF5ZXIgc28gd2Uga25vdyB3aGF0cyB0aGUgZm9yd2FyZCBkaXJlY3Rpb24gLSBidXQgaXQncyBub3QgYSBwaHlzaWNzIG9iamVjdFxyXG4gICAgbGV0IHBsYXllck5vc2U6IGYuTm9kZSA9IGNyZWF0ZUNvbXBsZXRlTm9kZShcIlBsYXllck5vc2VcIiwgbWF0ZXJpYWxQbGF5ZXIsIG5ldyBmLk1lc2hDdWJlKCksIHBsYXllcldlaWdodCwgZi5QSFlTSUNTX1RZUEUuRFlOQU1JQyk7XHJcbiAgICBwbGF5ZXJOb3NlLm10eExvY2FsLnRyYW5zbGF0ZShuZXcgZi5WZWN0b3IzKDAsIDAuMiwgMC40KSk7XHJcbiAgICBwbGF5ZXJOb3NlLm10eExvY2FsLnNjYWxlKG5ldyBmLlZlY3RvcjMoMC4xLCAwLjIsIDEuNSkpO1xyXG4gICAgcGxheWVyTm9zZS5yZW1vdmVDb21wb25lbnQocGxheWVyTm9zZS5nZXRDb21wb25lbnQoZi5Db21wb25lbnRSaWdpZGJvZHkpKTtcclxuICAgIHBsYXllci5hZGRDaGlsZChwbGF5ZXJOb3NlKTtcclxuICB9XHJcblxyXG4gIC8vQ2hlY2sgaWYgb3VyIHBoeXNpY2FsIHBsYXllciBpcyBoaXR0aW5nIGEgc3VyZmFjZSB3aXRoIGhpcyBmZWVkLCBpZiB5byBsZXQgaGltIGJlIGFibGUgdG8ganVtcFxyXG4gIGZ1bmN0aW9uIHBsYXllcklzR3JvdW5kZWRSYXljYXN0KCk6IHZvaWQge1xyXG4gICAgbGV0IGhpdEluZm86IGYuUmF5SGl0SW5mbztcclxuICAgIGhpdEluZm8gPSBmLlBoeXNpY3MucmF5Y2FzdChwbGF5ZXJCb2R5LmdldFBvc2l0aW9uKCksIG5ldyBmLlZlY3RvcjMoMCwgLTEsIDApLCAxLjEpO1xyXG4gICAgaWYgKGhpdEluZm8uaGl0KSB7XHJcbiAgICAgIGlzR3JvdW5kZWQgPSB0cnVlO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgaXNHcm91bmRlZCA9IGZhbHNlO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcblxyXG4gIC8vIEV2ZW50IEZ1bmN0aW9uIGhhbmRsaW5nIGtleWJvYXJkIGlucHV0XHJcbiAgZnVuY3Rpb24gaG5kS2V5KF9ldmVudDogS2V5Ym9hcmRFdmVudCk6IHZvaWQge1xyXG5cclxuICAgIGlmIChfZXZlbnQuY29kZSA9PSBmLktFWUJPQVJEX0NPREUuQSkge1xyXG4gICAgICB5VHVybiA9IDE7XHJcbiAgICB9XHJcbiAgICBpZiAoX2V2ZW50LmNvZGUgPT0gZi5LRVlCT0FSRF9DT0RFLlcpIHtcclxuICAgICAgZm9yd2FyZE1vdmVtZW50ID0gMTtcclxuICAgIH1cclxuICAgIGlmIChfZXZlbnQuY29kZSA9PSBmLktFWUJPQVJEX0NPREUuUykge1xyXG4gICAgICBmb3J3YXJkTW92ZW1lbnQgPSAtMTtcclxuICAgIH1cclxuICAgIGlmIChfZXZlbnQuY29kZSA9PSBmLktFWUJPQVJEX0NPREUuRCkge1xyXG4gICAgICB5VHVybiA9IC0xO1xyXG4gICAgfVxyXG4gICAgaWYgKF9ldmVudC5jb2RlID09IGYuS0VZQk9BUkRfQ09ERS5TUEFDRSkge1xyXG4gICAgICBpZiAoaXNHcm91bmRlZCkgLy9MZXQgdGhlIHBsYXllciBvbmx5IGp1bXBpbmcgd2hlbiBvbiB0aGUgZ3JvdW5kXHJcbiAgICAgICAgcGxheWVyQm9keS5hcHBseUxpbmVhckltcHVsc2UobmV3IGYuVmVjdG9yMygwLCBwbGF5ZXJKdW1wRm9yY2UsIDApKTtcclxuICAgIH1cclxuXHJcbiAgICBpZiAoX2V2ZW50LmNvZGUgPT0gZi5LRVlCT0FSRF9DT0RFLlQpIHtcclxuICAgICAgZi5QaHlzaWNzLnNldHRpbmdzLmRlYnVnTW9kZSA9IGYuUGh5c2ljcy5zZXR0aW5ncy5kZWJ1Z01vZGUgPT0gZi5QSFlTSUNTX0RFQlVHTU9ERS5KT0lOVFNfQU5EX0NPTExJREVSID8gZi5QSFlTSUNTX0RFQlVHTU9ERS5QSFlTSUNfT0JKRUNUU19PTkxZIDogZi5QSFlTSUNTX0RFQlVHTU9ERS5KT0lOVFNfQU5EX0NPTExJREVSO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLy9XaGVuIHRoZSBrZXkgaXMgdXAgd2Ugd2FudCB0byBzdG9wIG1vdmVtZW50XHJcbiAgZnVuY3Rpb24gaG5kS2V5VXAoX2V2ZW50OiBLZXlib2FyZEV2ZW50KTogdm9pZCB7XHJcbiAgICBpZiAoX2V2ZW50LmNvZGUgPT0gZi5LRVlCT0FSRF9DT0RFLkEpIHtcclxuICAgICAgeVR1cm4gPSAwO1xyXG4gICAgfVxyXG4gICAgaWYgKF9ldmVudC5jb2RlID09IGYuS0VZQk9BUkRfQ09ERS5XKSB7XHJcbiAgICAgIGZvcndhcmRNb3ZlbWVudCA9IDA7XHJcbiAgICB9XHJcbiAgICBpZiAoX2V2ZW50LmNvZGUgPT0gZi5LRVlCT0FSRF9DT0RFLlMpIHtcclxuICAgICAgZm9yd2FyZE1vdmVtZW50ID0gMDtcclxuICAgIH1cclxuICAgIGlmIChfZXZlbnQuY29kZSA9PSBmLktFWUJPQVJEX0NPREUuRCkge1xyXG4gICAgICB5VHVybiA9IDA7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvL0FjdHVhbGx5IG1vdmluZyB0aGUgcGxheWVyXHJcbiAgZnVuY3Rpb24gcGxheWVyTW92ZW1lbnQoX2RlbHRhVGltZTogbnVtYmVyKSB7XHJcbiAgICBsZXQgcGxheWVyRm9yd2FyZDogZi5WZWN0b3IzO1xyXG4gICAgcGxheWVyRm9yd2FyZCA9IGYuVmVjdG9yMy5aKCk7XHJcbiAgICBwbGF5ZXJGb3J3YXJkLnRyYW5zZm9ybShwbGF5ZXIubXR4V29ybGQsIGZhbHNlKTtcclxuXHJcbiAgICAvL1lvdSBjYW4gcm90YXRlIGEgYm9keSBsaWtlIHlvdSB3b3VsZCByb3RhdGUgYSB0cmFuc2Zvcm0sIGluY3JlbWVudGFsIGJ1dCBrZWVwIGluIG1pbmQsIG5vcm1hbGx5IHdlIHVzZSBmb3JjZXMgaW4gcGh5c2ljcyxcclxuICAgIC8vdGhpcyBpcyBqdXN0IGEgZmVhdHVyZSB0byBtYWtlIGl0IGVhc2llciB0byBjcmVhdGUgcGxheWVyIGNoYXJhY3RlcnNcclxuICAgIHBsYXllckJvZHkucm90YXRlQm9keShuZXcgZi5WZWN0b3IzKDAsIHlUdXJuICogdHVybmluZ3NwZWVkICogX2RlbHRhVGltZSwgMCkpO1xyXG5cclxuICAgIGxldCBtb3ZlbWVudFZlbG9jaXR5OiBmLlZlY3RvcjMgPSBuZXcgZi5WZWN0b3IzKCk7XHJcbiAgICBtb3ZlbWVudFZlbG9jaXR5LnggPSBwbGF5ZXJGb3J3YXJkLnggKiBmb3J3YXJkTW92ZW1lbnQgKiBtb3ZlbWVudHNwZWVkO1xyXG4gICAgbW92ZW1lbnRWZWxvY2l0eS55ID0gcGxheWVyQm9keS5nZXRWZWxvY2l0eSgpLnk7XHJcbiAgICBtb3ZlbWVudFZlbG9jaXR5LnogPSBwbGF5ZXJGb3J3YXJkLnogKiBmb3J3YXJkTW92ZW1lbnQgKiBtb3ZlbWVudHNwZWVkO1xyXG4gICAgcGxheWVyQm9keS5zZXRWZWxvY2l0eShtb3ZlbWVudFZlbG9jaXR5KTtcclxuICAgIC8vU2luY2Ugd2UgYXJlIHJlc2V0dGluZyB0aGUgdmVsb2NpdHkgd2hlbiByZWxlYXNpbmcgdGhlIGtleSB0byBoYXZlIGEgaW5zdGFudCBzdG9wIG91ciBwbGF5ZXIgaXMgbm90IGFibGUgdG8gc2xpZGUuIFdlIHdvdWxkIGhhdmVcclxuICAgIC8vdGhlIHBsYXllciBmYWRlIG91dCBoYXZlIHNsaWRpbmcgaW5zdGVhZCB5b3UgbmVlZCB0byBjb25maWd1cmUgdGhhdCBmb3IgeW91ciBvd24gZ2FtZS5cclxuICB9XHJcblxyXG59Il19